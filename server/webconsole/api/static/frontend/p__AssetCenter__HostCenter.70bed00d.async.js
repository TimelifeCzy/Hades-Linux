"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{21383:function(W,b,n){n.r(b);var C=n(97857),u=n.n(C),y=n(5574),i=n.n(y),B=n(12121),l=n(38345),d=n(72538),I=n(48555),f=n(26713),j=n(20550),g=n(83186),x=n(63922),P=n(49748),h=n(67294),D=n(30381),T=n.n(D),O=n(80854),r=n(85893);T().locale("zh-cn");var R=[{title:"\u4E3B\u673A\u540D\u79F0",dataIndex:"hostname",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5E73\u53F0",dataIndex:"platform",ellipsis:!0,search:!1,width:"8%",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},render:function(c,_,p,t){var e,o;return _.platform===null?null:((e=_.platform)===null||e===void 0?void 0:e.indexOf("Windows"))!==-1?(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{src:"./windows.svg",alt:"Windows Logo",width:"16px"}),"Windows"]}):(0,r.jsxs)("div",{children:[(0,r.jsx)("img",{src:"./linux.svg",alt:"Linux Logo",width:"16px"}),(o=_.platform)===null||o===void 0?void 0:o.replace(/^\S/,function(a){return a.toUpperCase()})]})}},{title:"\u6807\u7B7E",dataIndex:"tags",search:!1,render:function(c,_,p,t){var e;return(0,r.jsx)(f.Z,{size:[0,8],children:(0,r.jsx)(f.Z,{size:[0,8],children:(e=_.tags)===null||e===void 0?void 0:e.map(function(o,a){return(0,r.jsx)(j.Z,{color:"green",children:o},o)})})})},width:"10%"},{title:"\u72B6\u6001",dataIndex:"status",ellipsis:!0,width:"8%",valueEnum:{true:{text:"\u5728\u7EBF",status:"Success"},false:{text:"\u79BB\u7EBF",status:"Error"}},filters:!0,onFilter:!0,search:!1},{title:"\u5BA2\u6237\u7AEF\u6027\u80FD",search:!1,render:function(c,_,p,t){return(0,r.jsxs)(f.Z,{size:[20,24],children:[(0,r.jsxs)(f.Z,{size:[0,4],wrap:!0,children:[(0,r.jsx)(j.Z,{color:"default",children:"CPU"}),parseFloat(_.cpu).toFixed(2)+"%"]}),(0,r.jsx)("p",{}),(0,r.jsxs)(f.Z,{size:[0,4],wrap:!0,children:[(0,r.jsx)(j.Z,{color:"default",children:"MEM"}),parseFloat(_.mem).toFixed(1)+"MB"]})]})},width:"20%"},{title:"\u5730\u5740",dataIndex:"addr",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"create_at",sorter:!0,search:!1,hideInSearch:!0,renderText:function(c){var _=new Date(c*1e3);return T()(_).fromNow()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"10%",render:function(c,_,p,t){return[(0,r.jsx)("a",{href:"host/"+_.agent_id,rel:"noopener noreferrer",children:"\u8BE6\u60C5"},"view")]}}],M=function(){var c=(0,h.useState)(!1),_=i()(c,2),p=_[0],t=_[1],e=(0,h.useState)(0),o=i()(e,2),a=o[0],s=o[1],U=(0,h.useState)(0),w=i()(U,2),L=w[0],K=w[1],S=(0,O.useRequest)(P.Ek),v=S.data;(0,h.useEffect)(function(){s((v==null?void 0:v.total)||0),K((v==null?void 0:v.online)||0)},[v]);var Z=(0,h.useRef)();return(0,r.jsxs)(B._z,{children:[(0,r.jsx)("div",{children:(0,r.jsx)(I.Z,{onResize:function(m){t(m.width<596)},children:(0,r.jsxs)(l.Z.Group,{direction:p?"column":"row",children:[(0,r.jsx)(l.Z,{layout:"center",children:(0,r.jsx)(g.Z,{title:"\u5728\u7EBF\u4E3B\u673A",value:L,precision:0,prefix:(0,r.jsx)(x.Z,{color:"green"})})}),(0,r.jsx)(l.Z.Divider,{type:p?"horizontal":"vertical"}),(0,r.jsx)(l.Z,{layout:"center",children:(0,r.jsx)(g.Z,{title:"\u79BB\u7EBF\u4E3B\u673A",value:a-L,precision:0,prefix:(0,r.jsx)(x.Z,{color:"gray"})})})]})},"resize-observer")}),(0,r.jsx)("p",{}),(0,r.jsx)(d.Z,{columns:R,actionRef:Z,cardBordered:!0,request:P.Zs,editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange:function(m){console.log("value: ",m)}},rowKey:"agent_id",search:{defaultCollapsed:!1,labelWidth:"auto"},options:!1,form:{syncToUrl:function(m,H){return H==="get"?u()(u()({},m),{},{created_at:[m.startTime,m.endTime]}):m}},pagination:{pageSize:10,onChange:function(m){return console.log(m)}},dateFormatter:"string",headerTitle:"\u4E3B\u673A\u5217\u8868"})]})};b.default=M},49748:function(W,b,n){n.d(b,{Ek:function(){return I},LH:function(){return E},Nh:function(){return _},UV:function(){return T},ZN:function(){return R},Zs:function(){return j},nc:function(){return h},pi:function(){return x},sk:function(){return r}});var C=n(15009),u=n.n(C),y=n(97857),i=n.n(y),B=n(99289),l=n.n(B),d=n(80854);function I(t){return f.apply(this,arguments)}function f(){return f=l()(u()().mark(function t(e){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/v1/grpc/conn/count",i()({method:"GET"},e||{})));case 1:case"end":return a.stop()}},t)})),f.apply(this,arguments)}function j(t,e){return g.apply(this,arguments)}function g(){return g=l()(u()().mark(function t(e,o){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/v1/grpc/conn/basic",i()({method:"GET",params:i()({},e)},o||{})));case 1:case"end":return s.stop()}},t)})),g.apply(this,arguments)}function x(t,e){return P.apply(this,arguments)}function P(){return P=l()(u()().mark(function t(e,o){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/v1/grpc/conn/stat",i()({method:"GET",params:i()({},e)},o||{})));case 1:case"end":return s.stop()}},t)})),P.apply(this,arguments)}function h(t,e){return D.apply(this,arguments)}function D(){return D=l()(u()().mark(function t(e,o){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/v1/plugin/send",i()({method:"POST",data:JSON.stringify({name:e.name,pversion:e.pversion,agent_id:e.agent_id,action:e.action}),headers:{"Content-Type":"application/json"}},o||{})));case 1:case"end":return s.stop()}},t)})),D.apply(this,arguments)}function T(t){return O.apply(this,arguments)}function O(){return O=l()(u()().mark(function t(e){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/v1/plugin/list",i()({method:"GET"},e||{})));case 1:case"end":return a.stop()}},t)})),O.apply(this,arguments)}function r(t){return(0,d.request)("/api/v1/plugin/delete",i()({method:"GET"},t||{}))}function R(t){return M.apply(this,arguments)}function M(){return M=l()(u()().mark(function t(e){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,d.request)("/api/v1/application/dashboard",i()({method:"GET"},e||{})));case 1:case"end":return a.stop()}},t)})),M.apply(this,arguments)}function E(t,e){return c.apply(this,arguments)}function c(){return c=l()(u()().mark(function t(e,o){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)(e,i()({},o||{})));case 1:case"end":return s.stop()}},t)})),c.apply(this,arguments)}function _(t,e){return p.apply(this,arguments)}function p(){return p=l()(u()().mark(function t(e,o){return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",(0,d.request)("/api/v1/asset/get",i()({method:"GET",params:e},o||{})));case 1:case"end":return s.stop()}},t)})),p.apply(this,arguments)}}}]);
