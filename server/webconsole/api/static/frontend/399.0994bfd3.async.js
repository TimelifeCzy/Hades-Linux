(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[399],{63430:function(We,m,T){"use strict";var g=T(67294),H=T(96181),G=T(11924),se=T(79360),F=T(24770),ue=T(79642),pe=function($,ce){var ae={};for(var J in $)Object.prototype.hasOwnProperty.call($,J)&&ce.indexOf(J)<0&&(ae[J]=$[J]);if($!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Y=0,J=Object.getOwnPropertySymbols($);Y<J.length;Y++)ce.indexOf(J[Y])<0&&Object.prototype.propertyIsEnumerable.call($,J[Y])&&(ae[J[Y]]=$[J[Y]]);return ae},Q=(0,g.forwardRef)(function($,ce){var ae=$.chartRef,J=$.style,Y=J===void 0?{height:"inherit"}:J,Fe=$.className,xe=$.loading,ve=$.loadingTemplate,Me=$.errorTemplate,Be=pe($,["chartRef","style","className","loading","loadingTemplate","errorTemplate"]),q=(0,G.Z)(H.by,Be),D=q.chart,R=q.container;return(0,g.useEffect)(function(){(0,se.J)(ae,D.current)},[D.current]),(0,g.useImperativeHandle)(ce,function(){return{getChart:function(){return D.current}}}),g.createElement(F.Z,{errorTemplate:Me},xe&&g.createElement(ue.Z,{loadingTemplate:ve,theme:$.theme}),g.createElement("div",{className:Fe,style:Y,ref:R}))});m.Z=Q},14373:function(We,m,T){"use strict";T.d(m,{vY:function(){return ti}});var g=T(74902),H=T(74165),G=T(15861),se=T(91),F=T(1413),ue=T(97937),pe=T(63606),Q=T(86548),$=T(20383),ce=T(46362),ae=T(61099),J=T(67294),Y=T(26303),Fe=T(75302),xe=T(4942),ve=T(87462),Me=T(94184),Be=T.n(Me),q=T(98423),D=T(53124),R=T(97647),re=T(49401),Ae=function(Je,Re){var He={};for(var ze in Je)Object.prototype.hasOwnProperty.call(Je,ze)&&Re.indexOf(ze)<0&&(He[ze]=Je[ze]);if(Je!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,ze=Object.getOwnPropertySymbols(Je);y<ze.length;y++)Re.indexOf(ze[y])<0&&Object.prototype.propertyIsEnumerable.call(Je,ze[y])&&(He[ze[y]]=Je[ze[y]]);return He},j=function(Re){var He=Re.prefixCls,ze=Re.className,y=Re.hoverable,ee=y===void 0?!0:y,ke=Ae(Re,["prefixCls","className","hoverable"]);return J.createElement(D.C,null,function(Le){var Ze=Le.getPrefixCls,Ie=Ze("card",He),Xe=Be()("".concat(Ie,"-grid"),ze,(0,xe.Z)({},"".concat(Ie,"-grid-hoverable"),ee));return J.createElement("div",(0,ve.Z)({},ke,{className:Xe}))})},c=j,f=function(Je,Re){var He={};for(var ze in Je)Object.prototype.hasOwnProperty.call(Je,ze)&&Re.indexOf(ze)<0&&(He[ze]=Je[ze]);if(Je!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,ze=Object.getOwnPropertySymbols(Je);y<ze.length;y++)Re.indexOf(ze[y])<0&&Object.prototype.propertyIsEnumerable.call(Je,ze[y])&&(He[ze[y]]=Je[ze[y]]);return He};function p(Je){var Re=Je.map(function(He,ze){return J.createElement("li",{style:{width:"".concat(100/Je.length,"%")},key:"action-".concat(ze)},J.createElement("span",null,He))});return Re}var x=J.forwardRef(function(Je,Re){var He,ze,y=J.useContext(D.E_),ee=y.getPrefixCls,ke=y.direction,Le=J.useContext(R.Z),Ze=function(It){var li;(li=Je.onTabChange)===null||li===void 0||li.call(Je,It)},Ie=function(){var It;return J.Children.forEach(Je.children,function(li){li&&li.type&&li.type===c&&(It=!0)}),It},Xe=Je.prefixCls,lt=Je.className,ct=Je.extra,ft=Je.headStyle,yt=ft===void 0?{}:ft,xt=Je.bodyStyle,Vt=xt===void 0?{}:xt,vt=Je.title,Mt=Je.loading,Lt=Je.bordered,wt=Lt===void 0?!0:Lt,Bt=Je.size,kt=Je.type,jt=Je.cover,Ot=Je.actions,Rt=Je.tabList,dt=Je.children,qt=Je.activeTabKey,Tt=Je.defaultActiveTabKey,Dt=Je.tabBarExtraContent,ui=Je.hoverable,hi=Je.tabProps,ci=hi===void 0?{}:hi,Si=f(Je,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),Kt=ee("card",Xe),wi=J.createElement(Y.Z,{loading:!0,active:!0,paragraph:{rows:4},title:!1},dt),Di=qt!==void 0,Zi=(0,ve.Z)((0,ve.Z)({},ci),(He={},(0,xe.Z)(He,Di?"activeKey":"defaultActiveKey",Di?qt:Tt),(0,xe.Z)(He,"tabBarExtraContent",Dt),He)),Ci,Pi=Rt&&Rt.length?J.createElement(re.Z,(0,ve.Z)({size:"large"},Zi,{className:"".concat(Kt,"-head-tabs"),onChange:Ze,items:Rt.map(function(fi){var It;return{label:fi.tab,key:fi.key,disabled:(It=fi.disabled)!==null&&It!==void 0?It:!1}})})):null;(vt||ct||Pi)&&(Ci=J.createElement("div",{className:"".concat(Kt,"-head"),style:yt},J.createElement("div",{className:"".concat(Kt,"-head-wrapper")},vt&&J.createElement("div",{className:"".concat(Kt,"-head-title")},vt),ct&&J.createElement("div",{className:"".concat(Kt,"-extra")},ct)),Pi));var Oi=jt?J.createElement("div",{className:"".concat(Kt,"-cover")},jt):null,Li=J.createElement("div",{className:"".concat(Kt,"-body"),style:Vt},Mt?wi:dt),Ui=Ot&&Ot.length?J.createElement("ul",{className:"".concat(Kt,"-actions")},p(Ot)):null,Ki=(0,q.Z)(Si,["onTabChange"]),Bi=Bt||Le,Gi=Be()(Kt,(ze={},(0,xe.Z)(ze,"".concat(Kt,"-loading"),Mt),(0,xe.Z)(ze,"".concat(Kt,"-bordered"),wt),(0,xe.Z)(ze,"".concat(Kt,"-hoverable"),ui),(0,xe.Z)(ze,"".concat(Kt,"-contain-grid"),Ie()),(0,xe.Z)(ze,"".concat(Kt,"-contain-tabs"),Rt&&Rt.length),(0,xe.Z)(ze,"".concat(Kt,"-").concat(Bi),Bi),(0,xe.Z)(ze,"".concat(Kt,"-type-").concat(kt),!!kt),(0,xe.Z)(ze,"".concat(Kt,"-rtl"),ke==="rtl"),ze),lt);return J.createElement("div",(0,ve.Z)({ref:Re},Ki,{className:Gi}),Ci,Oi,Li,Ui)}),u=x,S=function(Je,Re){var He={};for(var ze in Je)Object.prototype.hasOwnProperty.call(Je,ze)&&Re.indexOf(ze)<0&&(He[ze]=Je[ze]);if(Je!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,ze=Object.getOwnPropertySymbols(Je);y<ze.length;y++)Re.indexOf(ze[y])<0&&Object.prototype.propertyIsEnumerable.call(Je,ze[y])&&(He[ze[y]]=Je[ze[y]]);return He},B=function(Re){return J.createElement(D.C,null,function(He){var ze=He.getPrefixCls,y=Re.prefixCls,ee=Re.className,ke=Re.avatar,Le=Re.title,Ze=Re.description,Ie=S(Re,["prefixCls","className","avatar","title","description"]),Xe=ze("card",y),lt=Be()("".concat(Xe,"-meta"),ee),ct=ke?J.createElement("div",{className:"".concat(Xe,"-meta-avatar")},ke):null,ft=Le?J.createElement("div",{className:"".concat(Xe,"-meta-title")},Le):null,yt=Ze?J.createElement("div",{className:"".concat(Xe,"-meta-description")},Ze):null,xt=ft||yt?J.createElement("div",{className:"".concat(Xe,"-meta-detail")},ft,yt):null;return J.createElement("div",(0,ve.Z)({},Ie,{className:lt}),ct,xt)})},_=B,O=u;O.Grid=c,O.Meta=_;var U=O,Te=T(27049),je=T(26713),le=T(85893),Qe=function(Re){var He=Re.padding;return(0,le.jsx)("div",{style:{padding:He||"0 24px"},children:(0,le.jsx)(Te.Z,{style:{margin:0}})})},ot={xs:2,sm:2,md:4,lg:4,xl:6,xxl:6},nt=function(Re){var He=Re.size,ze=Re.active,y=(0,J.useMemo)(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),ee=Fe.ZP.useBreakpoint()||y,ke=Object.keys(ee).filter(function(Ie){return ee[Ie]===!0})[0]||"md",Le=He===void 0?ot[ke]||6:He,Ze=function(Xe){return Xe===0?0:Le>2?42:16};return(0,le.jsx)(U,{bordered:!1,style:{marginBlockEnd:16},children:(0,le.jsx)("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(Le).fill(null).map(function(Ie,Xe){return(0,le.jsxs)("div",{style:{borderInlineStart:Le>2&&Xe===1?"1px solid rgba(0,0,0,0.06)":void 0,paddingInlineStart:Ze(Xe),flex:1,marginInlineEnd:Xe===0?16:0},children:[(0,le.jsx)(Y.Z,{active:ze,paragraph:!1,title:{width:100,style:{marginBlockStart:0}}}),(0,le.jsx)(Y.Z.Button,{active:ze,style:{height:48}})]},Xe)})})})},ut=function(Re){var He=Re.active;return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsx)(U,{bordered:!1,style:{borderRadius:0},bodyStyle:{padding:24},children:(0,le.jsxs)("div",{style:{width:"100%",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,le.jsx)("div",{style:{maxWidth:"100%",flex:1},children:(0,le.jsx)(Y.Z,{active:He,title:{width:100,style:{marginBlockStart:0}},paragraph:{rows:1,style:{margin:0}}})}),(0,le.jsx)(Y.Z.Button,{active:He,size:"small",style:{width:165,marginBlockStart:12}})]})}),(0,le.jsx)(Qe,{})]})},me=function(Re){var He=Re.size,ze=Re.active,y=ze===void 0?!0:ze,ee=Re.actionButton;return(0,le.jsxs)(U,{bordered:!1,bodyStyle:{padding:0},children:[new Array(He).fill(null).map(function(ke,Le){return(0,le.jsx)(ut,{active:!!y},Le)}),ee!==!1&&(0,le.jsx)(U,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},bodyStyle:{display:"flex",alignItems:"center",justifyContent:"center"},children:(0,le.jsx)(Y.Z.Button,{style:{width:102},active:y,size:"small"})})]})},v=function(Re){var He=Re.active;return(0,le.jsxs)("div",{style:{marginBlockEnd:16},children:[(0,le.jsx)(Y.Z,{paragraph:!1,title:{width:185}}),(0,le.jsx)(Y.Z.Button,{active:He,size:"small"})]})},M=function(Re){var He=Re.active;return(0,le.jsx)(U,{bordered:!1,style:{borderBottomRightRadius:0,borderBottomLeftRadius:0},bodyStyle:{paddingBlockEnd:8},children:(0,le.jsxs)(je.Z,{style:{width:"100%",justifyContent:"space-between"},children:[(0,le.jsx)(Y.Z.Button,{active:He,style:{width:200},size:"small"}),(0,le.jsxs)(je.Z,{children:[(0,le.jsx)(Y.Z.Button,{active:He,size:"small",style:{width:120}}),(0,le.jsx)(Y.Z.Button,{active:He,size:"small",style:{width:80}})]})]})})},P=function(Re){var He=Re.active,ze=He===void 0?!0:He,y=Re.statistic,ee=Re.actionButton,ke=Re.toolbar,Le=Re.pageHeader,Ze=Re.list,Ie=Ze===void 0?5:Ze;return(0,le.jsxs)("div",{style:{width:"100%"},children:[Le!==!1&&(0,le.jsx)(v,{active:ze}),y!==!1&&(0,le.jsx)(nt,{size:y,active:ze}),(ke!==!1||Ie!==!1)&&(0,le.jsxs)(U,{bordered:!1,bodyStyle:{padding:0},children:[ke!==!1&&(0,le.jsx)(M,{active:ze}),Ie!==!1&&(0,le.jsx)(me,{size:Ie,active:ze,actionButton:ee})]})]})},I=P,ie={xs:1,sm:2,md:3,lg:3,xl:3,xxl:4},fe=function(Re){var He=Re.active;return(0,le.jsxs)("div",{style:{marginBlockStart:32},children:[(0,le.jsx)(Y.Z.Button,{active:He,size:"small",style:{width:100,marginBlockEnd:16}}),(0,le.jsxs)("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:[(0,le.jsxs)("div",{style:{flex:1,marginInlineEnd:24,maxWidth:300},children:[(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{marginBlockStart:0}}}),(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{marginBlockStart:8}}}),(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{marginBlockStart:8}}})]}),(0,le.jsx)("div",{style:{flex:1,alignItems:"center",justifyContent:"center"},children:(0,le.jsxs)("div",{style:{maxWidth:300,margin:"auto"},children:[(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{marginBlockStart:0}}}),(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{marginBlockStart:8}}})]})})]})]})},Ve=function(Re){var He=Re.size,ze=Re.active,y=(0,J.useMemo)(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),ee=Fe.ZP.useBreakpoint()||y,ke=Object.keys(ee).filter(function(Ze){return ee[Ze]===!0})[0]||"md",Le=He===void 0?ie[ke]||3:He;return(0,le.jsx)("div",{style:{width:"100%",justifyContent:"space-between",display:"flex"},children:new Array(Le).fill(null).map(function(Ze,Ie){return(0,le.jsxs)("div",{style:{flex:1,paddingInlineStart:Ie===0?0:24,paddingInlineEnd:Ie===Le-1?0:24},children:[(0,le.jsx)(Y.Z,{active:ze,paragraph:!1,title:{style:{marginBlockStart:0}}}),(0,le.jsx)(Y.Z,{active:ze,paragraph:!1,title:{style:{marginBlockStart:8}}}),(0,le.jsx)(Y.Z,{active:ze,paragraph:!1,title:{style:{marginBlockStart:8}}})]},Ie)})})},he=function(Re){var He=Re.active,ze=Re.header,y=ze===void 0?!1:ze,ee=(0,J.useMemo)(function(){return{lg:!0,md:!0,sm:!1,xl:!1,xs:!1,xxl:!1}},[]),ke=Fe.ZP.useBreakpoint()||ee,Le=Object.keys(ke).filter(function(Ie){return ke[Ie]===!0})[0]||"md",Ze=ie[Le]||3;return(0,le.jsxs)(le.Fragment,{children:[(0,le.jsxs)("div",{style:{display:"flex",background:y?"rgba(0,0,0,0.02)":"none",padding:"24px 8px"},children:[new Array(Ze).fill(null).map(function(Ie,Xe){return(0,le.jsx)("div",{style:{flex:1,paddingInlineStart:y&&Xe===0?0:20,paddingInlineEnd:32},children:(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{margin:0,height:24,width:y?"75px":"100%"}}})},Xe)}),(0,le.jsx)("div",{style:{flex:3,paddingInlineStart:32},children:(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{margin:0,height:24,width:y?"75px":"100%"}}})})]}),(0,le.jsx)(Qe,{padding:"0px 0px"})]})},de=function(Re){var He=Re.active,ze=Re.size,y=ze===void 0?4:ze;return(0,le.jsxs)(U,{bordered:!1,children:[(0,le.jsx)(Y.Z.Button,{active:He,size:"small",style:{width:100,marginBlockEnd:16}}),(0,le.jsx)(he,{header:!0,active:He}),new Array(y).fill(null).map(function(ee,ke){return(0,le.jsx)(he,{active:He},ke)}),(0,le.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",paddingBlockStart:16},children:(0,le.jsx)(Y.Z,{active:He,paragraph:!1,title:{style:{margin:0,height:32,float:"right",maxWidth:"630px"}}})})]})},Ee=function(Re){var He=Re.active;return(0,le.jsxs)(U,{bordered:!1,style:{borderStartEndRadius:0,borderTopLeftRadius:0},children:[(0,le.jsx)(Y.Z.Button,{active:He,size:"small",style:{width:100,marginBlockEnd:16}}),(0,le.jsx)(Ve,{active:He}),(0,le.jsx)(fe,{active:He})]})},K=function(Re){var He=Re.active,ze=He===void 0?!0:He,y=Re.pageHeader,ee=Re.list;return(0,le.jsxs)("div",{style:{width:"100%"},children:[y!==!1&&(0,le.jsx)(v,{active:ze}),(0,le.jsx)(Ee,{active:ze}),ee!==!1&&(0,le.jsx)(Qe,{}),ee!==!1&&(0,le.jsx)(de,{active:ze,size:ee})]})},A=K,z=function(Re){var He=Re.active,ze=He===void 0?!0:He,y=Re.pageHeader;return(0,le.jsxs)("div",{style:{width:"100%"},children:[y!==!1&&(0,le.jsx)(v,{active:ze}),(0,le.jsx)(U,{children:(0,le.jsxs)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",padding:128},children:[(0,le.jsx)(Y.Z.Avatar,{size:64,style:{marginBlockEnd:32}}),(0,le.jsx)(Y.Z.Button,{active:ze,style:{width:214,marginBlockEnd:8}}),(0,le.jsx)(Y.Z.Button,{active:ze,style:{width:328},size:"small"}),(0,le.jsxs)(je.Z,{style:{marginBlockStart:24},children:[(0,le.jsx)(Y.Z.Button,{active:ze,style:{width:116}}),(0,le.jsx)(Y.Z.Button,{active:ze,style:{width:116}})]})]})})]})},ye=z,De=["type"],s=function(Re){var He=Re.type,ze=He===void 0?"list":He,y=(0,se.Z)(Re,De);return ze==="result"?(0,le.jsx)(ye,(0,F.Z)({},y)):ze==="descriptions"?(0,le.jsx)(A,(0,F.Z)({},y)):(0,le.jsx)(I,(0,F.Z)({},y))},C=s,l=T(2026),d=T(90081),b=T(73884),E=T(86333),L=T(97685),V=T(10915),ge=T(12461),Ne=T(21770),Ue=T(86671),Ke=function(Re){return(ge.ZP.warn||ge.ZP.warning)(Re)};function _e(Je){var Re=Je.data,He=Je.row;return(0,F.Z)((0,F.Z)({},Re),He)}function a(Je){var Re=Je.type||"single",He=(0,V.YB)(),ze=(0,Ne.Z)([],{value:Je.editableKeys,onChange:Je.onChange?function(vt){var Mt;Je==null||(Mt=Je.onChange)===null||Mt===void 0||Mt.call(Je,vt,Je.dataSource)}:void 0}),y=(0,L.Z)(ze,2),ee=y[0],ke=y[1],Le=(0,J.useMemo)(function(){var vt=Re==="single"?ee==null?void 0:ee.slice(0,1):ee;return new Set(vt)},[(ee||[]).join(","),Re]),Ze=(0,J.useCallback)(function(vt){return!!(ee!=null&&ee.includes((0,Ue.sN)(vt)))},[(ee||[]).join(",")]),Ie=function(Mt){return Le.size>0&&Re==="single"?(Ke(Je.onlyOneLineEditorAlertMessage||He.getMessage("editableTable.onlyOneLineEditor","\u53EA\u80FD\u540C\u65F6\u7F16\u8F91\u4E00\u884C")),!1):(Le.add((0,Ue.sN)(Mt)),ke(Array.from(Le)),!0)},Xe=function(Mt){return Le.delete((0,Ue.sN)(Mt)),ke(Array.from(Le)),!0},lt=function(){var vt=(0,G.Z)((0,H.Z)().mark(function Mt(Lt,wt,Bt,kt){var jt,Ot;return(0,H.Z)().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,Je==null||(jt=Je.onCancel)===null||jt===void 0?void 0:jt.call(Je,Lt,wt,Bt,kt);case 2:if(Ot=dt.sent,Ot!==!1){dt.next=5;break}return dt.abrupt("return",!1);case 5:return dt.abrupt("return",!0);case 6:case"end":return dt.stop()}},Mt)}));return function(Lt,wt,Bt,kt){return vt.apply(this,arguments)}}(),ct=function(){var vt=(0,G.Z)((0,H.Z)().mark(function Mt(Lt,wt,Bt){var kt,jt,Ot;return(0,H.Z)().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,Je==null||(kt=Je.onSave)===null||kt===void 0?void 0:kt.call(Je,Lt,wt,Bt);case 2:if(jt=dt.sent,jt!==!1){dt.next=5;break}return dt.abrupt("return",!1);case 5:return dt.next=7,Xe(Lt);case 7:return Ot={data:Je.dataSource,row:wt,key:Lt,childrenColumnName:Je.childrenColumnName||"children"},Je.setDataSource(_e(Ot)),dt.abrupt("return",!0);case 10:case"end":return dt.stop()}},Mt)}));return function(Lt,wt,Bt){return vt.apply(this,arguments)}}(),ft=He.getMessage("editableTable.action.save","\u4FDD\u5B58"),yt=He.getMessage("editableTable.action.delete","\u5220\u9664"),xt=He.getMessage("editableTable.action.cancel","\u53D6\u6D88"),Vt=(0,J.useCallback)(function(vt,Mt){var Lt=(0,F.Z)({recordKey:vt,cancelEditable:Xe,onCancel:lt,onSave:ct,editableKeys:ee,setEditableRowKeys:ke,saveText:ft,cancelText:xt,deleteText:yt,deletePopconfirmMessage:"".concat(He.getMessage("deleteThisLine","\u5220\u9664\u6B64\u884C"),"?"),editorType:"Map"},Mt),wt=(0,Ue.aX)(Je.dataSource,Lt);return Je.actionRender?Je.actionRender(Je.dataSource,Lt,{save:wt.save,delete:wt.delete,cancel:wt.cancel}):[wt.save,wt.delete,wt.cancel]},[ee&&ee.join(","),Je.dataSource]);return{editableKeys:ee,setEditableRowKeys:ke,isEditable:Ze,actionRender:Vt,startEditable:Ie,cancelEditable:Xe}}var k=T(78164),N=T(71002),X=T(50344),ne=T(96159),we=T(24308),$e=function(Re){var He=Re.children;return He},Ge=$e;function et(Je){return Je!=null}var ht=function(Re){var He=Re.itemPrefixCls,ze=Re.component,y=Re.span,ee=Re.className,ke=Re.style,Le=Re.labelStyle,Ze=Re.contentStyle,Ie=Re.bordered,Xe=Re.label,lt=Re.content,ct=Re.colon,ft=ze;if(Ie){var yt;return J.createElement(ft,{className:Be()((yt={},(0,xe.Z)(yt,"".concat(He,"-item-label"),et(Xe)),(0,xe.Z)(yt,"".concat(He,"-item-content"),et(lt)),yt),ee),style:ke,colSpan:y},et(Xe)&&J.createElement("span",{style:Le},Xe),et(lt)&&J.createElement("span",{style:Ze},lt))}return J.createElement(ft,{className:Be()("".concat(He,"-item"),ee),style:ke,colSpan:y},J.createElement("div",{className:"".concat(He,"-item-container")},(Xe||Xe===0)&&J.createElement("span",{className:Be()("".concat(He,"-item-label"),(0,xe.Z)({},"".concat(He,"-item-no-colon"),!ct)),style:Le},Xe),(lt||lt===0)&&J.createElement("span",{className:Be()("".concat(He,"-item-content")),style:Ze},lt)))},gt=ht;function St(Je,Re,He){var ze=Re.colon,y=Re.prefixCls,ee=Re.bordered,ke=He.component,Le=He.type,Ze=He.showLabel,Ie=He.showContent,Xe=He.labelStyle,lt=He.contentStyle;return Je.map(function(ct,ft){var yt=ct.props,xt=yt.label,Vt=yt.children,vt=yt.prefixCls,Mt=vt===void 0?y:vt,Lt=yt.className,wt=yt.style,Bt=yt.labelStyle,kt=yt.contentStyle,jt=yt.span,Ot=jt===void 0?1:jt,Rt=ct.key;return typeof ke=="string"?J.createElement(gt,{key:"".concat(Le,"-").concat(Rt||ft),className:Lt,style:wt,labelStyle:(0,ve.Z)((0,ve.Z)({},Xe),Bt),contentStyle:(0,ve.Z)((0,ve.Z)({},lt),kt),span:Ot,colon:ze,component:ke,itemPrefixCls:Mt,bordered:ee,label:Ze?xt:null,content:Ie?Vt:null}):[J.createElement(gt,{key:"label-".concat(Rt||ft),className:Lt,style:(0,ve.Z)((0,ve.Z)((0,ve.Z)({},Xe),wt),Bt),span:1,colon:ze,component:ke[0],itemPrefixCls:Mt,bordered:ee,label:xt}),J.createElement(gt,{key:"content-".concat(Rt||ft),className:Lt,style:(0,ve.Z)((0,ve.Z)((0,ve.Z)({},lt),wt),kt),span:Ot*2-1,component:ke[1],itemPrefixCls:Mt,bordered:ee,content:Vt})]})}var bt=function(Re){var He=J.useContext(Zt),ze=Re.prefixCls,y=Re.vertical,ee=Re.row,ke=Re.index,Le=Re.bordered;return y?J.createElement(J.Fragment,null,J.createElement("tr",{key:"label-".concat(ke),className:"".concat(ze,"-row")},St(ee,Re,(0,ve.Z)({component:"th",type:"label",showLabel:!0},He))),J.createElement("tr",{key:"content-".concat(ke),className:"".concat(ze,"-row")},St(ee,Re,(0,ve.Z)({component:"td",type:"content",showContent:!0},He)))):J.createElement("tr",{key:ke,className:"".concat(ze,"-row")},St(ee,Re,(0,ve.Z)({component:Le?["th","td"]:"td",type:"item",showLabel:!0,showContent:!0},He)))},Gt=bt,Zt=J.createContext({}),Ht={xxl:3,xl:3,lg:3,md:3,sm:2,xs:1};function ni(Je,Re){if(typeof Je=="number")return Je;if((0,N.Z)(Je)==="object")for(var He=0;He<we.c4.length;He++){var ze=we.c4[He];if(Re[ze]&&Je[ze]!==void 0)return Je[ze]||Ht[ze]}return 3}function si(Je,Re,He){var ze=Je;return(Re===void 0||Re>He)&&(ze=(0,ne.Tm)(Je,{span:He})),ze}function Ut(Je,Re){var He=(0,X.Z)(Je).filter(function(ke){return ke}),ze=[],y=[],ee=Re;return He.forEach(function(ke,Le){var Ze,Ie=(Ze=ke.props)===null||Ze===void 0?void 0:Ze.span,Xe=Ie||1;if(Le===He.length-1){y.push(si(ke,Ie,ee)),ze.push(y);return}Xe<ee?(ee-=Xe,y.push(ke)):(y.push(si(ke,Xe,ee)),ze.push(y),ee=Re,y=[])}),ze}function ri(Je){var Re,He=Je.prefixCls,ze=Je.title,y=Je.extra,ee=Je.column,ke=ee===void 0?Ht:ee,Le=Je.colon,Ze=Le===void 0?!0:Le,Ie=Je.bordered,Xe=Je.layout,lt=Je.children,ct=Je.className,ft=Je.style,yt=Je.size,xt=Je.labelStyle,Vt=Je.contentStyle,vt=J.useContext(D.E_),Mt=vt.getPrefixCls,Lt=vt.direction,wt=Mt("descriptions",He),Bt=J.useState({}),kt=(0,L.Z)(Bt,2),jt=kt[0],Ot=kt[1],Rt=ni(ke,jt);J.useEffect(function(){var Tt=we.ZP.subscribe(function(Dt){(0,N.Z)(ke)==="object"&&Ot(Dt)});return function(){we.ZP.unsubscribe(Tt)}},[]);var dt=Ut(lt,Rt),qt=J.useMemo(function(){return{labelStyle:xt,contentStyle:Vt}},[xt,Vt]);return J.createElement(Zt.Provider,{value:qt},J.createElement("div",{className:Be()(wt,(Re={},(0,xe.Z)(Re,"".concat(wt,"-").concat(yt),yt&&yt!=="default"),(0,xe.Z)(Re,"".concat(wt,"-bordered"),!!Ie),(0,xe.Z)(Re,"".concat(wt,"-rtl"),Lt==="rtl"),Re),ct),style:ft},(ze||y)&&J.createElement("div",{className:"".concat(wt,"-header")},ze&&J.createElement("div",{className:"".concat(wt,"-title")},ze),y&&J.createElement("div",{className:"".concat(wt,"-extra")},y)),J.createElement("div",{className:"".concat(wt,"-view")},J.createElement("table",null,J.createElement("tbody",null,dt.map(function(Tt,Dt){return J.createElement(Gt,{key:Dt,index:Dt,colon:Ze,prefixCls:wt,vertical:Xe==="vertical",bordered:Ie,row:Tt})}))))))}ri.Item=Ge;var ei=ri,Se=T(76519),Z=T(88306),te=T(30939),Ce=function(Re,He){var ze=He||{},y=ze.onRequestError,ee=ze.effects,ke=ze.manual,Le=ze.dataSource,Ze=ze.defaultDataSource,Ie=ze.onDataSourceChange,Xe=(0,Ne.Z)(Ze,{value:Le,onChange:Ie}),lt=(0,L.Z)(Xe,2),ct=lt[0],ft=lt[1],yt=(0,Ne.Z)(He==null?void 0:He.loading,{value:He==null?void 0:He.loading,onChange:He==null?void 0:He.onLoadingChange}),xt=(0,L.Z)(yt,2),Vt=xt[0],vt=xt[1],Mt=function(Bt){ft(Bt),vt(!1)},Lt=function(){var wt=(0,G.Z)((0,H.Z)().mark(function Bt(){var kt,jt,Ot;return(0,H.Z)().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:if(!Vt){dt.next=2;break}return dt.abrupt("return");case 2:return vt(!0),dt.prev=3,dt.next=6,Re();case 6:if(dt.t0=dt.sent,dt.t0){dt.next=9;break}dt.t0={};case 9:kt=dt.t0,jt=kt.data,Ot=kt.success,Ot!==!1&&Mt(jt),dt.next=23;break;case 15:if(dt.prev=15,dt.t1=dt.catch(3),y!==void 0){dt.next=21;break}throw new Error(dt.t1);case 21:y(dt.t1);case 22:vt(!1);case 23:return dt.prev=23,vt(!1),dt.finish(23);case 26:case"end":return dt.stop()}},Bt,null,[[3,15,23,26]])}));return function(){return wt.apply(this,arguments)}}();return(0,J.useEffect)(function(){ke||Lt()},[].concat((0,g.Z)(ee||[]),[ke])),{dataSource:ct,setDataSource:ft,loading:Vt,reload:function(){return Lt()}}},Oe=Ce,Ye=T(98082),qe=T(43146),rt=["valueEnum","render","renderText","mode","plain","dataIndex","request","params","editable"],at=["request","columns","params","dataSource","onDataSourceChange","formProps","editable","loading","onLoadingChange","actionRef","onRequestError"],pt=function(Re,He){var ze=Re.dataIndex;if(ze){var y=Array.isArray(ze)?(0,Z.Z)(He,ze):He[ze];if(y!==void 0||y!==null)return y}return Re.children},Et=function(Re){var He,ze=Re.valueEnum,y=Re.action,ee=Re.index,ke=Re.text,Le=Re.entity,Ze=Re.mode,Ie=Re.render,Xe=Re.editableUtils,lt=Re.valueType,ct=Re.plain,ft=Re.dataIndex,yt=Re.request,xt=Re.renderFormItem,Vt=Re.params,vt=$.ZP.useFormInstance(),Mt=(He=Ye.Ow.useToken)===null||He===void 0?void 0:He.call(Ye.Ow),Lt=Mt.token,wt={text:ke,valueEnum:ze,mode:Ze||"read",proFieldProps:{render:Ie?function(){return Ie==null?void 0:Ie(ke,Le,ee,y,(0,F.Z)((0,F.Z)({},Re),{},{type:"descriptions"}))}:void 0},ignoreFormItem:!0,valueType:lt,request:yt,params:Vt,plain:ct};if(Ze==="read"||!Ze||lt==="option"){var Bt=(0,l.w)(Re.fieldProps,void 0,(0,F.Z)((0,F.Z)({},Re),{},{rowKey:ft,isEditable:!1}));return(0,le.jsx)(ce.Z,(0,F.Z)((0,F.Z)({name:ft},wt),{},{fieldProps:Bt}))}var kt=function(){var Ot,Rt=(0,l.w)(Re.formItemProps,vt,(0,F.Z)((0,F.Z)({},Re),{},{rowKey:ft,isEditable:!0})),dt=(0,l.w)(Re.fieldProps,vt,(0,F.Z)((0,F.Z)({},Re),{},{rowKey:ft,isEditable:!0})),qt=xt?xt==null?void 0:xt((0,F.Z)((0,F.Z)({},Re),{},{type:"descriptions"}),{isEditable:!0,recordKey:ft,record:vt.getFieldValue([ft].flat(1)),defaultRender:function(){return(0,le.jsx)(ce.Z,(0,F.Z)((0,F.Z)({},wt),{},{fieldProps:dt}))},type:"descriptions"},vt):void 0;return(0,le.jsxs)("div",{style:{display:"flex",gap:Lt.marginXS,alignItems:"center"},children:[(0,le.jsx)(d.U,(0,F.Z)((0,F.Z)({name:ft},Rt),{},{style:(0,F.Z)({margin:0},(Rt==null?void 0:Rt.style)||{}),initialValue:ke||(Rt==null?void 0:Rt.initialValue),children:qt||(0,le.jsx)(ce.Z,(0,F.Z)((0,F.Z)({},wt),{},{proFieldProps:(0,F.Z)({},wt.proFieldProps),fieldProps:dt}))})),Xe==null||(Ot=Xe.actionRender)===null||Ot===void 0?void 0:Ot.call(Xe,ft||ee,{cancelText:(0,le.jsx)(ue.Z,{}),saveText:(0,le.jsx)(pe.Z,{}),deleteText:!1})]})};return(0,le.jsx)("div",{style:{marginTop:-5,marginBottom:-5,marginLeft:0,marginRight:0},children:kt()})},Pt=function(Re,He,ze,y){var ee,ke=[],Le=Re==null||(ee=Re.map)===null||ee===void 0?void 0:ee.call(Re,function(Ze,Ie){var Xe,lt;if(J.isValidElement(Ze))return Ze;var ct=Ze,ft=ct.valueEnum,yt=ct.render,xt=ct.renderText,Vt=ct.mode,vt=ct.plain,Mt=ct.dataIndex,Lt=ct.request,wt=ct.params,Bt=ct.editable,kt=(0,se.Z)(ct,rt),jt=(Xe=pt(Ze,He))!==null&&Xe!==void 0?Xe:kt.children,Ot=xt?xt(jt,He,Ie,ze):jt,Rt=typeof kt.title=="function"?kt.title(Ze,"descriptions",null):kt.title,dt=typeof kt.valueType=="function"?kt.valueType(He||{},"descriptions"):kt.valueType,qt=y==null?void 0:y.isEditable(Mt||Ie),Tt=Vt||qt?"edit":"read",Dt=y&&Tt==="read"&&Bt!==!1&&(Bt==null?void 0:Bt(Ot,He,Ie))!==!1,ui=Dt?je.Z:J.Fragment,hi=Tt==="edit"?Ot:(0,b.X)(Ot,Ze,Ot),ci=(0,J.createElement)(ei.Item,(0,F.Z)((0,F.Z)({},kt),{},{key:kt.key||((lt=kt.label)===null||lt===void 0?void 0:lt.toString())||Ie,label:(Rt||kt.label||kt.tooltip||kt.tip)&&(0,le.jsx)(E.G,{label:Rt||kt.label,tooltip:kt.tooltip||kt.tip,ellipsis:Ze.ellipsis})}),(0,le.jsxs)(ui,{children:[(0,le.jsx)(Et,(0,F.Z)((0,F.Z)({},Ze),{},{dataIndex:Ze.dataIndex||Ie,mode:Tt,text:hi,valueType:dt,entity:He,index:Ie,action:ze,editableUtils:y})),Dt&&dt!=="option"&&(0,le.jsx)(Q.Z,{onClick:function(){y==null||y.startEditable(Mt||Ie)}})]}));return dt==="option"?(ke.push(ci),null):ci}).filter(function(Ze){return Ze});return{options:ke!=null&&ke.length?ke:null,children:Le}},oi=function(Re){return(0,le.jsx)(ei.Item,(0,F.Z)((0,F.Z)({},Re),{},{children:Re.children}))},$t=function(Re){return Re.children},ti=function(Re){var He,ze=Re.request,y=Re.columns,ee=Re.params,ke=ee===void 0?{}:ee,Le=Re.dataSource,Ze=Re.onDataSourceChange,Ie=Re.formProps,Xe=Re.editable,lt=Re.loading,ct=Re.onLoadingChange,ft=Re.actionRef,yt=Re.onRequestError,xt=(0,se.Z)(Re,at),Vt=(0,J.useContext)(Se.ZP.ConfigContext),vt=Oe((0,G.Z)((0,H.Z)().mark(function dt(){var qt;return(0,H.Z)().wrap(function(Dt){for(;;)switch(Dt.prev=Dt.next){case 0:if(!ze){Dt.next=6;break}return Dt.next=3,ze(ke);case 3:Dt.t0=Dt.sent,Dt.next=7;break;case 6:Dt.t0={data:{}};case 7:return qt=Dt.t0,Dt.abrupt("return",qt);case 9:case"end":return Dt.stop()}},dt)})),{onRequestError:yt,effects:[(0,te.P)(ke)],manual:!ze,dataSource:Le,loading:lt,onLoadingChange:ct,onDataSourceChange:Ze}),Mt=a((0,F.Z)((0,F.Z)({},Re.editable),{},{childrenColumnName:void 0,dataSource:vt.dataSource,setDataSource:vt.setDataSource}));if((0,J.useEffect)(function(){ft&&(ft.current=(0,F.Z)({reload:vt.reload},Mt))},[vt,ft,Mt]),vt.loading||vt.loading===void 0&&ze)return(0,le.jsx)(C,{type:"descriptions",list:!1,pageHeader:!1});var Lt=function(){var qt=(0,X.Z)(Re.children).filter(Boolean).map(function(Tt){if(!J.isValidElement(Tt))return Tt;var Dt=Tt==null?void 0:Tt.props,ui=Dt.valueEnum,hi=Dt.valueType,ci=Dt.dataIndex,Si=Dt.ellipsis,Kt=Dt.copyable,wi=Dt.request;return!hi&&!ui&&!ci&&!wi&&!Si&&!Kt?Tt:(0,F.Z)((0,F.Z)({},Tt==null?void 0:Tt.props),{},{entity:Le})});return[].concat((0,g.Z)(y||[]),(0,g.Z)(qt)).filter(function(Tt){return!Tt||Tt!=null&&Tt.valueType&&["index","indexBorder"].includes(Tt==null?void 0:Tt.valueType)?!1:!(Tt!=null&&Tt.hideInDescriptions)}).sort(function(Tt,Dt){return Dt.order||Tt.order?(Dt.order||0)-(Tt.order||0):(Dt.index||0)-(Tt.index||0)})},wt=Pt(Lt(),vt.dataSource||{},(ft==null?void 0:ft.current)||vt,Xe?Mt:void 0),Bt=wt.options,kt=wt.children,jt=Xe?$.ZP:$t,Ot=null;(xt.title||xt.tooltip||xt.tip)&&(Ot=(0,le.jsx)(E.G,{label:xt.title,tooltip:xt.tooltip||xt.tip}));var Rt=Vt.getPrefixCls("pro-descriptions");return(0,le.jsx)(k.S,{children:(0,le.jsx)(jt,(0,F.Z)((0,F.Z)({form:(He=Re.editable)===null||He===void 0?void 0:He.form,component:!1,submitter:!1},Ie),{},{onFinish:void 0,children:(0,le.jsx)(ei,(0,F.Z)((0,F.Z)({className:Rt},xt),{},{contentStyle:{minWidth:0},extra:xt.extra?(0,le.jsxs)(je.Z,{children:[Bt,xt.extra]}):Bt,title:Ot,children:kt}))}),"form")})};ti.Item=oi;var Xt=null},64317:function(We,m,T){"use strict";var g=T(1413),H=T(91),G=T(22270),se=T(67294),F=T(66758),ue=T(46362),pe=T(85893),Q=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],$=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],ce=function(ve,Me){var Be=ve.fieldProps,q=ve.children,D=ve.params,R=ve.proFieldProps,re=ve.mode,Ae=ve.valueEnum,j=ve.request,c=ve.showSearch,f=ve.options,p=(0,H.Z)(ve,Q),x=(0,se.useContext)(F.Z);return(0,pe.jsx)(ue.Z,(0,g.Z)((0,g.Z)({valueEnum:(0,G.h)(Ae),request:j,params:D,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({options:f,mode:re,showSearch:c,getPopupContainer:x.getPopupContainer},Be),ref:Me,proFieldProps:R},p),{},{children:q}))},ae=se.forwardRef(function(xe,ve){var Me=xe.fieldProps,Be=xe.children,q=xe.params,D=xe.proFieldProps,R=xe.mode,re=xe.valueEnum,Ae=xe.request,j=xe.options,c=(0,H.Z)(xe,$),f=(0,g.Z)({options:j,mode:R||"multiple",labelInValue:!0,showSearch:!0,showArrow:!1,autoClearSearchValue:!0,optionLabelProp:"label"},Me),p=(0,se.useContext)(F.Z);return(0,pe.jsx)(ue.Z,(0,g.Z)((0,g.Z)({valueEnum:(0,G.h)(re),request:Ae,params:q,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,g.Z)({getPopupContainer:p.getPopupContainer},f),ref:ve,proFieldProps:D},c),{},{children:Be}))}),J=se.forwardRef(ce),Y=ae,Fe=J;Fe.SearchSelect=Y,Fe.displayName="ProFormComponent",m.Z=Fe},8019:function(We,m,T){"use strict";var g=T(64836);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var H=g(T(27424)),G=g(T(67294)),se=g(T(93320)),F=g(T(36291)),ue=G.default.createElement,pe=function(Y){var Fe=G.default.useState(null),xe=(0,H.default)(Fe,2),ve=xe[0],Me=xe[1],Be=function(){return Me(null)},q=function(R){var re=R.position,Ae=R.message,j=R.snippet;Me({position:re,message:Ae,snippet:j}),Y(!0)};return{cleanErrors:Be,errorRanges:ve,markError:q,hasErrors:!!ve,error:ve}},Q=function(Y){var Fe=Y.text,xe=Y.currentText;return xe?{text:xe}:{text:Fe}},$=function(Y){var Fe=Y.merge,xe=Y.json,ve=Y.text,Me=Y.currentText;if(!ve&&!Me&&!xe)return"";if(!ve&&!xe)return Me;var Be=Fe({json:xe,text:ve,currentText:Me});if(Be.text!==void 0&&typeof Be.text=="string")return Be.text;if(Be.json)return se.default.dump(Be.json);throw new Error('merge function should return object with "text" or "json" fields')},ce=function(Y,Fe){var xe=Y.json,ve=Y.text,Me=Y.theme,Be=Y.onError,q=Be===void 0?function(){}:Be,D=Y.onChange,R=D===void 0?function(){}:D,re=Y.onSelect,Ae=re===void 0?function(){}:re,j=Y.onSetCursor,c=j===void 0?function(){}:j,f=Y.merge,p=f===void 0?Q:f,x=G.default.useRef(null),u=pe(q),S=xe?se.default.dump(xe):ve,B=G.default.useRef(S),_=function(nt){if(!(!nt.json&&!nt.text)){var ut=nt.json?se.default.dump(nt.json):nt.text;x.current.actionNewDoc({text:ut})}},O=G.default.useMemo(function(){return $({merge:p,json:xe,text:ve,currentText:B.current})},[xe,ve,p]);G.default.useEffect(function(){O!==B.current&&_({text:O})},[O]);var U=function(nt){try{B.current=nt;var ut=se.default.load(nt);u.hasErrors&&(u.cleanErrors(),q(null)),R({json:ut,text:nt})}catch(v){var me;if(q(v),!((me=v.mark)!==null&&me!==void 0&&me.snippet)){console.error(v);return}console.error(v.mark.snippet),u.markError({position:v.mark.position,message:v.message,snippet:v.mark.snippet})}},Te={replaceValue:_};Fe&&(Fe.current=Te);var je=function(nt){Ae(nt)},le=function(nt){c(nt)},Qe=function(nt){try{return se.default.load(nt),{}}catch(me){var ut;return(ut=me.mark)!==null&&ut!==void 0&&ut.snippet?{position:me.mark.position}:{}}};return ue(F.default,{value:O,onChange:U,onSelect:je,onSetCursor:le,error:u.error,getErrorPos:Qe,options:{handleTabs:!0,theme:Me},ref:x})},ae=G.default.forwardRef(ce);m.default=ae},36291:function(We,m,T){"use strict";var g=T(64836);Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var H=g(T(67294)),G=T(3767),se=T(66206),F=T(27278),ue=T(23642),pe=T(18561),Q=T(17040),$=T(67047),ce=T(8866),ae=T(24e3),J=T(2640),Y=H.default.createElement;function Fe(j,c){var f=typeof Symbol!="undefined"&&j[Symbol.iterator]||j["@@iterator"];if(!f){if(Array.isArray(j)||(f=xe(j))||c&&j&&typeof j.length=="number"){f&&(j=f);var p=0,x=function(){};return{s:x,n:function(){return p>=j.length?{done:!0}:{done:!1,value:j[p++]}},e:function(O){throw O},f:x}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,S=!1,B;return{s:function(){f=f.call(j)},n:function(){var O=f.next();return u=O.done,O},e:function(O){S=!0,B=O},f:function(){try{!u&&f.return!=null&&f.return()}finally{if(S)throw B}}}}function xe(j,c){if(j){if(typeof j=="string")return ve(j,c);var f=Object.prototype.toString.call(j).slice(8,-1);if(f==="Object"&&j.constructor&&(f=j.constructor.name),f==="Map"||f==="Set")return Array.from(j);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return ve(j,c)}}function ve(j,c){(c==null||c>j.length)&&(c=j.length);for(var f=0,p=new Array(c);f<c;f++)p[f]=j[f];return p}var Me=Q.StateEffect.define(),Be=Q.StateEffect.define(),q=F.EditorView.theme({".cm-activeLine":{backgroundColor:"#5973bb2e"}}),D=Q.StateField.define({create:function(){return ue.Decoration.none},update:function(c,f){var p=c.map(f.changes),x=Fe(f.effects),u;try{for(x.s();!(u=x.n()).done;){var S=u.value;S.is(Me)&&(p=p.update({add:S.value,sort:!0})),S.is(Be)&&(p=p.update({filter:S.value}))}}catch(B){x.e(B)}finally{x.f()}return p},provide:function(c){return F.EditorView.decorations.from(c)}}),R=ue.Decoration.mark({attributes:{style:"background-color: rgba(255, 0, 0, 0.5)"}}),re=H.default.forwardRef(function(j,c){var f=j.value,p=f===void 0?"":f,x=j.onChange,u=x===void 0?function(){return null}:x,S=j.onSelect,B=S===void 0?function(){return null}:S,_=j.onSetCursor,O=_===void 0?function(){return null}:_,U=j.error,Te=j.options;Te=Te===void 0?{}:Te;var je=Te.theme,le=je===void 0?void 0:je,Qe=Te.handleTabs,ot=Qe===void 0?!1:Qe,nt=j.getErrorPos,ut=H.default.useRef(null),me=H.default.useRef(null),v=H.default.useRef(p),M=H.default.useRef(""),P=H.default.useRef(""),I=function(K){var A=K.text,z=K.from,ye=K.to,De=ye||z+A.length;me.current.dispatch({changes:{from:z,to:De,insert:A}})},ie=function(K){var A=K.text,z=me.current.state.doc.toString(),ye=me.current.state.selection.ranges[0].from,De=z.length;me.current.dispatch({changes:{from:0,to:De,insert:A},selection:Q.EditorSelection.cursor(ye)})};c.current={actionReplace:I,actionNewDoc:ie};var fe=function(){if(me.current.dispatch({effects:Be.of(function(){return!1})}),!!(U!=null&&U.position)){var K=me.current.state.doc.length,A=(U==null?void 0:U.position)+1<=K-1?U.position:K-1,z=A+1;me.current.dispatch({effects:Me.of([R.range(A,z)])})}},Ve=function(K){var A,z,ye=K.state.doc.toString(),De=((A=K.state)===null||A===void 0||(z=A.selection)===null||z===void 0?void 0:z.ranges[0])||{},s=De.from,C=De.to,l=ye.slice(s,C),d=s===C?(0,J.getCurrentWord)(ye,s):{};l!==M.current&&(M.current=l,B({selected:l,from:s,to:C})),d.word!==P.current&&(P.current=d.word,O(d)),ye!==v.current&&(v.current=ye,fe(),u(ye))},he=(0,$.hoverTooltip)(function(Ee,K,A){var z,ye=(z=Ee.state.field(D))===null||z===void 0?void 0:z.size;return ye?{pos:K,above:!0,create:function(s){var C=document.createElement("div");return C.style="width: 100px; height: 100px",C.textContent="error",{dom:C}}}:null}),de=function(){var K=[q,F.basicSetup,G.StreamLanguage.define(se.yaml),F.EditorView.updateListener.of(Ve),ot&&ue.keymap.of([pe.indentWithTab]),D,he,(0,ae.errorStripe)(nt),(0,ce.zebraStripes)(),le].filter(Boolean),A=F.EditorState.create({doc:p,extensions:K});me.current=new F.EditorView({state:A,parent:ut==null?void 0:ut.current}),window.view=me.current,window.actionReplace=I};return H.default.useEffect(function(){if(!ut.current)throw new Error("Can't find a mounting point for YamlEditor");return de(),function(){me.current.destroy()}},[le]),H.default.useEffect(fe),Y("div",{ref:ut})}),Ae=re;m.default=Ae},24e3:function(We,m,T){"use strict";var g=T(64836);Object.defineProperty(m,"__esModule",{value:!0}),m.errorStripe=ae;var H=g(T(56690)),G=g(T(89728)),se=g(T(38416)),F=T(23642),ue=T(88648),pe=F.EditorView.baseTheme({".cm-errorStripe":{backgroundColor:"#ff390040 !important"}}),Q=F.Decoration.line({attributes:{class:"cm-errorStripe"}});function $(J,Y){var Fe=J.state.doc.lineAt(Y),xe=new ue.RangeSetBuilder;return Y&&xe.add(Fe.from,Fe.from,Q),xe.finish()}var ce=function(Y){return F.ViewPlugin.fromClass(function(){function Fe(xe){(0,H.default)(this,Fe),(0,se.default)(this,"decorations",F.DecorationSet),this.decorations=$(xe,0)}return(0,G.default)(Fe,[{key:"update",value:function(ve){if(ve.docChanged||ve.viewportChanged){var Me=Y(ve.state.doc.toString()),Be=Me.position;if(!Be){this.decorations=$(ve.view,0);return}this.decorations=$(ve.view,Be)}}}]),Fe}(),{decorations:function(xe){return xe.decorations}})};function ae(){var J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){return{}};return[pe,ce(J)]}},8866:function(We,m,T){"use strict";var g=T(64836);Object.defineProperty(m,"__esModule",{value:!0}),m.zebraStripes=ve;var H=g(T(56690)),G=g(T(89728)),se=g(T(38416)),F=T(23642),ue=T(17040),pe=T(88648);function Q(Me,Be){var q=typeof Symbol!="undefined"&&Me[Symbol.iterator]||Me["@@iterator"];if(!q){if(Array.isArray(Me)||(q=$(Me))||Be&&Me&&typeof Me.length=="number"){q&&(Me=q);var D=0,R=function(){};return{s:R,n:function(){return D>=Me.length?{done:!0}:{done:!1,value:Me[D++]}},e:function(f){throw f},f:R}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var re=!0,Ae=!1,j;return{s:function(){q=q.call(Me)},n:function(){var f=q.next();return re=f.done,f},e:function(f){Ae=!0,j=f},f:function(){try{!re&&q.return!=null&&q.return()}finally{if(Ae)throw j}}}}function $(Me,Be){if(Me){if(typeof Me=="string")return ce(Me,Be);var q=Object.prototype.toString.call(Me).slice(8,-1);if(q==="Object"&&Me.constructor&&(q=Me.constructor.name),q==="Map"||q==="Set")return Array.from(Me);if(q==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(q))return ce(Me,Be)}}function ce(Me,Be){(Be==null||Be>Me.length)&&(Be=Me.length);for(var q=0,D=new Array(Be);q<Be;q++)D[q]=Me[q];return D}var ae=F.EditorView.baseTheme({"&light .cm-zebraStripe":{borderTop:"1px solid #8080804f",borderBottom:"1px solid #8080804f"},"&dark .cm-zebraStripe":{borderTop:"1px solid #8080804f",borderBottom:"1px solid #8080804f"}}),J=ue.Facet.define({combine:function(Be){return Be[0]}}),Y=F.Decoration.line({attributes:{class:"cm-zebraStripe"}});function Fe(Me){var Be=Me.state.facet(J),q=new pe.RangeSetBuilder,D=Q(Me.visibleRanges),R;try{for(D.s();!(R=D.n()).done;)for(var re=R.value,Ae=re.from,j=re.to,c=Ae;c<=j;){var f=Me.state.doc.lineAt(c);f.number%Be===0&&q.add(f.from,f.from,Y),c=f.to+1}}catch(p){D.e(p)}finally{D.f()}return q.finish()}var xe=F.ViewPlugin.fromClass(function(){function Me(Be){(0,H.default)(this,Me),(0,se.default)(this,"decorations",F.DecorationSet),this.decorations=Fe(Be)}return(0,G.default)(Me,[{key:"update",value:function(q){(q.docChanged||q.viewportChanged)&&(this.decorations=Fe(q.view))}}]),Me}(),{decorations:function(Be){return Be.decorations}});function ve(){var Me=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return window.stepSize=J,[ae,J.of((Me==null?void 0:Me.step)||2),xe]}},96893:function(We,m,T){"use strict";var g,H=T(64836);g={value:!0},Object.defineProperty(m,"Z",{enumerable:!0,get:function(){return G.default}});var G=H(T(8019))},2640:function(We,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0}),m.getCurrentWord=void 0;var T=function(H,G){var se=H.slice(0,G).split(/\s|\n/),F=H.slice(G).split(/\s|\n/),ue=se[se.length-1],pe=F[0],Q=G-ue.length,$=G+pe.length;return{word:"".concat(ue).concat(pe),from:Q,to:$}};m.getCurrentWord=T},93320:function(We,m,T){"use strict";var g=T(7990),H=T(13150);function G(se,F){return function(){throw new Error("Function yaml."+se+" is removed in js-yaml 4. Use yaml."+F+" instead, which is now safe by default.")}}We.exports.Type=T(71364),We.exports.Schema=T(67657),We.exports.FAILSAFE_SCHEMA=T(44795),We.exports.JSON_SCHEMA=T(35966),We.exports.CORE_SCHEMA=T(9471),We.exports.DEFAULT_SCHEMA=T(86601),We.exports.load=g.load,We.exports.loadAll=g.loadAll,We.exports.dump=H.dump,We.exports.YAMLException=T(88425),We.exports.types={binary:T(43531),float:T(45215),map:T(40945),null:T(30151),pairs:T(6879),set:T(44982),timestamp:T(12156),bool:T(48771),int:T(61518),merge:T(67452),omap:T(51605),seq:T(76451),str:T(48)},We.exports.safeLoad=G("safeLoad","load"),We.exports.safeLoadAll=G("safeLoadAll","loadAll"),We.exports.safeDump=G("safeDump","dump")},8347:function(We){"use strict";function m(F){return typeof F=="undefined"||F===null}function T(F){return typeof F=="object"&&F!==null}function g(F){return Array.isArray(F)?F:m(F)?[]:[F]}function H(F,ue){var pe,Q,$,ce;if(ue)for(ce=Object.keys(ue),pe=0,Q=ce.length;pe<Q;pe+=1)$=ce[pe],F[$]=ue[$];return F}function G(F,ue){var pe="",Q;for(Q=0;Q<ue;Q+=1)pe+=F;return pe}function se(F){return F===0&&Number.NEGATIVE_INFINITY===1/F}We.exports.isNothing=m,We.exports.isObject=T,We.exports.toArray=g,We.exports.repeat=G,We.exports.isNegativeZero=se,We.exports.extend=H},13150:function(We,m,T){"use strict";var g=T(8347),H=T(88425),G=T(86601),se=Object.prototype.toString,F=Object.prototype.hasOwnProperty,ue=65279,pe=9,Q=10,$=13,ce=32,ae=33,J=34,Y=35,Fe=37,xe=38,ve=39,Me=42,Be=44,q=45,D=58,R=61,re=62,Ae=63,j=64,c=91,f=93,p=96,x=123,u=124,S=125,B={};B[0]="\\0",B[7]="\\a",B[8]="\\b",B[9]="\\t",B[10]="\\n",B[11]="\\v",B[12]="\\f",B[13]="\\r",B[27]="\\e",B[34]='\\"',B[92]="\\\\",B[133]="\\N",B[160]="\\_",B[8232]="\\L",B[8233]="\\P";var _=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],O=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function U(a,k){var N,X,ne,we,$e,Ge,et;if(k===null)return{};for(N={},X=Object.keys(k),ne=0,we=X.length;ne<we;ne+=1)$e=X[ne],Ge=String(k[$e]),$e.slice(0,2)==="!!"&&($e="tag:yaml.org,2002:"+$e.slice(2)),et=a.compiledTypeMap.fallback[$e],et&&F.call(et.styleAliases,Ge)&&(Ge=et.styleAliases[Ge]),N[$e]=Ge;return N}function Te(a){var k,N,X;if(k=a.toString(16).toUpperCase(),a<=255)N="x",X=2;else if(a<=65535)N="u",X=4;else if(a<=4294967295)N="U",X=8;else throw new H("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+N+g.repeat("0",X-k.length)+k}var je=1,le=2;function Qe(a){this.schema=a.schema||G,this.indent=Math.max(1,a.indent||2),this.noArrayIndent=a.noArrayIndent||!1,this.skipInvalid=a.skipInvalid||!1,this.flowLevel=g.isNothing(a.flowLevel)?-1:a.flowLevel,this.styleMap=U(this.schema,a.styles||null),this.sortKeys=a.sortKeys||!1,this.lineWidth=a.lineWidth||80,this.noRefs=a.noRefs||!1,this.noCompatMode=a.noCompatMode||!1,this.condenseFlow=a.condenseFlow||!1,this.quotingType=a.quotingType==='"'?le:je,this.forceQuotes=a.forceQuotes||!1,this.replacer=typeof a.replacer=="function"?a.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function ot(a,k){for(var N=g.repeat(" ",k),X=0,ne=-1,we="",$e,Ge=a.length;X<Ge;)ne=a.indexOf(`
`,X),ne===-1?($e=a.slice(X),X=Ge):($e=a.slice(X,ne+1),X=ne+1),$e.length&&$e!==`
`&&(we+=N),we+=$e;return we}function nt(a,k){return`
`+g.repeat(" ",a.indent*k)}function ut(a,k){var N,X,ne;for(N=0,X=a.implicitTypes.length;N<X;N+=1)if(ne=a.implicitTypes[N],ne.resolve(k))return!0;return!1}function me(a){return a===ce||a===pe}function v(a){return 32<=a&&a<=126||161<=a&&a<=55295&&a!==8232&&a!==8233||57344<=a&&a<=65533&&a!==ue||65536<=a&&a<=1114111}function M(a){return v(a)&&a!==ue&&a!==$&&a!==Q}function P(a,k,N){var X=M(a),ne=X&&!me(a);return(N?X:X&&a!==Be&&a!==c&&a!==f&&a!==x&&a!==S)&&a!==Y&&!(k===D&&!ne)||M(k)&&!me(k)&&a===Y||k===D&&ne}function I(a){return v(a)&&a!==ue&&!me(a)&&a!==q&&a!==Ae&&a!==D&&a!==Be&&a!==c&&a!==f&&a!==x&&a!==S&&a!==Y&&a!==xe&&a!==Me&&a!==ae&&a!==u&&a!==R&&a!==re&&a!==ve&&a!==J&&a!==Fe&&a!==j&&a!==p}function ie(a){return!me(a)&&a!==D}function fe(a,k){var N=a.charCodeAt(k),X;return N>=55296&&N<=56319&&k+1<a.length&&(X=a.charCodeAt(k+1),X>=56320&&X<=57343)?(N-55296)*1024+X-56320+65536:N}function Ve(a){var k=/^\n* /;return k.test(a)}var he=1,de=2,Ee=3,K=4,A=5;function z(a,k,N,X,ne,we,$e,Ge){var et,ht=0,gt=null,St=!1,bt=!1,Gt=X!==-1,Zt=-1,Ht=I(fe(a,0))&&ie(fe(a,a.length-1));if(k||$e)for(et=0;et<a.length;ht>=65536?et+=2:et++){if(ht=fe(a,et),!v(ht))return A;Ht=Ht&&P(ht,gt,Ge),gt=ht}else{for(et=0;et<a.length;ht>=65536?et+=2:et++){if(ht=fe(a,et),ht===Q)St=!0,Gt&&(bt=bt||et-Zt-1>X&&a[Zt+1]!==" ",Zt=et);else if(!v(ht))return A;Ht=Ht&&P(ht,gt,Ge),gt=ht}bt=bt||Gt&&et-Zt-1>X&&a[Zt+1]!==" "}return!St&&!bt?Ht&&!$e&&!ne(a)?he:we===le?A:de:N>9&&Ve(a)?A:$e?we===le?A:de:bt?K:Ee}function ye(a,k,N,X,ne){a.dump=function(){if(k.length===0)return a.quotingType===le?'""':"''";if(!a.noCompatMode&&(_.indexOf(k)!==-1||O.test(k)))return a.quotingType===le?'"'+k+'"':"'"+k+"'";var we=a.indent*Math.max(1,N),$e=a.lineWidth===-1?-1:Math.max(Math.min(a.lineWidth,40),a.lineWidth-we),Ge=X||a.flowLevel>-1&&N>=a.flowLevel;function et(ht){return ut(a,ht)}switch(z(k,Ge,a.indent,$e,et,a.quotingType,a.forceQuotes&&!X,ne)){case he:return k;case de:return"'"+k.replace(/'/g,"''")+"'";case Ee:return"|"+De(k,a.indent)+s(ot(k,we));case K:return">"+De(k,a.indent)+s(ot(C(k,$e),we));case A:return'"'+d(k,$e)+'"';default:throw new H("impossible error: invalid scalar style")}}()}function De(a,k){var N=Ve(a)?String(k):"",X=a[a.length-1]===`
`,ne=X&&(a[a.length-2]===`
`||a===`
`),we=ne?"+":X?"":"-";return N+we+`
`}function s(a){return a[a.length-1]===`
`?a.slice(0,-1):a}function C(a,k){for(var N=/(\n+)([^\n]*)/g,X=function(){var ht=a.indexOf(`
`);return ht=ht!==-1?ht:a.length,N.lastIndex=ht,l(a.slice(0,ht),k)}(),ne=a[0]===`
`||a[0]===" ",we,$e;$e=N.exec(a);){var Ge=$e[1],et=$e[2];we=et[0]===" ",X+=Ge+(!ne&&!we&&et!==""?`
`:"")+l(et,k),ne=we}return X}function l(a,k){if(a===""||a[0]===" ")return a;for(var N=/ [^ ]/g,X,ne=0,we,$e=0,Ge=0,et="";X=N.exec(a);)Ge=X.index,Ge-ne>k&&(we=$e>ne?$e:Ge,et+=`
`+a.slice(ne,we),ne=we+1),$e=Ge;return et+=`
`,a.length-ne>k&&$e>ne?et+=a.slice(ne,$e)+`
`+a.slice($e+1):et+=a.slice(ne),et.slice(1)}function d(a){for(var k="",N=0,X,ne=0;ne<a.length;N>=65536?ne+=2:ne++)N=fe(a,ne),X=B[N],!X&&v(N)?(k+=a[ne],N>=65536&&(k+=a[ne+1])):k+=X||Te(N);return k}function b(a,k,N){var X="",ne=a.tag,we,$e,Ge;for(we=0,$e=N.length;we<$e;we+=1)Ge=N[we],a.replacer&&(Ge=a.replacer.call(N,String(we),Ge)),(Ne(a,k,Ge,!1,!1)||typeof Ge=="undefined"&&Ne(a,k,null,!1,!1))&&(X!==""&&(X+=","+(a.condenseFlow?"":" ")),X+=a.dump);a.tag=ne,a.dump="["+X+"]"}function E(a,k,N,X){var ne="",we=a.tag,$e,Ge,et;for($e=0,Ge=N.length;$e<Ge;$e+=1)et=N[$e],a.replacer&&(et=a.replacer.call(N,String($e),et)),(Ne(a,k+1,et,!0,!0,!1,!0)||typeof et=="undefined"&&Ne(a,k+1,null,!0,!0,!1,!0))&&((!X||ne!=="")&&(ne+=nt(a,k)),a.dump&&Q===a.dump.charCodeAt(0)?ne+="-":ne+="- ",ne+=a.dump);a.tag=we,a.dump=ne||"[]"}function L(a,k,N){var X="",ne=a.tag,we=Object.keys(N),$e,Ge,et,ht,gt;for($e=0,Ge=we.length;$e<Ge;$e+=1)gt="",X!==""&&(gt+=", "),a.condenseFlow&&(gt+='"'),et=we[$e],ht=N[et],a.replacer&&(ht=a.replacer.call(N,et,ht)),Ne(a,k,et,!1,!1)&&(a.dump.length>1024&&(gt+="? "),gt+=a.dump+(a.condenseFlow?'"':"")+":"+(a.condenseFlow?"":" "),Ne(a,k,ht,!1,!1)&&(gt+=a.dump,X+=gt));a.tag=ne,a.dump="{"+X+"}"}function V(a,k,N,X){var ne="",we=a.tag,$e=Object.keys(N),Ge,et,ht,gt,St,bt;if(a.sortKeys===!0)$e.sort();else if(typeof a.sortKeys=="function")$e.sort(a.sortKeys);else if(a.sortKeys)throw new H("sortKeys must be a boolean or a function");for(Ge=0,et=$e.length;Ge<et;Ge+=1)bt="",(!X||ne!=="")&&(bt+=nt(a,k)),ht=$e[Ge],gt=N[ht],a.replacer&&(gt=a.replacer.call(N,ht,gt)),Ne(a,k+1,ht,!0,!0,!0)&&(St=a.tag!==null&&a.tag!=="?"||a.dump&&a.dump.length>1024,St&&(a.dump&&Q===a.dump.charCodeAt(0)?bt+="?":bt+="? "),bt+=a.dump,St&&(bt+=nt(a,k)),Ne(a,k+1,gt,!0,St)&&(a.dump&&Q===a.dump.charCodeAt(0)?bt+=":":bt+=": ",bt+=a.dump,ne+=bt));a.tag=we,a.dump=ne||"{}"}function ge(a,k,N){var X,ne,we,$e,Ge,et;for(ne=N?a.explicitTypes:a.implicitTypes,we=0,$e=ne.length;we<$e;we+=1)if(Ge=ne[we],(Ge.instanceOf||Ge.predicate)&&(!Ge.instanceOf||typeof k=="object"&&k instanceof Ge.instanceOf)&&(!Ge.predicate||Ge.predicate(k))){if(N?Ge.multi&&Ge.representName?a.tag=Ge.representName(k):a.tag=Ge.tag:a.tag="?",Ge.represent){if(et=a.styleMap[Ge.tag]||Ge.defaultStyle,se.call(Ge.represent)==="[object Function]")X=Ge.represent(k,et);else if(F.call(Ge.represent,et))X=Ge.represent[et](k,et);else throw new H("!<"+Ge.tag+'> tag resolver accepts not "'+et+'" style');a.dump=X}return!0}return!1}function Ne(a,k,N,X,ne,we,$e){a.tag=null,a.dump=N,ge(a,N,!1)||ge(a,N,!0);var Ge=se.call(a.dump),et=X,ht;X&&(X=a.flowLevel<0||a.flowLevel>k);var gt=Ge==="[object Object]"||Ge==="[object Array]",St,bt;if(gt&&(St=a.duplicates.indexOf(N),bt=St!==-1),(a.tag!==null&&a.tag!=="?"||bt||a.indent!==2&&k>0)&&(ne=!1),bt&&a.usedDuplicates[St])a.dump="*ref_"+St;else{if(gt&&bt&&!a.usedDuplicates[St]&&(a.usedDuplicates[St]=!0),Ge==="[object Object]")X&&Object.keys(a.dump).length!==0?(V(a,k,a.dump,ne),bt&&(a.dump="&ref_"+St+a.dump)):(L(a,k,a.dump),bt&&(a.dump="&ref_"+St+" "+a.dump));else if(Ge==="[object Array]")X&&a.dump.length!==0?(a.noArrayIndent&&!$e&&k>0?E(a,k-1,a.dump,ne):E(a,k,a.dump,ne),bt&&(a.dump="&ref_"+St+a.dump)):(b(a,k,a.dump),bt&&(a.dump="&ref_"+St+" "+a.dump));else if(Ge==="[object String]")a.tag!=="?"&&ye(a,a.dump,k,we,et);else{if(Ge==="[object Undefined]")return!1;if(a.skipInvalid)return!1;throw new H("unacceptable kind of an object to dump "+Ge)}a.tag!==null&&a.tag!=="?"&&(ht=encodeURI(a.tag[0]==="!"?a.tag.slice(1):a.tag).replace(/!/g,"%21"),a.tag[0]==="!"?ht="!"+ht:ht.slice(0,18)==="tag:yaml.org,2002:"?ht="!!"+ht.slice(18):ht="!<"+ht+">",a.dump=ht+" "+a.dump)}return!0}function Ue(a,k){var N=[],X=[],ne,we;for(Ke(a,N,X),ne=0,we=X.length;ne<we;ne+=1)k.duplicates.push(N[X[ne]]);k.usedDuplicates=new Array(we)}function Ke(a,k,N){var X,ne,we;if(a!==null&&typeof a=="object")if(ne=k.indexOf(a),ne!==-1)N.indexOf(ne)===-1&&N.push(ne);else if(k.push(a),Array.isArray(a))for(ne=0,we=a.length;ne<we;ne+=1)Ke(a[ne],k,N);else for(X=Object.keys(a),ne=0,we=X.length;ne<we;ne+=1)Ke(a[X[ne]],k,N)}function _e(a,k){k=k||{};var N=new Qe(k);N.noRefs||Ue(a,N);var X=a;return N.replacer&&(X=N.replacer.call({"":X},"",X)),Ne(N,0,X,!0,!0)?N.dump+`
`:""}We.exports.dump=_e},88425:function(We){"use strict";function m(g,H){var G="",se=g.reason||"(unknown reason)";return g.mark?(g.mark.name&&(G+='in "'+g.mark.name+'" '),G+="("+(g.mark.line+1)+":"+(g.mark.column+1)+")",!H&&g.mark.snippet&&(G+=`

`+g.mark.snippet),se+" "+G):se}function T(g,H){Error.call(this),this.name="YAMLException",this.reason=g,this.mark=H,this.message=m(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}T.prototype=Object.create(Error.prototype),T.prototype.constructor=T,T.prototype.toString=function(H){return this.name+": "+m(this,H)},We.exports=T},7990:function(We,m,T){"use strict";var g=T(8347),H=T(88425),G=T(10192),se=T(86601),F=Object.prototype.hasOwnProperty,ue=1,pe=2,Q=3,$=4,ce=1,ae=2,J=3,Y=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Fe=/[\x85\u2028\u2029]/,xe=/[,\[\]\{\}]/,ve=/^(?:!|!!|![a-z\-]+!)$/i,Me=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Be(s){return Object.prototype.toString.call(s)}function q(s){return s===10||s===13}function D(s){return s===9||s===32}function R(s){return s===9||s===32||s===10||s===13}function re(s){return s===44||s===91||s===93||s===123||s===125}function Ae(s){var C;return 48<=s&&s<=57?s-48:(C=s|32,97<=C&&C<=102?C-97+10:-1)}function j(s){return s===120?2:s===117?4:s===85?8:0}function c(s){return 48<=s&&s<=57?s-48:-1}function f(s){return s===48?"\0":s===97?"\x07":s===98?"\b":s===116||s===9?"	":s===110?`
`:s===118?"\v":s===102?"\f":s===114?"\r":s===101?"\x1B":s===32?" ":s===34?'"':s===47?"/":s===92?"\\":s===78?"\x85":s===95?"\xA0":s===76?"\u2028":s===80?"\u2029":""}function p(s){return s<=65535?String.fromCharCode(s):String.fromCharCode((s-65536>>10)+55296,(s-65536&1023)+56320)}for(var x=new Array(256),u=new Array(256),S=0;S<256;S++)x[S]=f(S)?1:0,u[S]=f(S);function B(s,C){this.input=s,this.filename=C.filename||null,this.schema=C.schema||se,this.onWarning=C.onWarning||null,this.legacy=C.legacy||!1,this.json=C.json||!1,this.listener=C.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=s.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function _(s,C){var l={name:s.filename,buffer:s.input.slice(0,-1),position:s.position,line:s.line,column:s.position-s.lineStart};return l.snippet=G(l),new H(C,l)}function O(s,C){throw _(s,C)}function U(s,C){s.onWarning&&s.onWarning.call(null,_(s,C))}var Te={YAML:function(C,l,d){var b,E,L;C.version!==null&&O(C,"duplication of %YAML directive"),d.length!==1&&O(C,"YAML directive accepts exactly one argument"),b=/^([0-9]+)\.([0-9]+)$/.exec(d[0]),b===null&&O(C,"ill-formed argument of the YAML directive"),E=parseInt(b[1],10),L=parseInt(b[2],10),E!==1&&O(C,"unacceptable YAML version of the document"),C.version=d[0],C.checkLineBreaks=L<2,L!==1&&L!==2&&U(C,"unsupported YAML version of the document")},TAG:function(C,l,d){var b,E;d.length!==2&&O(C,"TAG directive accepts exactly two arguments"),b=d[0],E=d[1],ve.test(b)||O(C,"ill-formed tag handle (first argument) of the TAG directive"),F.call(C.tagMap,b)&&O(C,'there is a previously declared suffix for "'+b+'" tag handle'),Me.test(E)||O(C,"ill-formed tag prefix (second argument) of the TAG directive");try{E=decodeURIComponent(E)}catch(L){O(C,"tag prefix is malformed: "+E)}C.tagMap[b]=E}};function je(s,C,l,d){var b,E,L,V;if(C<l){if(V=s.input.slice(C,l),d)for(b=0,E=V.length;b<E;b+=1)L=V.charCodeAt(b),L===9||32<=L&&L<=1114111||O(s,"expected valid JSON character");else Y.test(V)&&O(s,"the stream contains non-printable characters");s.result+=V}}function le(s,C,l,d){var b,E,L,V;for(g.isObject(l)||O(s,"cannot merge mappings; the provided source object is unacceptable"),b=Object.keys(l),L=0,V=b.length;L<V;L+=1)E=b[L],F.call(C,E)||(C[E]=l[E],d[E]=!0)}function Qe(s,C,l,d,b,E,L,V,ge){var Ne,Ue;if(Array.isArray(b))for(b=Array.prototype.slice.call(b),Ne=0,Ue=b.length;Ne<Ue;Ne+=1)Array.isArray(b[Ne])&&O(s,"nested arrays are not supported inside keys"),typeof b=="object"&&Be(b[Ne])==="[object Object]"&&(b[Ne]="[object Object]");if(typeof b=="object"&&Be(b)==="[object Object]"&&(b="[object Object]"),b=String(b),C===null&&(C={}),d==="tag:yaml.org,2002:merge")if(Array.isArray(E))for(Ne=0,Ue=E.length;Ne<Ue;Ne+=1)le(s,C,E[Ne],l);else le(s,C,E,l);else!s.json&&!F.call(l,b)&&F.call(C,b)&&(s.line=L||s.line,s.lineStart=V||s.lineStart,s.position=ge||s.position,O(s,"duplicated mapping key")),b==="__proto__"?Object.defineProperty(C,b,{configurable:!0,enumerable:!0,writable:!0,value:E}):C[b]=E,delete l[b];return C}function ot(s){var C;C=s.input.charCodeAt(s.position),C===10?s.position++:C===13?(s.position++,s.input.charCodeAt(s.position)===10&&s.position++):O(s,"a line break is expected"),s.line+=1,s.lineStart=s.position,s.firstTabInLine=-1}function nt(s,C,l){for(var d=0,b=s.input.charCodeAt(s.position);b!==0;){for(;D(b);)b===9&&s.firstTabInLine===-1&&(s.firstTabInLine=s.position),b=s.input.charCodeAt(++s.position);if(C&&b===35)do b=s.input.charCodeAt(++s.position);while(b!==10&&b!==13&&b!==0);if(q(b))for(ot(s),b=s.input.charCodeAt(s.position),d++,s.lineIndent=0;b===32;)s.lineIndent++,b=s.input.charCodeAt(++s.position);else break}return l!==-1&&d!==0&&s.lineIndent<l&&U(s,"deficient indentation"),d}function ut(s){var C=s.position,l;return l=s.input.charCodeAt(C),!!((l===45||l===46)&&l===s.input.charCodeAt(C+1)&&l===s.input.charCodeAt(C+2)&&(C+=3,l=s.input.charCodeAt(C),l===0||R(l)))}function me(s,C){C===1?s.result+=" ":C>1&&(s.result+=g.repeat(`
`,C-1))}function v(s,C,l){var d,b,E,L,V,ge,Ne,Ue,Ke=s.kind,_e=s.result,a;if(a=s.input.charCodeAt(s.position),R(a)||re(a)||a===35||a===38||a===42||a===33||a===124||a===62||a===39||a===34||a===37||a===64||a===96||(a===63||a===45)&&(b=s.input.charCodeAt(s.position+1),R(b)||l&&re(b)))return!1;for(s.kind="scalar",s.result="",E=L=s.position,V=!1;a!==0;){if(a===58){if(b=s.input.charCodeAt(s.position+1),R(b)||l&&re(b))break}else if(a===35){if(d=s.input.charCodeAt(s.position-1),R(d))break}else{if(s.position===s.lineStart&&ut(s)||l&&re(a))break;if(q(a))if(ge=s.line,Ne=s.lineStart,Ue=s.lineIndent,nt(s,!1,-1),s.lineIndent>=C){V=!0,a=s.input.charCodeAt(s.position);continue}else{s.position=L,s.line=ge,s.lineStart=Ne,s.lineIndent=Ue;break}}V&&(je(s,E,L,!1),me(s,s.line-ge),E=L=s.position,V=!1),D(a)||(L=s.position+1),a=s.input.charCodeAt(++s.position)}return je(s,E,L,!1),s.result?!0:(s.kind=Ke,s.result=_e,!1)}function M(s,C){var l,d,b;if(l=s.input.charCodeAt(s.position),l!==39)return!1;for(s.kind="scalar",s.result="",s.position++,d=b=s.position;(l=s.input.charCodeAt(s.position))!==0;)if(l===39)if(je(s,d,s.position,!0),l=s.input.charCodeAt(++s.position),l===39)d=s.position,s.position++,b=s.position;else return!0;else q(l)?(je(s,d,b,!0),me(s,nt(s,!1,C)),d=b=s.position):s.position===s.lineStart&&ut(s)?O(s,"unexpected end of the document within a single quoted scalar"):(s.position++,b=s.position);O(s,"unexpected end of the stream within a single quoted scalar")}function P(s,C){var l,d,b,E,L,V;if(V=s.input.charCodeAt(s.position),V!==34)return!1;for(s.kind="scalar",s.result="",s.position++,l=d=s.position;(V=s.input.charCodeAt(s.position))!==0;){if(V===34)return je(s,l,s.position,!0),s.position++,!0;if(V===92){if(je(s,l,s.position,!0),V=s.input.charCodeAt(++s.position),q(V))nt(s,!1,C);else if(V<256&&x[V])s.result+=u[V],s.position++;else if((L=j(V))>0){for(b=L,E=0;b>0;b--)V=s.input.charCodeAt(++s.position),(L=Ae(V))>=0?E=(E<<4)+L:O(s,"expected hexadecimal character");s.result+=p(E),s.position++}else O(s,"unknown escape sequence");l=d=s.position}else q(V)?(je(s,l,d,!0),me(s,nt(s,!1,C)),l=d=s.position):s.position===s.lineStart&&ut(s)?O(s,"unexpected end of the document within a double quoted scalar"):(s.position++,d=s.position)}O(s,"unexpected end of the stream within a double quoted scalar")}function I(s,C){var l=!0,d,b,E,L=s.tag,V,ge=s.anchor,Ne,Ue,Ke,_e,a,k=Object.create(null),N,X,ne,we;if(we=s.input.charCodeAt(s.position),we===91)Ue=93,a=!1,V=[];else if(we===123)Ue=125,a=!0,V={};else return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=V),we=s.input.charCodeAt(++s.position);we!==0;){if(nt(s,!0,C),we=s.input.charCodeAt(s.position),we===Ue)return s.position++,s.tag=L,s.anchor=ge,s.kind=a?"mapping":"sequence",s.result=V,!0;l?we===44&&O(s,"expected the node content, but found ','"):O(s,"missed comma between flow collection entries"),X=N=ne=null,Ke=_e=!1,we===63&&(Ne=s.input.charCodeAt(s.position+1),R(Ne)&&(Ke=_e=!0,s.position++,nt(s,!0,C))),d=s.line,b=s.lineStart,E=s.position,K(s,C,ue,!1,!0),X=s.tag,N=s.result,nt(s,!0,C),we=s.input.charCodeAt(s.position),(_e||s.line===d)&&we===58&&(Ke=!0,we=s.input.charCodeAt(++s.position),nt(s,!0,C),K(s,C,ue,!1,!0),ne=s.result),a?Qe(s,V,k,X,N,ne,d,b,E):Ke?V.push(Qe(s,null,k,X,N,ne,d,b,E)):V.push(N),nt(s,!0,C),we=s.input.charCodeAt(s.position),we===44?(l=!0,we=s.input.charCodeAt(++s.position)):l=!1}O(s,"unexpected end of the stream within a flow collection")}function ie(s,C){var l,d,b=ce,E=!1,L=!1,V=C,ge=0,Ne=!1,Ue,Ke;if(Ke=s.input.charCodeAt(s.position),Ke===124)d=!1;else if(Ke===62)d=!0;else return!1;for(s.kind="scalar",s.result="";Ke!==0;)if(Ke=s.input.charCodeAt(++s.position),Ke===43||Ke===45)ce===b?b=Ke===43?J:ae:O(s,"repeat of a chomping mode identifier");else if((Ue=c(Ke))>=0)Ue===0?O(s,"bad explicit indentation width of a block scalar; it cannot be less than one"):L?O(s,"repeat of an indentation width identifier"):(V=C+Ue-1,L=!0);else break;if(D(Ke)){do Ke=s.input.charCodeAt(++s.position);while(D(Ke));if(Ke===35)do Ke=s.input.charCodeAt(++s.position);while(!q(Ke)&&Ke!==0)}for(;Ke!==0;){for(ot(s),s.lineIndent=0,Ke=s.input.charCodeAt(s.position);(!L||s.lineIndent<V)&&Ke===32;)s.lineIndent++,Ke=s.input.charCodeAt(++s.position);if(!L&&s.lineIndent>V&&(V=s.lineIndent),q(Ke)){ge++;continue}if(s.lineIndent<V){b===J?s.result+=g.repeat(`
`,E?1+ge:ge):b===ce&&E&&(s.result+=`
`);break}for(d?D(Ke)?(Ne=!0,s.result+=g.repeat(`
`,E?1+ge:ge)):Ne?(Ne=!1,s.result+=g.repeat(`
`,ge+1)):ge===0?E&&(s.result+=" "):s.result+=g.repeat(`
`,ge):s.result+=g.repeat(`
`,E?1+ge:ge),E=!0,L=!0,ge=0,l=s.position;!q(Ke)&&Ke!==0;)Ke=s.input.charCodeAt(++s.position);je(s,l,s.position,!1)}return!0}function fe(s,C){var l,d=s.tag,b=s.anchor,E=[],L,V=!1,ge;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=E),ge=s.input.charCodeAt(s.position);ge!==0&&(s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,O(s,"tab characters must not be used in indentation")),!(ge!==45||(L=s.input.charCodeAt(s.position+1),!R(L))));){if(V=!0,s.position++,nt(s,!0,-1)&&s.lineIndent<=C){E.push(null),ge=s.input.charCodeAt(s.position);continue}if(l=s.line,K(s,C,Q,!1,!0),E.push(s.result),nt(s,!0,-1),ge=s.input.charCodeAt(s.position),(s.line===l||s.lineIndent>C)&&ge!==0)O(s,"bad indentation of a sequence entry");else if(s.lineIndent<C)break}return V?(s.tag=d,s.anchor=b,s.kind="sequence",s.result=E,!0):!1}function Ve(s,C,l){var d,b,E,L,V,ge,Ne=s.tag,Ue=s.anchor,Ke={},_e=Object.create(null),a=null,k=null,N=null,X=!1,ne=!1,we;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=Ke),we=s.input.charCodeAt(s.position);we!==0;){if(!X&&s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,O(s,"tab characters must not be used in indentation")),d=s.input.charCodeAt(s.position+1),E=s.line,(we===63||we===58)&&R(d))we===63?(X&&(Qe(s,Ke,_e,a,k,null,L,V,ge),a=k=N=null),ne=!0,X=!0,b=!0):X?(X=!1,b=!0):O(s,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),s.position+=1,we=d;else{if(L=s.line,V=s.lineStart,ge=s.position,!K(s,l,pe,!1,!0))break;if(s.line===E){for(we=s.input.charCodeAt(s.position);D(we);)we=s.input.charCodeAt(++s.position);if(we===58)we=s.input.charCodeAt(++s.position),R(we)||O(s,"a whitespace character is expected after the key-value separator within a block mapping"),X&&(Qe(s,Ke,_e,a,k,null,L,V,ge),a=k=N=null),ne=!0,X=!1,b=!1,a=s.tag,k=s.result;else if(ne)O(s,"can not read an implicit mapping pair; a colon is missed");else return s.tag=Ne,s.anchor=Ue,!0}else if(ne)O(s,"can not read a block mapping entry; a multiline key may not be an implicit key");else return s.tag=Ne,s.anchor=Ue,!0}if((s.line===E||s.lineIndent>C)&&(X&&(L=s.line,V=s.lineStart,ge=s.position),K(s,C,$,!0,b)&&(X?k=s.result:N=s.result),X||(Qe(s,Ke,_e,a,k,N,L,V,ge),a=k=N=null),nt(s,!0,-1),we=s.input.charCodeAt(s.position)),(s.line===E||s.lineIndent>C)&&we!==0)O(s,"bad indentation of a mapping entry");else if(s.lineIndent<C)break}return X&&Qe(s,Ke,_e,a,k,null,L,V,ge),ne&&(s.tag=Ne,s.anchor=Ue,s.kind="mapping",s.result=Ke),ne}function he(s){var C,l=!1,d=!1,b,E,L;if(L=s.input.charCodeAt(s.position),L!==33)return!1;if(s.tag!==null&&O(s,"duplication of a tag property"),L=s.input.charCodeAt(++s.position),L===60?(l=!0,L=s.input.charCodeAt(++s.position)):L===33?(d=!0,b="!!",L=s.input.charCodeAt(++s.position)):b="!",C=s.position,l){do L=s.input.charCodeAt(++s.position);while(L!==0&&L!==62);s.position<s.length?(E=s.input.slice(C,s.position),L=s.input.charCodeAt(++s.position)):O(s,"unexpected end of the stream within a verbatim tag")}else{for(;L!==0&&!R(L);)L===33&&(d?O(s,"tag suffix cannot contain exclamation marks"):(b=s.input.slice(C-1,s.position+1),ve.test(b)||O(s,"named tag handle cannot contain such characters"),d=!0,C=s.position+1)),L=s.input.charCodeAt(++s.position);E=s.input.slice(C,s.position),xe.test(E)&&O(s,"tag suffix cannot contain flow indicator characters")}E&&!Me.test(E)&&O(s,"tag name cannot contain such characters: "+E);try{E=decodeURIComponent(E)}catch(V){O(s,"tag name is malformed: "+E)}return l?s.tag=E:F.call(s.tagMap,b)?s.tag=s.tagMap[b]+E:b==="!"?s.tag="!"+E:b==="!!"?s.tag="tag:yaml.org,2002:"+E:O(s,'undeclared tag handle "'+b+'"'),!0}function de(s){var C,l;if(l=s.input.charCodeAt(s.position),l!==38)return!1;for(s.anchor!==null&&O(s,"duplication of an anchor property"),l=s.input.charCodeAt(++s.position),C=s.position;l!==0&&!R(l)&&!re(l);)l=s.input.charCodeAt(++s.position);return s.position===C&&O(s,"name of an anchor node must contain at least one character"),s.anchor=s.input.slice(C,s.position),!0}function Ee(s){var C,l,d;if(d=s.input.charCodeAt(s.position),d!==42)return!1;for(d=s.input.charCodeAt(++s.position),C=s.position;d!==0&&!R(d)&&!re(d);)d=s.input.charCodeAt(++s.position);return s.position===C&&O(s,"name of an alias node must contain at least one character"),l=s.input.slice(C,s.position),F.call(s.anchorMap,l)||O(s,'unidentified alias "'+l+'"'),s.result=s.anchorMap[l],nt(s,!0,-1),!0}function K(s,C,l,d,b){var E,L,V,ge=1,Ne=!1,Ue=!1,Ke,_e,a,k,N,X;if(s.listener!==null&&s.listener("open",s),s.tag=null,s.anchor=null,s.kind=null,s.result=null,E=L=V=$===l||Q===l,d&&nt(s,!0,-1)&&(Ne=!0,s.lineIndent>C?ge=1:s.lineIndent===C?ge=0:s.lineIndent<C&&(ge=-1)),ge===1)for(;he(s)||de(s);)nt(s,!0,-1)?(Ne=!0,V=E,s.lineIndent>C?ge=1:s.lineIndent===C?ge=0:s.lineIndent<C&&(ge=-1)):V=!1;if(V&&(V=Ne||b),(ge===1||$===l)&&(ue===l||pe===l?N=C:N=C+1,X=s.position-s.lineStart,ge===1?V&&(fe(s,X)||Ve(s,X,N))||I(s,N)?Ue=!0:(L&&ie(s,N)||M(s,N)||P(s,N)?Ue=!0:Ee(s)?(Ue=!0,(s.tag!==null||s.anchor!==null)&&O(s,"alias node should not have any properties")):v(s,N,ue===l)&&(Ue=!0,s.tag===null&&(s.tag="?")),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):ge===0&&(Ue=V&&fe(s,X))),s.tag===null)s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);else if(s.tag==="?"){for(s.result!==null&&s.kind!=="scalar"&&O(s,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+s.kind+'"'),Ke=0,_e=s.implicitTypes.length;Ke<_e;Ke+=1)if(k=s.implicitTypes[Ke],k.resolve(s.result)){s.result=k.construct(s.result),s.tag=k.tag,s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);break}}else if(s.tag!=="!"){if(F.call(s.typeMap[s.kind||"fallback"],s.tag))k=s.typeMap[s.kind||"fallback"][s.tag];else for(k=null,a=s.typeMap.multi[s.kind||"fallback"],Ke=0,_e=a.length;Ke<_e;Ke+=1)if(s.tag.slice(0,a[Ke].tag.length)===a[Ke].tag){k=a[Ke];break}k||O(s,"unknown tag !<"+s.tag+">"),s.result!==null&&k.kind!==s.kind&&O(s,"unacceptable node kind for !<"+s.tag+'> tag; it should be "'+k.kind+'", not "'+s.kind+'"'),k.resolve(s.result,s.tag)?(s.result=k.construct(s.result,s.tag),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):O(s,"cannot resolve a node with !<"+s.tag+"> explicit tag")}return s.listener!==null&&s.listener("close",s),s.tag!==null||s.anchor!==null||Ue}function A(s){var C=s.position,l,d,b,E=!1,L;for(s.version=null,s.checkLineBreaks=s.legacy,s.tagMap=Object.create(null),s.anchorMap=Object.create(null);(L=s.input.charCodeAt(s.position))!==0&&(nt(s,!0,-1),L=s.input.charCodeAt(s.position),!(s.lineIndent>0||L!==37));){for(E=!0,L=s.input.charCodeAt(++s.position),l=s.position;L!==0&&!R(L);)L=s.input.charCodeAt(++s.position);for(d=s.input.slice(l,s.position),b=[],d.length<1&&O(s,"directive name must not be less than one character in length");L!==0;){for(;D(L);)L=s.input.charCodeAt(++s.position);if(L===35){do L=s.input.charCodeAt(++s.position);while(L!==0&&!q(L));break}if(q(L))break;for(l=s.position;L!==0&&!R(L);)L=s.input.charCodeAt(++s.position);b.push(s.input.slice(l,s.position))}L!==0&&ot(s),F.call(Te,d)?Te[d](s,d,b):U(s,'unknown document directive "'+d+'"')}if(nt(s,!0,-1),s.lineIndent===0&&s.input.charCodeAt(s.position)===45&&s.input.charCodeAt(s.position+1)===45&&s.input.charCodeAt(s.position+2)===45?(s.position+=3,nt(s,!0,-1)):E&&O(s,"directives end mark is expected"),K(s,s.lineIndent-1,$,!1,!0),nt(s,!0,-1),s.checkLineBreaks&&Fe.test(s.input.slice(C,s.position))&&U(s,"non-ASCII line breaks are interpreted as content"),s.documents.push(s.result),s.position===s.lineStart&&ut(s)){s.input.charCodeAt(s.position)===46&&(s.position+=3,nt(s,!0,-1));return}if(s.position<s.length-1)O(s,"end of the stream or a document separator is expected");else return}function z(s,C){s=String(s),C=C||{},s.length!==0&&(s.charCodeAt(s.length-1)!==10&&s.charCodeAt(s.length-1)!==13&&(s+=`
`),s.charCodeAt(0)===65279&&(s=s.slice(1)));var l=new B(s,C),d=s.indexOf("\0");for(d!==-1&&(l.position=d,O(l,"null byte is not allowed in input")),l.input+="\0";l.input.charCodeAt(l.position)===32;)l.lineIndent+=1,l.position+=1;for(;l.position<l.length-1;)A(l);return l.documents}function ye(s,C,l){C!==null&&typeof C=="object"&&typeof l=="undefined"&&(l=C,C=null);var d=z(s,l);if(typeof C!="function")return d;for(var b=0,E=d.length;b<E;b+=1)C(d[b])}function De(s,C){var l=z(s,C);if(l.length!==0){if(l.length===1)return l[0];throw new H("expected a single document in the stream, but found more")}}We.exports.loadAll=ye,We.exports.load=De},67657:function(We,m,T){"use strict";var g=T(88425),H=T(71364);function G(ue,pe){var Q=[];return ue[pe].forEach(function($){var ce=Q.length;Q.forEach(function(ae,J){ae.tag===$.tag&&ae.kind===$.kind&&ae.multi===$.multi&&(ce=J)}),Q[ce]=$}),Q}function se(){var ue={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},pe,Q;function $(ce){ce.multi?(ue.multi[ce.kind].push(ce),ue.multi.fallback.push(ce)):ue[ce.kind][ce.tag]=ue.fallback[ce.tag]=ce}for(pe=0,Q=arguments.length;pe<Q;pe+=1)arguments[pe].forEach($);return ue}function F(ue){return this.extend(ue)}F.prototype.extend=function(pe){var Q=[],$=[];if(pe instanceof H)$.push(pe);else if(Array.isArray(pe))$=$.concat(pe);else if(pe&&(Array.isArray(pe.implicit)||Array.isArray(pe.explicit)))pe.implicit&&(Q=Q.concat(pe.implicit)),pe.explicit&&($=$.concat(pe.explicit));else throw new g("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");Q.forEach(function(ae){if(!(ae instanceof H))throw new g("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(ae.loadKind&&ae.loadKind!=="scalar")throw new g("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(ae.multi)throw new g("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),$.forEach(function(ae){if(!(ae instanceof H))throw new g("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var ce=Object.create(F.prototype);return ce.implicit=(this.implicit||[]).concat(Q),ce.explicit=(this.explicit||[]).concat($),ce.compiledImplicit=G(ce,"implicit"),ce.compiledExplicit=G(ce,"explicit"),ce.compiledTypeMap=se(ce.compiledImplicit,ce.compiledExplicit),ce},We.exports=F},9471:function(We,m,T){"use strict";We.exports=T(35966)},86601:function(We,m,T){"use strict";We.exports=T(9471).extend({implicit:[T(12156),T(67452)],explicit:[T(43531),T(51605),T(6879),T(44982)]})},44795:function(We,m,T){"use strict";var g=T(67657);We.exports=new g({explicit:[T(48),T(76451),T(40945)]})},35966:function(We,m,T){"use strict";We.exports=T(44795).extend({implicit:[T(30151),T(48771),T(61518),T(45215)]})},10192:function(We,m,T){"use strict";var g=T(8347);function H(F,ue,pe,Q,$){var ce="",ae="",J=Math.floor($/2)-1;return Q-ue>J&&(ce=" ... ",ue=Q-J+ce.length),pe-Q>J&&(ae=" ...",pe=Q+J-ae.length),{str:ce+F.slice(ue,pe).replace(/\t/g,"\u2192")+ae,pos:Q-ue+ce.length}}function G(F,ue){return g.repeat(" ",ue-F.length)+F}function se(F,ue){if(ue=Object.create(ue||null),!F.buffer)return null;ue.maxLength||(ue.maxLength=79),typeof ue.indent!="number"&&(ue.indent=1),typeof ue.linesBefore!="number"&&(ue.linesBefore=3),typeof ue.linesAfter!="number"&&(ue.linesAfter=2);for(var pe=/\r?\n|\r|\0/g,Q=[0],$=[],ce,ae=-1;ce=pe.exec(F.buffer);)$.push(ce.index),Q.push(ce.index+ce[0].length),F.position<=ce.index&&ae<0&&(ae=Q.length-2);ae<0&&(ae=Q.length-1);var J="",Y,Fe,xe=Math.min(F.line+ue.linesAfter,$.length).toString().length,ve=ue.maxLength-(ue.indent+xe+3);for(Y=1;Y<=ue.linesBefore&&!(ae-Y<0);Y++)Fe=H(F.buffer,Q[ae-Y],$[ae-Y],F.position-(Q[ae]-Q[ae-Y]),ve),J=g.repeat(" ",ue.indent)+G((F.line-Y+1).toString(),xe)+" | "+Fe.str+`
`+J;for(Fe=H(F.buffer,Q[ae],$[ae],F.position,ve),J+=g.repeat(" ",ue.indent)+G((F.line+1).toString(),xe)+" | "+Fe.str+`
`,J+=g.repeat("-",ue.indent+xe+3+Fe.pos)+`^
`,Y=1;Y<=ue.linesAfter&&!(ae+Y>=$.length);Y++)Fe=H(F.buffer,Q[ae+Y],$[ae+Y],F.position-(Q[ae]-Q[ae+Y]),ve),J+=g.repeat(" ",ue.indent)+G((F.line+Y+1).toString(),xe)+" | "+Fe.str+`
`;return J.replace(/\n$/,"")}We.exports=se},71364:function(We,m,T){"use strict";var g=T(88425),H=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],G=["scalar","sequence","mapping"];function se(ue){var pe={};return ue!==null&&Object.keys(ue).forEach(function(Q){ue[Q].forEach(function($){pe[String($)]=Q})}),pe}function F(ue,pe){if(pe=pe||{},Object.keys(pe).forEach(function(Q){if(H.indexOf(Q)===-1)throw new g('Unknown option "'+Q+'" is met in definition of "'+ue+'" YAML type.')}),this.options=pe,this.tag=ue,this.kind=pe.kind||null,this.resolve=pe.resolve||function(){return!0},this.construct=pe.construct||function(Q){return Q},this.instanceOf=pe.instanceOf||null,this.predicate=pe.predicate||null,this.represent=pe.represent||null,this.representName=pe.representName||null,this.defaultStyle=pe.defaultStyle||null,this.multi=pe.multi||!1,this.styleAliases=se(pe.styleAliases||null),G.indexOf(this.kind)===-1)throw new g('Unknown kind "'+this.kind+'" is specified for "'+ue+'" YAML type.')}We.exports=F},43531:function(We,m,T){"use strict";var g=T(71364),H=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function G(pe){if(pe===null)return!1;var Q,$,ce=0,ae=pe.length,J=H;for($=0;$<ae;$++)if(Q=J.indexOf(pe.charAt($)),!(Q>64)){if(Q<0)return!1;ce+=6}return ce%8===0}function se(pe){var Q,$,ce=pe.replace(/[\r\n=]/g,""),ae=ce.length,J=H,Y=0,Fe=[];for(Q=0;Q<ae;Q++)Q%4===0&&Q&&(Fe.push(Y>>16&255),Fe.push(Y>>8&255),Fe.push(Y&255)),Y=Y<<6|J.indexOf(ce.charAt(Q));return $=ae%4*6,$===0?(Fe.push(Y>>16&255),Fe.push(Y>>8&255),Fe.push(Y&255)):$===18?(Fe.push(Y>>10&255),Fe.push(Y>>2&255)):$===12&&Fe.push(Y>>4&255),new Uint8Array(Fe)}function F(pe){var Q="",$=0,ce,ae,J=pe.length,Y=H;for(ce=0;ce<J;ce++)ce%3===0&&ce&&(Q+=Y[$>>18&63],Q+=Y[$>>12&63],Q+=Y[$>>6&63],Q+=Y[$&63]),$=($<<8)+pe[ce];return ae=J%3,ae===0?(Q+=Y[$>>18&63],Q+=Y[$>>12&63],Q+=Y[$>>6&63],Q+=Y[$&63]):ae===2?(Q+=Y[$>>10&63],Q+=Y[$>>4&63],Q+=Y[$<<2&63],Q+=Y[64]):ae===1&&(Q+=Y[$>>2&63],Q+=Y[$<<4&63],Q+=Y[64],Q+=Y[64]),Q}function ue(pe){return Object.prototype.toString.call(pe)==="[object Uint8Array]"}We.exports=new g("tag:yaml.org,2002:binary",{kind:"scalar",resolve:G,construct:se,predicate:ue,represent:F})},48771:function(We,m,T){"use strict";var g=T(71364);function H(F){if(F===null)return!1;var ue=F.length;return ue===4&&(F==="true"||F==="True"||F==="TRUE")||ue===5&&(F==="false"||F==="False"||F==="FALSE")}function G(F){return F==="true"||F==="True"||F==="TRUE"}function se(F){return Object.prototype.toString.call(F)==="[object Boolean]"}We.exports=new g("tag:yaml.org,2002:bool",{kind:"scalar",resolve:H,construct:G,predicate:se,represent:{lowercase:function(F){return F?"true":"false"},uppercase:function(F){return F?"TRUE":"FALSE"},camelcase:function(F){return F?"True":"False"}},defaultStyle:"lowercase"})},45215:function(We,m,T){"use strict";var g=T(8347),H=T(71364),G=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function se($){return!($===null||!G.test($)||$[$.length-1]==="_")}function F($){var ce,ae;return ce=$.replace(/_/g,"").toLowerCase(),ae=ce[0]==="-"?-1:1,"+-".indexOf(ce[0])>=0&&(ce=ce.slice(1)),ce===".inf"?ae===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:ce===".nan"?NaN:ae*parseFloat(ce,10)}var ue=/^[-+]?[0-9]+e/;function pe($,ce){var ae;if(isNaN($))switch(ce){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===$)switch(ce){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===$)switch(ce){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(g.isNegativeZero($))return"-0.0";return ae=$.toString(10),ue.test(ae)?ae.replace("e",".e"):ae}function Q($){return Object.prototype.toString.call($)==="[object Number]"&&($%1!==0||g.isNegativeZero($))}We.exports=new H("tag:yaml.org,2002:float",{kind:"scalar",resolve:se,construct:F,predicate:Q,represent:pe,defaultStyle:"lowercase"})},61518:function(We,m,T){"use strict";var g=T(8347),H=T(71364);function G($){return 48<=$&&$<=57||65<=$&&$<=70||97<=$&&$<=102}function se($){return 48<=$&&$<=55}function F($){return 48<=$&&$<=57}function ue($){if($===null)return!1;var ce=$.length,ae=0,J=!1,Y;if(!ce)return!1;if(Y=$[ae],(Y==="-"||Y==="+")&&(Y=$[++ae]),Y==="0"){if(ae+1===ce)return!0;if(Y=$[++ae],Y==="b"){for(ae++;ae<ce;ae++)if(Y=$[ae],Y!=="_"){if(Y!=="0"&&Y!=="1")return!1;J=!0}return J&&Y!=="_"}if(Y==="x"){for(ae++;ae<ce;ae++)if(Y=$[ae],Y!=="_"){if(!G($.charCodeAt(ae)))return!1;J=!0}return J&&Y!=="_"}if(Y==="o"){for(ae++;ae<ce;ae++)if(Y=$[ae],Y!=="_"){if(!se($.charCodeAt(ae)))return!1;J=!0}return J&&Y!=="_"}}if(Y==="_")return!1;for(;ae<ce;ae++)if(Y=$[ae],Y!=="_"){if(!F($.charCodeAt(ae)))return!1;J=!0}return!(!J||Y==="_")}function pe($){var ce=$,ae=1,J;if(ce.indexOf("_")!==-1&&(ce=ce.replace(/_/g,"")),J=ce[0],(J==="-"||J==="+")&&(J==="-"&&(ae=-1),ce=ce.slice(1),J=ce[0]),ce==="0")return 0;if(J==="0"){if(ce[1]==="b")return ae*parseInt(ce.slice(2),2);if(ce[1]==="x")return ae*parseInt(ce.slice(2),16);if(ce[1]==="o")return ae*parseInt(ce.slice(2),8)}return ae*parseInt(ce,10)}function Q($){return Object.prototype.toString.call($)==="[object Number]"&&$%1===0&&!g.isNegativeZero($)}We.exports=new H("tag:yaml.org,2002:int",{kind:"scalar",resolve:ue,construct:pe,predicate:Q,represent:{binary:function($){return $>=0?"0b"+$.toString(2):"-0b"+$.toString(2).slice(1)},octal:function($){return $>=0?"0o"+$.toString(8):"-0o"+$.toString(8).slice(1)},decimal:function($){return $.toString(10)},hexadecimal:function($){return $>=0?"0x"+$.toString(16).toUpperCase():"-0x"+$.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}})},40945:function(We,m,T){"use strict";var g=T(71364);We.exports=new g("tag:yaml.org,2002:map",{kind:"mapping",construct:function(H){return H!==null?H:{}}})},67452:function(We,m,T){"use strict";var g=T(71364);function H(G){return G==="<<"||G===null}We.exports=new g("tag:yaml.org,2002:merge",{kind:"scalar",resolve:H})},30151:function(We,m,T){"use strict";var g=T(71364);function H(F){if(F===null)return!0;var ue=F.length;return ue===1&&F==="~"||ue===4&&(F==="null"||F==="Null"||F==="NULL")}function G(){return null}function se(F){return F===null}We.exports=new g("tag:yaml.org,2002:null",{kind:"scalar",resolve:H,construct:G,predicate:se,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"})},51605:function(We,m,T){"use strict";var g=T(71364),H=Object.prototype.hasOwnProperty,G=Object.prototype.toString;function se(ue){if(ue===null)return!0;var pe=[],Q,$,ce,ae,J,Y=ue;for(Q=0,$=Y.length;Q<$;Q+=1){if(ce=Y[Q],J=!1,G.call(ce)!=="[object Object]")return!1;for(ae in ce)if(H.call(ce,ae))if(!J)J=!0;else return!1;if(!J)return!1;if(pe.indexOf(ae)===-1)pe.push(ae);else return!1}return!0}function F(ue){return ue!==null?ue:[]}We.exports=new g("tag:yaml.org,2002:omap",{kind:"sequence",resolve:se,construct:F})},6879:function(We,m,T){"use strict";var g=T(71364),H=Object.prototype.toString;function G(F){if(F===null)return!0;var ue,pe,Q,$,ce,ae=F;for(ce=new Array(ae.length),ue=0,pe=ae.length;ue<pe;ue+=1){if(Q=ae[ue],H.call(Q)!=="[object Object]"||($=Object.keys(Q),$.length!==1))return!1;ce[ue]=[$[0],Q[$[0]]]}return!0}function se(F){if(F===null)return[];var ue,pe,Q,$,ce,ae=F;for(ce=new Array(ae.length),ue=0,pe=ae.length;ue<pe;ue+=1)Q=ae[ue],$=Object.keys(Q),ce[ue]=[$[0],Q[$[0]]];return ce}We.exports=new g("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:G,construct:se})},76451:function(We,m,T){"use strict";var g=T(71364);We.exports=new g("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(H){return H!==null?H:[]}})},44982:function(We,m,T){"use strict";var g=T(71364),H=Object.prototype.hasOwnProperty;function G(F){if(F===null)return!0;var ue,pe=F;for(ue in pe)if(H.call(pe,ue)&&pe[ue]!==null)return!1;return!0}function se(F){return F!==null?F:{}}We.exports=new g("tag:yaml.org,2002:set",{kind:"mapping",resolve:G,construct:se})},48:function(We,m,T){"use strict";var g=T(71364);We.exports=new g("tag:yaml.org,2002:str",{kind:"scalar",construct:function(H){return H!==null?H:""}})},12156:function(We,m,T){"use strict";var g=T(71364),H=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),G=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function se(pe){return pe===null?!1:H.exec(pe)!==null||G.exec(pe)!==null}function F(pe){var Q,$,ce,ae,J,Y,Fe,xe=0,ve=null,Me,Be,q;if(Q=H.exec(pe),Q===null&&(Q=G.exec(pe)),Q===null)throw new Error("Date resolve error");if($=+Q[1],ce=+Q[2]-1,ae=+Q[3],!Q[4])return new Date(Date.UTC($,ce,ae));if(J=+Q[4],Y=+Q[5],Fe=+Q[6],Q[7]){for(xe=Q[7].slice(0,3);xe.length<3;)xe+="0";xe=+xe}return Q[9]&&(Me=+Q[10],Be=+(Q[11]||0),ve=(Me*60+Be)*6e4,Q[9]==="-"&&(ve=-ve)),q=new Date(Date.UTC($,ce,ae,J,Y,Fe,xe)),ve&&q.setTime(q.getTime()-ve),q}function ue(pe){return pe.toISOString()}We.exports=new g("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:se,construct:F,instanceOf:Date,represent:ue})},73897:function(We){function m(T,g){(g==null||g>T.length)&&(g=T.length);for(var H=0,G=new Array(g);H<g;H++)G[H]=T[H];return G}We.exports=m,We.exports.__esModule=!0,We.exports.default=We.exports},85372:function(We){function m(T){if(Array.isArray(T))return T}We.exports=m,We.exports.__esModule=!0,We.exports.default=We.exports},56690:function(We){function m(T,g){if(!(T instanceof g))throw new TypeError("Cannot call a class as a function")}We.exports=m,We.exports.__esModule=!0,We.exports.default=We.exports},89728:function(We,m,T){var g=T(64062);function H(se,F){for(var ue=0;ue<F.length;ue++){var pe=F[ue];pe.enumerable=pe.enumerable||!1,pe.configurable=!0,"value"in pe&&(pe.writable=!0),Object.defineProperty(se,g(pe.key),pe)}}function G(se,F,ue){return F&&H(se.prototype,F),ue&&H(se,ue),Object.defineProperty(se,"prototype",{writable:!1}),se}We.exports=G,We.exports.__esModule=!0,We.exports.default=We.exports},38416:function(We,m,T){var g=T(64062);function H(G,se,F){return se=g(se),se in G?Object.defineProperty(G,se,{value:F,enumerable:!0,configurable:!0,writable:!0}):G[se]=F,G}We.exports=H,We.exports.__esModule=!0,We.exports.default=We.exports},68872:function(We){function m(T,g){var H=T==null?null:typeof Symbol!="undefined"&&T[Symbol.iterator]||T["@@iterator"];if(H!=null){var G,se,F,ue,pe=[],Q=!0,$=!1;try{if(F=(H=H.call(T)).next,g===0){if(Object(H)!==H)return;Q=!1}else for(;!(Q=(G=F.call(H)).done)&&(pe.push(G.value),pe.length!==g);Q=!0);}catch(ce){$=!0,se=ce}finally{try{if(!Q&&H.return!=null&&(ue=H.return(),Object(ue)!==ue))return}finally{if($)throw se}}return pe}}We.exports=m,We.exports.__esModule=!0,We.exports.default=We.exports},12218:function(We){function m(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}We.exports=m,We.exports.__esModule=!0,We.exports.default=We.exports},27424:function(We,m,T){var g=T(85372),H=T(68872),G=T(86116),se=T(12218);function F(ue,pe){return g(ue)||H(ue,pe)||G(ue,pe)||se()}We.exports=F,We.exports.__esModule=!0,We.exports.default=We.exports},95036:function(We,m,T){var g=T(18698).default;function H(G,se){if(g(G)!=="object"||G===null)return G;var F=G[Symbol.toPrimitive];if(F!==void 0){var ue=F.call(G,se||"default");if(g(ue)!=="object")return ue;throw new TypeError("@@toPrimitive must return a primitive value.")}return(se==="string"?String:Number)(G)}We.exports=H,We.exports.__esModule=!0,We.exports.default=We.exports},64062:function(We,m,T){var g=T(18698).default,H=T(95036);function G(se){var F=H(se,"string");return g(F)==="symbol"?F:String(F)}We.exports=G,We.exports.__esModule=!0,We.exports.default=We.exports},18698:function(We){function m(T){"@babel/helpers - typeof";return We.exports=m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},We.exports.__esModule=!0,We.exports.default=We.exports,m(T)}We.exports=m,We.exports.__esModule=!0,We.exports.default=We.exports},86116:function(We,m,T){var g=T(73897);function H(G,se){if(G){if(typeof G=="string")return g(G,se);var F=Object.prototype.toString.call(G).slice(8,-1);if(F==="Object"&&G.constructor&&(F=G.constructor.name),F==="Map"||F==="Set")return Array.from(G);if(F==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(F))return g(G,se)}}We.exports=H,We.exports.__esModule=!0,We.exports.default=We.exports},50526:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040),H=T(23642),G=T(67047),se=T(80729),F=T(18907);class ue{constructor(Z,te,Ce){this.state=Z,this.pos=te,this.explicit=Ce,this.abortListeners=[]}tokenBefore(Z){let te=se.syntaxTree(this.state).resolveInner(this.pos,-1);for(;te&&Z.indexOf(te.name)<0;)te=te.parent;return te?{from:te.from,to:this.pos,text:this.state.sliceDoc(te.from,this.pos),type:te.type}:null}matchBefore(Z){let te=this.state.doc.lineAt(this.pos),Ce=Math.max(te.from,this.pos-250),Oe=te.text.slice(Ce-te.from,this.pos-te.from),Ye=Oe.search(Fe(Z,!1));return Ye<0?null:{from:Ce+Ye,to:this.pos,text:Oe.slice(Ye)}}get aborted(){return this.abortListeners==null}addEventListener(Z,te){Z=="abort"&&this.abortListeners&&this.abortListeners.push(te)}}function pe(Se){let Z=Object.keys(Se).join(""),te=/\w/.test(Z);return te&&(Z=Z.replace(/\w/g,"")),`[${te?"\\w":""}${Z.replace(/[^\w\s]/g,"\\$&")}]`}function Q(Se){let Z=Object.create(null),te=Object.create(null);for(let{label:Oe}of Se){Z[Oe[0]]=!0;for(let Ye=1;Ye<Oe.length;Ye++)te[Oe[Ye]]=!0}let Ce=pe(Z)+pe(te)+"*$";return[new RegExp("^"+Ce),new RegExp(Ce)]}function $(Se){let Z=Se.map(Oe=>typeof Oe=="string"?{label:Oe}:Oe),[te,Ce]=Z.every(Oe=>/^\w+$/.test(Oe.label))?[/\w*$/,/\w+$/]:Q(Z);return Oe=>{let Ye=Oe.matchBefore(Ce);return Ye||Oe.explicit?{from:Ye?Ye.from:Oe.pos,options:Z,span:te}:null}}function ce(Se,Z){return te=>{for(let Ce=se.syntaxTree(te.state).resolveInner(te.pos,-1);Ce;Ce=Ce.parent)if(Se.indexOf(Ce.name)>-1)return Z(te);return null}}function ae(Se,Z){return te=>{for(let Ce=se.syntaxTree(te.state).resolveInner(te.pos,-1);Ce;Ce=Ce.parent)if(Se.indexOf(Ce.name)>-1)return null;return Z(te)}}class J{constructor(Z,te,Ce){this.completion=Z,this.source=te,this.match=Ce}}function Y(Se){return Se.selection.main.head}function Fe(Se,Z){var te;let{source:Ce}=Se,Oe=Z&&Ce[0]!="^",Ye=Ce[Ce.length-1]!="$";return!Oe&&!Ye?Se:new RegExp(`${Oe?"^":""}(?:${Ce})${Ye?"$":""}`,(te=Se.flags)!==null&&te!==void 0?te:Se.ignoreCase?"i":"")}const xe=g.Annotation.define();function ve(Se,Z){let te=Z.completion.apply||Z.completion.label,Ce=Z.source;typeof te=="string"?Se.dispatch({changes:{from:Ce.from,to:Ce.to,insert:te},selection:{anchor:Ce.from+te.length},userEvent:"input.complete",annotations:xe.of(Z.completion)}):te(Se,Z.completion,Ce.from,Ce.to)}const Me=new WeakMap;function Be(Se){if(!Array.isArray(Se))return Se;let Z=Me.get(Se);return Z||Me.set(Se,Z=$(Se)),Z}class q{constructor(Z){this.pattern=Z,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let te=0;te<Z.length;){let Ce=F.codePointAt(Z,te),Oe=F.codePointSize(Ce);this.chars.push(Ce);let Ye=Z.slice(te,te+Oe),qe=Ye.toUpperCase();this.folded.push(F.codePointAt(qe==Ye?Ye.toLowerCase():qe,0)),te+=Oe}this.astral=Z.length!=this.chars.length}match(Z){if(this.pattern.length==0)return[0];if(Z.length<this.pattern.length)return null;let{chars:te,folded:Ce,any:Oe,precise:Ye,byWord:qe}=this;if(te.length==1){let He=F.codePointAt(Z,0);return He==te[0]?[0,0,F.codePointSize(He)]:He==Ce[0]?[-200,0,F.codePointSize(He)]:null}let rt=Z.indexOf(this.pattern);if(rt==0)return[0,0,this.pattern.length];let at=te.length,pt=0;if(rt<0){for(let He=0,ze=Math.min(Z.length,200);He<ze&&pt<at;){let y=F.codePointAt(Z,He);(y==te[pt]||y==Ce[pt])&&(Oe[pt++]=He),He+=F.codePointSize(y)}if(pt<at)return null}let Et=0,Pt=0,oi=!1,$t=0,ti=-1,Xt=-1,Je=/[a-z]/.test(Z),Re=!0;for(let He=0,ze=Math.min(Z.length,200),y=0;He<ze&&Pt<at;){let ee=F.codePointAt(Z,He);rt<0&&(Et<at&&ee==te[Et]&&(Ye[Et++]=He),$t<at&&(ee==te[$t]||ee==Ce[$t]?($t==0&&(ti=He),Xt=He+1,$t++):$t=0));let ke,Le=ee<255?ee>=48&&ee<=57||ee>=97&&ee<=122?2:ee>=65&&ee<=90?1:0:(ke=F.fromCodePoint(ee))!=ke.toLowerCase()?1:ke!=ke.toUpperCase()?2:0;(!He||Le==1&&Je||y==0&&Le!=0)&&(te[Pt]==ee||Ce[Pt]==ee&&(oi=!0)?qe[Pt++]=He:qe.length&&(Re=!1)),y=Le,He+=F.codePointSize(ee)}return Pt==at&&qe[0]==0&&Re?this.result(-100+(oi?-200:0),qe,Z):$t==at&&ti==0?[-200-Z.length,0,Xt]:rt>-1?[-700-Z.length,rt,rt+this.pattern.length]:$t==at?[-200+-700-Z.length,ti,Xt]:Pt==at?this.result(-100+(oi?-200:0)+-700+(Re?0:-1100),qe,Z):te.length==2?null:this.result((Oe[0]?-700:0)+-200+-1100,Oe,Z)}result(Z,te,Ce){let Oe=[Z-Ce.length],Ye=1;for(let qe of te){let rt=qe+(this.astral?F.codePointSize(F.codePointAt(Ce,qe)):1);Ye>1&&Oe[Ye-1]==qe?Oe[Ye-1]=rt:(Oe[Ye++]=qe,Oe[Ye++]=rt)}return Oe}}const D=g.Facet.define({combine(Se){return g.combineConfig(Se,{activateOnTyping:!0,override:null,maxRenderedOptions:100,defaultKeymap:!0,optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[]},{defaultKeymap:(Z,te)=>Z&&te,icons:(Z,te)=>Z&&te,optionClass:(Z,te)=>Ce=>R(Z(Ce),te(Ce)),addToOptions:(Z,te)=>Z.concat(te)})}});function R(Se,Z){return Se?Z?Se+" "+Z:Se:Z}function re(Se){let Z=Se.addToOptions.slice();return Se.icons&&Z.push({render(te){let Ce=document.createElement("div");return Ce.classList.add("cm-completionIcon"),te.type&&Ce.classList.add(...te.type.split(/\s+/g).map(Oe=>"cm-completionIcon-"+Oe)),Ce.setAttribute("aria-hidden","true"),Ce},position:20}),Z.push({render(te,Ce,Oe){let Ye=document.createElement("span");Ye.className="cm-completionLabel";let{label:qe}=te,rt=0;for(let at=1;at<Oe.length;){let pt=Oe[at++],Et=Oe[at++];pt>rt&&Ye.appendChild(document.createTextNode(qe.slice(rt,pt)));let Pt=Ye.appendChild(document.createElement("span"));Pt.appendChild(document.createTextNode(qe.slice(pt,Et))),Pt.className="cm-completionMatchedText",rt=Et}return rt<qe.length&&Ye.appendChild(document.createTextNode(qe.slice(rt))),Ye},position:50},{render(te){if(!te.detail)return null;let Ce=document.createElement("span");return Ce.className="cm-completionDetail",Ce.textContent=te.detail,Ce},position:80}),Z.sort((te,Ce)=>te.position-Ce.position).map(te=>te.render)}function Ae(Se,Z,te){if(Se<=te)return{from:0,to:Se};if(Z<=Se>>1){let Oe=Math.floor(Z/te);return{from:Oe*te,to:(Oe+1)*te}}let Ce=Math.floor((Se-Z)/te);return{from:Se-(Ce+1)*te,to:Se-Ce*te}}class j{constructor(Z,te){this.view=Z,this.stateField=te,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:rt=>this.positionInfo(rt),key:this};let Ce=Z.state.field(te),{options:Oe,selected:Ye}=Ce.open,qe=Z.state.facet(D);this.optionContent=re(qe),this.optionClass=qe.optionClass,this.range=Ae(Oe.length,Ye,qe.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.dom.addEventListener("mousedown",rt=>{for(let at=rt.target,pt;at&&at!=this.dom;at=at.parentNode)if(at.nodeName=="LI"&&(pt=/-(\d+)$/.exec(at.id))&&+pt[1]<Oe.length){ve(Z,Oe[+pt[1]]),rt.preventDefault();return}}),this.list=this.dom.appendChild(this.createListBox(Oe,Ce.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})}mount(){this.updateSel()}update(Z){Z.state.field(this.stateField)!=Z.startState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let Z=this.view.state.field(this.stateField),te=Z.open;if((te.selected<this.range.from||te.selected>=this.range.to)&&(this.range=Ae(te.options.length,te.selected,this.view.state.facet(D).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(this.createListBox(te.options,Z.id,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfo)})),this.updateSelectedOption(te.selected)){this.info&&(this.info.remove(),this.info=null);let{completion:Ce}=te.options[te.selected],{info:Oe}=Ce;if(!Oe)return;let Ye=typeof Oe=="string"?document.createTextNode(Oe):Oe(Ce);if(!Ye)return;"then"in Ye?Ye.then(qe=>{qe&&this.view.state.field(this.stateField,!1)==Z&&this.addInfoPane(qe)}).catch(qe=>H.logException(this.view.state,qe,"completion info")):this.addInfoPane(Ye)}}addInfoPane(Z){let te=this.info=document.createElement("div");te.className="cm-tooltip cm-completionInfo",te.appendChild(Z),this.dom.appendChild(te),this.view.requestMeasure(this.placeInfo)}updateSelectedOption(Z){let te=null;for(let Ce=this.list.firstChild,Oe=this.range.from;Ce;Ce=Ce.nextSibling,Oe++)Oe==Z?Ce.hasAttribute("aria-selected")||(Ce.setAttribute("aria-selected","true"),te=Ce):Ce.hasAttribute("aria-selected")&&Ce.removeAttribute("aria-selected");return te&&f(this.list,te),te}measureInfo(){let Z=this.dom.querySelector("[aria-selected]");if(!Z||!this.info)return null;let te=this.dom.getBoundingClientRect(),Ce=this.info.getBoundingClientRect(),Oe=Z.getBoundingClientRect();if(Oe.top>Math.min(innerHeight,te.bottom)-10||Oe.bottom<Math.max(0,te.top)+10)return null;let Ye=Math.max(0,Math.min(Oe.top,innerHeight-Ce.height))-te.top,qe=this.view.textDirection==H.Direction.RTL,rt=te.left,at=innerWidth-te.right;return qe&&rt<Math.min(Ce.width,at)?qe=!1:!qe&&at<Math.min(Ce.width,rt)&&(qe=!0),{top:Ye,left:qe}}positionInfo(Z){this.info&&(this.info.style.top=(Z?Z.top:-1e6)+"px",Z&&(this.info.classList.toggle("cm-completionInfo-left",Z.left),this.info.classList.toggle("cm-completionInfo-right",!Z.left)))}createListBox(Z,te,Ce){const Oe=document.createElement("ul");Oe.id=te,Oe.setAttribute("role","listbox"),Oe.setAttribute("aria-expanded","true");for(let Ye=Ce.from;Ye<Ce.to;Ye++){let{completion:qe,match:rt}=Z[Ye];const at=Oe.appendChild(document.createElement("li"));at.id=te+"-"+Ye,at.setAttribute("role","option");let pt=this.optionClass(qe);pt&&(at.className=pt);for(let Et of this.optionContent){let Pt=Et(qe,this.view.state,rt);Pt&&at.appendChild(Pt)}}return Ce.from&&Oe.classList.add("cm-completionListIncompleteTop"),Ce.to<Z.length&&Oe.classList.add("cm-completionListIncompleteBottom"),Oe}}function c(Se){return Z=>new j(Z,Se)}function f(Se,Z){let te=Se.getBoundingClientRect(),Ce=Z.getBoundingClientRect();Ce.top<te.top?Se.scrollTop-=te.top-Ce.top:Ce.bottom>te.bottom&&(Se.scrollTop+=Ce.bottom-te.bottom)}const p=300;function x(Se){return(Se.boost||0)*100+(Se.apply?10:0)+(Se.info?5:0)+(Se.type?1:0)}function u(Se,Z){let te=[],Ce=0;for(let qe of Se)if(qe.hasResult())if(qe.result.filter===!1)for(let rt of qe.result.options)te.push(new J(rt,qe,[1e9-Ce++]));else{let rt=new q(Z.sliceDoc(qe.from,qe.to)),at;for(let pt of qe.result.options)(at=rt.match(pt.label))&&(pt.boost!=null&&(at[0]+=pt.boost),te.push(new J(pt,qe,at)))}let Oe=[],Ye=null;for(let qe of te.sort(je)){if(Oe.length==p)break;!Ye||Ye.label!=qe.completion.label||Ye.detail!=qe.completion.detail||Ye.type!=qe.completion.type||Ye.apply!=qe.completion.apply?Oe.push(qe):x(qe.completion)>x(Ye)&&(Oe[Oe.length-1]=qe),Ye=qe.completion}return Oe}class S{constructor(Z,te,Ce,Oe,Ye){this.options=Z,this.attrs=te,this.tooltip=Ce,this.timestamp=Oe,this.selected=Ye}setSelected(Z,te){return Z==this.selected||Z>=this.options.length?this:new S(this.options,U(te,Z),this.tooltip,this.timestamp,Z)}static build(Z,te,Ce,Oe,Ye){let qe=u(Z,te);if(!qe.length)return null;let rt=0;if(Oe&&Oe.selected){let at=Oe.options[Oe.selected].completion;for(let pt=0;pt<qe.length;pt++)if(qe[pt].completion==at){rt=pt;break}}return new S(qe,U(Ce,rt),{pos:Z.reduce((at,pt)=>pt.hasResult()?Math.min(at,pt.from):at,1e8),create:c(M),above:Ye.aboveCursor},Oe?Oe.timestamp:Date.now(),rt)}map(Z){return new S(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:Z.mapPos(this.tooltip.pos)}),this.timestamp,this.selected)}}class B{constructor(Z,te,Ce){this.active=Z,this.id=te,this.open=Ce}static start(){return new B(Te,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(Z){let{state:te}=Z,Ce=te.facet(D),Ye=(Ce.override||te.languageDataAt("autocomplete",Y(te)).map(Be)).map(rt=>(this.active.find(pt=>pt.source==rt)||new Qe(rt,this.active.some(pt=>pt.state!=0)?1:0)).update(Z,Ce));Ye.length==this.active.length&&Ye.every((rt,at)=>rt==this.active[at])&&(Ye=this.active);let qe=Z.selection||Ye.some(rt=>rt.hasResult()&&Z.changes.touchesRange(rt.from,rt.to))||!_(Ye,this.active)?S.build(Ye,te,this.id,this.open,Ce):this.open&&Z.docChanged?this.open.map(Z.changes):this.open;!qe&&Ye.every(rt=>rt.state!=1)&&Ye.some(rt=>rt.hasResult())&&(Ye=Ye.map(rt=>rt.hasResult()?new Qe(rt.source,0):rt));for(let rt of Z.effects)rt.is(v)&&(qe=qe&&qe.setSelected(rt.value,this.id));return Ye==this.active&&qe==this.open?this:new B(Ye,this.id,qe)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:O}}function _(Se,Z){if(Se==Z)return!0;for(let te=0,Ce=0;;){for(;te<Se.length&&!Se[te].hasResult;)te++;for(;Ce<Z.length&&!Z[Ce].hasResult;)Ce++;let Oe=te==Se.length,Ye=Ce==Z.length;if(Oe||Ye)return Oe==Ye;if(Se[te++].result!=Z[Ce++].result)return!1}}const O={"aria-autocomplete":"list"};function U(Se,Z){return{"aria-autocomplete":"list","aria-haspopup":"listbox","aria-activedescendant":Se+"-"+Z,"aria-controls":Se}}const Te=[];function je(Se,Z){let te=Z.match[0]-Se.match[0];return te||Se.completion.label.localeCompare(Z.completion.label)}function le(Se){return Se.isUserEvent("input.type")?"input":Se.isUserEvent("delete.backward")?"delete":null}class Qe{constructor(Z,te,Ce=-1){this.source=Z,this.state=te,this.explicitPos=Ce}hasResult(){return!1}update(Z,te){let Ce=le(Z),Oe=this;Ce?Oe=Oe.handleUserEvent(Z,Ce,te):Z.docChanged?Oe=Oe.handleChange(Z):Z.selection&&Oe.state!=0&&(Oe=new Qe(Oe.source,0));for(let Ye of Z.effects)if(Ye.is(nt))Oe=new Qe(Oe.source,1,Ye.value?Y(Z.state):-1);else if(Ye.is(ut))Oe=new Qe(Oe.source,0);else if(Ye.is(me))for(let qe of Ye.value)qe.source==Oe.source&&(Oe=qe);return Oe}handleUserEvent(Z,te,Ce){return te=="delete"||!Ce.activateOnTyping?this.map(Z.changes):new Qe(this.source,1)}handleChange(Z){return Z.changes.touchesRange(Y(Z.startState))?new Qe(this.source,0):this.map(Z.changes)}map(Z){return Z.empty||this.explicitPos<0?this:new Qe(this.source,this.state,Z.mapPos(this.explicitPos))}}class ot extends Qe{constructor(Z,te,Ce,Oe,Ye,qe){super(Z,2,te),this.result=Ce,this.from=Oe,this.to=Ye,this.span=qe}hasResult(){return!0}handleUserEvent(Z,te,Ce){let Oe=Z.changes.mapPos(this.from),Ye=Z.changes.mapPos(this.to,1),qe=Y(Z.state);if((this.explicitPos<0?qe<=Oe:qe<this.from)||qe>Ye||te=="delete"&&Y(Z.startState)==this.from)return new Qe(this.source,te=="input"&&Ce.activateOnTyping?1:0);let rt=this.explicitPos<0?-1:Z.changes.mapPos(this.explicitPos);return this.span&&(Oe==Ye||this.span.test(Z.state.sliceDoc(Oe,Ye)))?new ot(this.source,rt,this.result,Oe,Ye,this.span):new Qe(this.source,1,rt)}handleChange(Z){return Z.changes.touchesRange(this.from,this.to)?new Qe(this.source,0):this.map(Z.changes)}map(Z){return Z.empty?this:new ot(this.source,this.explicitPos<0?-1:Z.mapPos(this.explicitPos),this.result,Z.mapPos(this.from),Z.mapPos(this.to,1),this.span)}}const nt=g.StateEffect.define(),ut=g.StateEffect.define(),me=g.StateEffect.define({map(Se,Z){return Se.map(te=>te.map(Z))}}),v=g.StateEffect.define(),M=g.StateField.define({create(){return B.start()},update(Se,Z){return Se.update(Z)},provide:Se=>[G.showTooltip.from(Se,Z=>Z.tooltip),H.EditorView.contentAttributes.from(Se,Z=>Z.attrs)]}),P=75;function I(Se,Z="option"){return te=>{let Ce=te.state.field(M,!1);if(!Ce||!Ce.open||Date.now()-Ce.open.timestamp<P)return!1;let Oe=1,Ye;Z=="page"&&(Ye=G.getTooltip(te,Ce.open.tooltip))&&(Oe=Math.max(2,Math.floor(Ye.dom.offsetHeight/Ye.dom.querySelector("li").offsetHeight)-1));let qe=Ce.open.selected+Oe*(Se?1:-1),{length:rt}=Ce.open.options;return qe<0?qe=Z=="page"?0:rt-1:qe>=rt&&(qe=Z=="page"?rt-1:0),te.dispatch({effects:v.of(qe)}),!0}}const ie=Se=>{let Z=Se.state.field(M,!1);return Se.state.readOnly||!Z||!Z.open||Date.now()-Z.open.timestamp<P?!1:(ve(Se,Z.open.options[Z.open.selected]),!0)},fe=Se=>Se.state.field(M,!1)?(Se.dispatch({effects:nt.of(!0)}),!0):!1,Ve=Se=>{let Z=Se.state.field(M,!1);return!Z||!Z.active.some(te=>te.state!=0)?!1:(Se.dispatch({effects:ut.of(null)}),!0)};class he{constructor(Z,te){this.active=Z,this.context=te,this.time=Date.now(),this.updates=[],this.done=void 0}}const de=50,Ee=50,K=1e3,A=H.ViewPlugin.fromClass(class{constructor(Se){this.view=Se,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let Z of Se.state.field(M).active)Z.state==1&&this.startQuery(Z)}update(Se){let Z=Se.state.field(M);if(!Se.selectionSet&&!Se.docChanged&&Se.startState.field(M)==Z)return;let te=Se.transactions.some(Ce=>(Ce.selection||Ce.docChanged)&&!le(Ce));for(let Ce=0;Ce<this.running.length;Ce++){let Oe=this.running[Ce];if(te||Oe.updates.length+Se.transactions.length>Ee&&Date.now()-Oe.time>K){for(let Ye of Oe.context.abortListeners)try{Ye()}catch(qe){H.logException(this.view.state,qe)}Oe.context.abortListeners=null,this.running.splice(Ce--,1)}else Oe.updates.push(...Se.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=Z.active.some(Ce=>Ce.state==1&&!this.running.some(Oe=>Oe.active.source==Ce.source))?setTimeout(()=>this.startUpdate(),de):-1,this.composing!=0)for(let Ce of Se.transactions)le(Ce)=="input"?this.composing=2:this.composing==2&&Ce.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:Se}=this.view,Z=Se.field(M);for(let te of Z.active)te.state==1&&!this.running.some(Ce=>Ce.active.source==te.source)&&this.startQuery(te)}startQuery(Se){let{state:Z}=this.view,te=Y(Z),Ce=new ue(Z,te,Se.explicitPos==te),Oe=new he(Se,Ce);this.running.push(Oe),Promise.resolve(Se.source(Ce)).then(Ye=>{Oe.context.aborted||(Oe.done=Ye||null,this.scheduleAccept())},Ye=>{this.view.dispatch({effects:ut.of(null)}),H.logException(this.view.state,Ye)})}scheduleAccept(){this.running.every(Se=>Se.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),de))}accept(){var Se;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let Z=[],te=this.view.state.facet(D);for(let Ce=0;Ce<this.running.length;Ce++){let Oe=this.running[Ce];if(Oe.done===void 0)continue;if(this.running.splice(Ce--,1),Oe.done){let qe=new ot(Oe.active.source,Oe.active.explicitPos,Oe.done,Oe.done.from,(Se=Oe.done.to)!==null&&Se!==void 0?Se:Y(Oe.updates.length?Oe.updates[0].startState:this.view.state),Oe.done.span&&Oe.done.filter!==!1?Fe(Oe.done.span,!0):null);for(let rt of Oe.updates)qe=qe.update(rt,te);if(qe.hasResult()){Z.push(qe);continue}}let Ye=this.view.state.field(M).active.find(qe=>qe.source==Oe.active.source);if(Ye&&Ye.state==1)if(Oe.done==null){let qe=new Qe(Oe.active.source,0);for(let rt of Oe.updates)qe=qe.update(rt,te);qe.state!=1&&Z.push(qe)}else this.startQuery(Ye)}Z.length&&this.view.dispatch({effects:me.of(Z)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:nt.of(!1)}),20),this.composing=0}}}),z=H.EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer",padding:"1px 3px",lineHeight:1.2}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xB7\xB7\xB7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'\u0192'"}},".cm-completionIcon-class":{"&:after":{content:"'\u25CB'"}},".cm-completionIcon-interface":{"&:after":{content:"'\u25CC'"}},".cm-completionIcon-variable":{"&:after":{content:"'\u{1D465}'"}},".cm-completionIcon-constant":{"&:after":{content:"'\u{1D436}'"}},".cm-completionIcon-type":{"&:after":{content:"'\u{1D461}'"}},".cm-completionIcon-enum":{"&:after":{content:"'\u222A'"}},".cm-completionIcon-property":{"&:after":{content:"'\u25A1'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\u{1F511}\uFE0E'"}},".cm-completionIcon-namespace":{"&:after":{content:"'\u25A2'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class ye{constructor(Z,te,Ce,Oe){this.field=Z,this.line=te,this.from=Ce,this.to=Oe}}class De{constructor(Z,te,Ce){this.field=Z,this.from=te,this.to=Ce}map(Z){let te=Z.mapPos(this.from,-1,g.MapMode.TrackDel),Ce=Z.mapPos(this.to,1,g.MapMode.TrackDel);return te==null||Ce==null?null:new De(this.field,te,Ce)}}class s{constructor(Z,te){this.lines=Z,this.fieldPositions=te}instantiate(Z,te){let Ce=[],Oe=[te],Ye=Z.doc.lineAt(te),qe=/^\s*/.exec(Ye.text)[0];for(let at of this.lines){if(Ce.length){let pt=qe,Et=/^\t*/.exec(at)[0].length;for(let Pt=0;Pt<Et;Pt++)pt+=Z.facet(se.indentUnit);Oe.push(te+pt.length-Et),at=pt+at.slice(Et)}Ce.push(at),te+=at.length+1}let rt=this.fieldPositions.map(at=>new De(at.field,Oe[at.line]+at.from,Oe[at.line]+at.to));return{text:Ce,ranges:rt}}static parse(Z){let te=[],Ce=[],Oe=[],Ye;for(let qe of Z.split(/\r\n?|\n/)){for(;Ye=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(qe);){let rt=Ye[1]?+Ye[1]:null,at=Ye[2]||Ye[3]||"",pt=-1;for(let Et=0;Et<te.length;Et++)(rt!=null?te[Et].seq==rt:at&&te[Et].name==at)&&(pt=Et);if(pt<0){let Et=0;for(;Et<te.length&&(rt==null||te[Et].seq!=null&&te[Et].seq<rt);)Et++;te.splice(Et,0,{seq:rt,name:at}),pt=Et;for(let Pt of Oe)Pt.field>=pt&&Pt.field++}Oe.push(new ye(pt,Ce.length,Ye.index,Ye.index+at.length)),qe=qe.slice(0,Ye.index)+at+qe.slice(Ye.index+Ye[0].length)}Ce.push(qe)}return new s(Ce,Oe)}}let C=H.Decoration.widget({widget:new class extends H.WidgetType{toDOM(){let Se=document.createElement("span");return Se.className="cm-snippetFieldPosition",Se}ignoreEvent(){return!1}}}),l=H.Decoration.mark({class:"cm-snippetField"});class d{constructor(Z,te){this.ranges=Z,this.active=te,this.deco=H.Decoration.set(Z.map(Ce=>(Ce.from==Ce.to?C:l).range(Ce.from,Ce.to)))}map(Z){let te=[];for(let Ce of this.ranges){let Oe=Ce.map(Z);if(!Oe)return null;te.push(Oe)}return new d(te,this.active)}selectionInsideField(Z){return Z.ranges.every(te=>this.ranges.some(Ce=>Ce.field==this.active&&Ce.from<=te.from&&Ce.to>=te.to))}}const b=g.StateEffect.define({map(Se,Z){return Se&&Se.map(Z)}}),E=g.StateEffect.define(),L=g.StateField.define({create(){return null},update(Se,Z){for(let te of Z.effects){if(te.is(b))return te.value;if(te.is(E)&&Se)return new d(Se.ranges,te.value)}return Se&&Z.docChanged&&(Se=Se.map(Z.changes)),Se&&Z.selection&&!Se.selectionInsideField(Z.selection)&&(Se=null),Se},provide:Se=>H.EditorView.decorations.from(Se,Z=>Z?Z.deco:H.Decoration.none)});function V(Se,Z){return g.EditorSelection.create(Se.filter(te=>te.field==Z).map(te=>g.EditorSelection.range(te.from,te.to)))}function ge(Se){let Z=s.parse(Se);return(te,Ce,Oe,Ye)=>{let{text:qe,ranges:rt}=Z.instantiate(te.state,Oe),at={changes:{from:Oe,to:Ye,insert:g.Text.of(qe)}};if(rt.length&&(at.selection=V(rt,0)),rt.length>1){let pt=new d(rt,0),Et=at.effects=[b.of(pt)];te.state.field(L,!1)===void 0&&Et.push(g.StateEffect.appendConfig.of([L,N,ne,z]))}te.dispatch(te.state.update(at))}}function Ne(Se){return({state:Z,dispatch:te})=>{let Ce=Z.field(L,!1);if(!Ce||Se<0&&Ce.active==0)return!1;let Oe=Ce.active+Se,Ye=Se>0&&!Ce.ranges.some(qe=>qe.field==Oe+Se);return te(Z.update({selection:V(Ce.ranges,Oe),effects:b.of(Ye?null:new d(Ce.ranges,Oe))})),!0}}const Ue=({state:Se,dispatch:Z})=>Se.field(L,!1)?(Z(Se.update({effects:b.of(null)})),!0):!1,Ke=Ne(1),_e=Ne(-1),a=[{key:"Tab",run:Ke,shift:_e},{key:"Escape",run:Ue}],k=g.Facet.define({combine(Se){return Se.length?Se[0]:a}}),N=g.Prec.highest(H.keymap.compute([k],Se=>Se.facet(k)));function X(Se,Z){return Object.assign(Object.assign({},Z),{apply:ge(Se)})}const ne=H.EditorView.domEventHandlers({mousedown(Se,Z){let te=Z.state.field(L,!1),Ce;if(!te||(Ce=Z.posAtCoords({x:Se.clientX,y:Se.clientY}))==null)return!1;let Oe=te.ranges.find(Ye=>Ye.from<=Ce&&Ye.to>=Ce);return!Oe||Oe.field==te.active?!1:(Z.dispatch({selection:V(te.ranges,Oe.field),effects:b.of(te.ranges.some(Ye=>Ye.field>Oe.field)?new d(te.ranges,Oe.field):null)}),!0)}});function we(Se){let Z=Se.replace(/[\\[.+*?(){|^$]/g,"\\$&");try{return new RegExp(`[\\p{Alphabetic}\\p{Number}_${Z}]+`,"ug")}catch(te){return new RegExp(`[w${Z}]`,"g")}}function $e(Se,Z){return new RegExp(Z(Se.source),Se.unicode?"u":"")}const Ge=Object.create(null);function et(Se){return Ge[Se]||(Ge[Se]=new WeakMap)}function ht(Se,Z,te,Ce,Oe){for(let Ye=Se.iterLines(),qe=0;!Ye.next().done;){let{value:rt}=Ye,at;for(Z.lastIndex=0;at=Z.exec(rt);)if(!Ce[at[0]]&&qe+at.index!=Oe&&(te.push({type:"text",label:at[0]}),Ce[at[0]]=!0,te.length>=2e3))return;qe+=rt.length+1}}function gt(Se,Z,te,Ce,Oe){let Ye=Se.length>=1e3,qe=Ye&&Z.get(Se);if(qe)return qe;let rt=[],at=Object.create(null);if(Se.children){let pt=0;for(let Et of Se.children){if(Et.length>=1e3)for(let Pt of gt(Et,Z,te,Ce-pt,Oe-pt))at[Pt.label]||(at[Pt.label]=!0,rt.push(Pt));else ht(Et,te,rt,at,Oe-pt);pt+=Et.length+1}}else ht(Se,te,rt,at,Oe);return Ye&&rt.length<2e3&&Z.set(Se,rt),rt}const St=Se=>{let Z=Se.state.languageDataAt("wordChars",Se.pos).join(""),te=we(Z),Ce=Se.matchBefore($e(te,qe=>qe+"$"));if(!Ce&&!Se.explicit)return null;let Oe=Ce?Ce.from:Se.pos,Ye=gt(Se.state.doc,et(Z),te,5e4,Oe);return{from:Oe,options:Ye,span:$e(te,qe=>"^"+qe)}};function bt(Se={}){return[M,D.of(Se),A,Zt,z]}const Gt=[{key:"Ctrl-Space",run:fe},{key:"Escape",run:Ve},{key:"ArrowDown",run:I(!0)},{key:"ArrowUp",run:I(!1)},{key:"PageDown",run:I(!0,"page")},{key:"PageUp",run:I(!1,"page")},{key:"Enter",run:ie}],Zt=g.Prec.highest(H.keymap.computeN([D],Se=>Se.facet(D).defaultKeymap?[Gt]:[]));function Ht(Se){let Z=Se.field(M,!1);return Z&&Z.active.some(te=>te.state==1)?"pending":Z&&Z.active.some(te=>te.state!=0)?"active":null}const ni=new WeakMap;function si(Se){var Z;let te=(Z=Se.field(M,!1))===null||Z===void 0?void 0:Z.open;if(!te)return[];let Ce=ni.get(te.options);return Ce||ni.set(te.options,Ce=te.options.map(Oe=>Oe.completion)),Ce}function Ut(Se){var Z;let te=(Z=Se.field(M,!1))===null||Z===void 0?void 0:Z.open;return te?te.options[te.selected].completion:null}function ri(Se){var Z;let te=(Z=Se.field(M,!1))===null||Z===void 0?void 0:Z.open;return te?te.selected:null}function ei(Se){return v.of(Se)}m.CompletionContext=ue,m.acceptCompletion=ie,m.autocompletion=bt,m.clearSnippet=Ue,m.closeCompletion=Ve,m.completeAnyWord=St,m.completeFromList=$,m.completionKeymap=Gt,m.completionStatus=Ht,m.currentCompletions=si,m.ifIn=ce,m.ifNotIn=ae,m.moveCompletionSelection=I,m.nextSnippetField=Ke,m.pickedCompletion=xe,m.prevSnippetField=_e,m.selectedCompletion=Ut,m.selectedCompletionIndex=ri,m.setSelectedCompletion=ei,m.snippet=ge,m.snippetCompletion=X,m.snippetKeymap=k,m.startCompletion=fe},27278:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(23642),H=T(17040),G=T(40844),se=T(66367),F=T(80729),ue=T(95298),pe=T(18561),Q=T(76844),$=T(55333),ce=T(22502),ae=T(50526),J=T(96048),Y=T(63105),Fe=T(36819),xe=T(42426);const ve=[ue.lineNumbers(),ue.highlightActiveLineGutter(),g.highlightSpecialChars(),G.history(),se.foldGutter(),g.drawSelection(),g.dropCursor(),H.EditorState.allowMultipleSelections.of(!0),F.indentOnInput(),Fe.defaultHighlightStyle.fallback,Q.bracketMatching(),$.closeBrackets(),ae.autocompletion(),Y.rectangularSelection(),Y.crosshairCursor(),g.highlightActiveLine(),ce.highlightSelectionMatches(),g.keymap.of([...$.closeBracketsKeymap,...pe.defaultKeymap,...ce.searchKeymap,...G.historyKeymap,...se.foldKeymap,...J.commentKeymap,...ae.completionKeymap,...xe.lintKeymap])];Object.defineProperty(m,"EditorView",{enumerable:!0,get:function(){return g.EditorView}}),Object.defineProperty(m,"EditorState",{enumerable:!0,get:function(){return H.EditorState}}),m.basicSetup=ve},55333:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(23642),H=T(17040),G=T(88648),se=T(18907),F=T(80729);const ue={brackets:["(","[","{","'",'"'],before:")]}:;>"},pe=H.StateEffect.define({map(x,u){let S=u.mapPos(x,-1,H.MapMode.TrackAfter);return S==null?void 0:S}}),Q=H.StateEffect.define({map(x,u){return u.mapPos(x)}}),$=new class extends G.RangeValue{};$.startSide=1,$.endSide=-1;const ce=H.StateField.define({create(){return G.RangeSet.empty},update(x,u){if(u.selection){let S=u.state.doc.lineAt(u.selection.main.head).from,B=u.startState.doc.lineAt(u.startState.selection.main.head).from;S!=u.changes.mapPos(B,-1)&&(x=G.RangeSet.empty)}x=x.map(u.changes);for(let S of u.effects)S.is(pe)?x=x.update({add:[$.range(S.value,S.value+1)]}):S.is(Q)&&(x=x.update({filter:B=>B!=S.value}));return x}});function ae(){return[ve,ce]}const J="()[]{}<>";function Y(x){for(let u=0;u<J.length;u+=2)if(J.charCodeAt(u)==x)return J.charAt(u+1);return se.fromCodePoint(x<128?x:x+1)}function Fe(x,u){return x.languageDataAt("closeBrackets",u)[0]||ue}const xe=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),ve=g.EditorView.inputHandler.of((x,u,S,B)=>{if((xe?x.composing:x.compositionStarted)||x.state.readOnly)return!1;let _=x.state.selection.main;if(B.length>2||B.length==2&&se.codePointSize(se.codePointAt(B,0))==1||u!=_.from||S!=_.to)return!1;let O=q(x.state,B);return O?(x.dispatch(O),!0):!1}),Me=({state:x,dispatch:u})=>{if(x.readOnly)return!1;let B=Fe(x,x.selection.main.head).brackets||ue.brackets,_=null,O=x.changeByRange(U=>{if(U.empty){let Te=re(x.doc,U.head);for(let je of B)if(je==Te&&R(x.doc,U.head)==Y(se.codePointAt(je,0)))return{changes:{from:U.head-je.length,to:U.head+je.length},range:H.EditorSelection.cursor(U.head-je.length),userEvent:"delete.backward"}}return{range:_=U}});return _||u(x.update(O,{scrollIntoView:!0})),!_},Be=[{key:"Backspace",run:Me}];function q(x,u){let S=Fe(x,x.selection.main.head),B=S.brackets||ue.brackets;for(let _ of B){let O=Y(se.codePointAt(_,0));if(u==_)return O==_?c(x,_,B.indexOf(_+_+_)>-1):Ae(x,_,O,S.before||ue.before);if(u==O&&D(x,x.selection.main.from))return j(x,_,O)}return null}function D(x,u){let S=!1;return x.field(ce).between(0,x.doc.length,B=>{B==u&&(S=!0)}),S}function R(x,u){let S=x.sliceString(u,u+2);return S.slice(0,se.codePointSize(se.codePointAt(S,0)))}function re(x,u){let S=x.sliceString(u-2,u);return se.codePointSize(se.codePointAt(S,0))==S.length?S:S.slice(1)}function Ae(x,u,S,B){let _=null,O=x.changeByRange(U=>{if(!U.empty)return{changes:[{insert:u,from:U.from},{insert:S,from:U.to}],effects:pe.of(U.to+u.length),range:H.EditorSelection.range(U.anchor+u.length,U.head+u.length)};let Te=R(x.doc,U.head);return!Te||/\s/.test(Te)||B.indexOf(Te)>-1?{changes:{insert:u+S,from:U.head},effects:pe.of(U.head+u.length),range:H.EditorSelection.cursor(U.head+u.length)}:{range:_=U}});return _?null:x.update(O,{scrollIntoView:!0,userEvent:"input.type"})}function j(x,u,S){let B=null,_=x.selection.ranges.map(O=>O.empty&&R(x.doc,O.head)==S?H.EditorSelection.cursor(O.head+S.length):B=O);return B?null:x.update({selection:H.EditorSelection.create(_,x.selection.mainIndex),scrollIntoView:!0,effects:x.selection.ranges.map(({from:O})=>Q.of(O))})}function c(x,u,S){let B=null,_=x.changeByRange(O=>{if(!O.empty)return{changes:[{insert:u,from:O.from},{insert:u,from:O.to}],effects:pe.of(O.to+u.length),range:H.EditorSelection.range(O.anchor+u.length,O.head+u.length)};let U=O.head,Te=R(x.doc,U);if(Te==u){if(f(x,U))return{changes:{insert:u+u,from:U},effects:pe.of(U+u.length),range:H.EditorSelection.cursor(U+u.length)};if(D(x,U)){let je=S&&x.sliceDoc(U,U+u.length*3)==u+u+u;return{range:H.EditorSelection.cursor(U+u.length*(je?3:1)),effects:Q.of(U)}}}else{if(S&&x.sliceDoc(U-2*u.length,U)==u+u&&f(x,U-2*u.length))return{changes:{insert:u+u+u+u,from:U},effects:pe.of(U+u.length),range:H.EditorSelection.cursor(U+u.length)};if(x.charCategorizer(U)(Te)!=H.CharCategory.Word){let je=x.sliceDoc(U-1,U);if(je!=u&&x.charCategorizer(U)(je)!=H.CharCategory.Word&&!p(x,U,u))return{changes:{insert:u+u,from:U},effects:pe.of(U+u.length),range:H.EditorSelection.cursor(U+u.length)}}}return{range:B=O}});return B?null:x.update(_,{scrollIntoView:!0,userEvent:"input.type"})}function f(x,u){let S=F.syntaxTree(x).resolveInner(u+1);return S.parent&&S.from==u}function p(x,u,S){let B=F.syntaxTree(x).resolveInner(u,-1);for(let _=0;_<5;_++){if(x.sliceDoc(B.from,B.from+S.length)==S)return!0;let O=B.to==u&&B.parent;if(!O)break;B=O}return!1}m.closeBrackets=ae,m.closeBracketsKeymap=Be,m.deleteBracketPair=Me,m.insertBracket=q},18561:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040),H=T(18907),G=T(23642),se=T(76844),F=T(80729),ue=T(87897);function pe(y,ee){return g.EditorSelection.create(y.ranges.map(ee),y.mainIndex)}function Q(y,ee){return y.update({selection:ee,scrollIntoView:!0,userEvent:"select"})}function $({state:y,dispatch:ee},ke){let Le=pe(y.selection,ke);return Le.eq(y.selection)?!1:(ee(Q(y,Le)),!0)}function ce(y,ee){return g.EditorSelection.cursor(ee?y.to:y.from)}function ae(y,ee){return $(y,ke=>ke.empty?y.moveByChar(ke,ee):ce(ke,ee))}const J=y=>ae(y,y.textDirection!=G.Direction.LTR),Y=y=>ae(y,y.textDirection==G.Direction.LTR),Fe=y=>ae(y,!0),xe=y=>ae(y,!1);function ve(y,ee){return $(y,ke=>ke.empty?y.moveByGroup(ke,ee):ce(ke,ee))}const Me=y=>ve(y,y.textDirection!=G.Direction.LTR),Be=y=>ve(y,y.textDirection==G.Direction.LTR),q=y=>ve(y,!0),D=y=>ve(y,!1);function R(y,ee,ke){let Le=y.state.charCategorizer(ee.from);return y.moveByChar(ee,ke,Ze=>{let Ie=g.CharCategory.Space,Xe=ee.from,lt=!1,ct=!1,ft=!1,yt=xt=>{if(lt)return!1;Xe+=ke?xt.length:-xt.length;let Vt=Le(xt),vt;if(Ie==g.CharCategory.Space&&(Ie=Vt),Ie!=Vt)return!1;if(Ie==g.CharCategory.Word)if(xt.toLowerCase()==xt){if(!ke&&ct)return!1;ft=!0}else if(ft){if(ke)return!1;lt=!0}else{if(ct&&ke&&Le(vt=y.state.sliceDoc(Xe,Xe+1))==g.CharCategory.Word&&vt.toLowerCase()==vt)return!1;ct=!0}return!0};return yt(Ze),yt})}function re(y,ee){return $(y,ke=>ke.empty?R(y,ke,ee):ce(ke,ee))}const Ae=y=>re(y,!0),j=y=>re(y,!1);function c(y,ee,ke){if(ee.type.prop(ke))return!0;let Le=ee.to-ee.from;return Le&&(Le>2||/[^\s,.;:]/.test(y.sliceDoc(ee.from,ee.to)))||ee.firstChild}function f(y,ee,ke){let Le=F.syntaxTree(y).resolveInner(ee.head),Ze=ke?ue.NodeProp.closedBy:ue.NodeProp.openedBy;for(let ct=ee.head;;){let ft=ke?Le.childAfter(ct):Le.childBefore(ct);if(!ft)break;c(y,ft,Ze)?Le=ft:ct=ke?ft.to:ft.from}let Ie=Le.type.prop(Ze),Xe,lt;return Ie&&(Xe=ke?se.matchBrackets(y,Le.from,1):se.matchBrackets(y,Le.to,-1))&&Xe.matched?lt=ke?Xe.end.to:Xe.end.from:lt=ke?Le.to:Le.from,g.EditorSelection.cursor(lt,ke?-1:1)}const p=y=>$(y,ee=>f(y.state,ee,y.textDirection!=G.Direction.LTR)),x=y=>$(y,ee=>f(y.state,ee,y.textDirection==G.Direction.LTR));function u(y,ee){return $(y,ke=>{if(!ke.empty)return ce(ke,ee);let Le=y.moveVertically(ke,ee);return Le.head!=ke.head?Le:y.moveToLineBoundary(ke,ee)})}const S=y=>u(y,!1),B=y=>u(y,!0);function _(y,ee){let{state:ke}=y,Le=pe(ke.selection,Xe=>Xe.empty?y.moveVertically(Xe,ee,y.dom.clientHeight):ce(Xe,ee));if(Le.eq(ke.selection))return!1;let Ze=y.coordsAtPos(ke.selection.main.head),Ie=y.scrollDOM.getBoundingClientRect();return y.dispatch(Q(ke,Le),{effects:Ze&&Ze.top>Ie.top&&Ze.bottom<Ie.bottom?G.EditorView.scrollIntoView(Le.main.head,{y:"start",yMargin:Ze.top-Ie.top}):void 0}),!0}const O=y=>_(y,!1),U=y=>_(y,!0);function Te(y,ee,ke){let Le=y.lineBlockAt(ee.head),Ze=y.moveToLineBoundary(ee,ke);if(Ze.head==ee.head&&Ze.head!=(ke?Le.to:Le.from)&&(Ze=y.moveToLineBoundary(ee,ke,!1)),!ke&&Ze.head==Le.from&&Le.length){let Ie=/^\s*/.exec(y.state.sliceDoc(Le.from,Math.min(Le.from+100,Le.to)))[0].length;Ie&&ee.head!=Le.from+Ie&&(Ze=g.EditorSelection.cursor(Le.from+Ie))}return Ze}const je=y=>$(y,ee=>Te(y,ee,!0)),le=y=>$(y,ee=>Te(y,ee,!1)),Qe=y=>$(y,ee=>g.EditorSelection.cursor(y.lineBlockAt(ee.head).from,1)),ot=y=>$(y,ee=>g.EditorSelection.cursor(y.lineBlockAt(ee.head).to,-1));function nt(y,ee,ke){let Le=!1,Ze=pe(y.selection,Ie=>{let Xe=se.matchBrackets(y,Ie.head,-1)||se.matchBrackets(y,Ie.head,1)||Ie.head>0&&se.matchBrackets(y,Ie.head-1,1)||Ie.head<y.doc.length&&se.matchBrackets(y,Ie.head+1,-1);if(!Xe||!Xe.end)return Ie;Le=!0;let lt=Xe.start.from==Ie.head?Xe.end.to:Xe.end.from;return ke?g.EditorSelection.range(Ie.anchor,lt):g.EditorSelection.cursor(lt)});return Le?(ee(Q(y,Ze)),!0):!1}const ut=({state:y,dispatch:ee})=>nt(y,ee,!1),me=({state:y,dispatch:ee})=>nt(y,ee,!0);function v(y,ee){let ke=pe(y.state.selection,Le=>{let Ze=ee(Le);return g.EditorSelection.range(Le.anchor,Ze.head,Ze.goalColumn)});return ke.eq(y.state.selection)?!1:(y.dispatch(Q(y.state,ke)),!0)}function M(y,ee){return v(y,ke=>y.moveByChar(ke,ee))}const P=y=>M(y,y.textDirection!=G.Direction.LTR),I=y=>M(y,y.textDirection==G.Direction.LTR),ie=y=>M(y,!0),fe=y=>M(y,!1);function Ve(y,ee){return v(y,ke=>y.moveByGroup(ke,ee))}const he=y=>Ve(y,y.textDirection!=G.Direction.LTR),de=y=>Ve(y,y.textDirection==G.Direction.LTR),Ee=y=>Ve(y,!0),K=y=>Ve(y,!1);function A(y,ee){return v(y,ke=>R(y,ke,ee))}const z=y=>A(y,!0),ye=y=>A(y,!1),De=y=>v(y,ee=>f(y.state,ee,y.textDirection!=G.Direction.LTR)),s=y=>v(y,ee=>f(y.state,ee,y.textDirection==G.Direction.LTR));function C(y,ee){return v(y,ke=>y.moveVertically(ke,ee))}const l=y=>C(y,!1),d=y=>C(y,!0);function b(y,ee){return v(y,ke=>y.moveVertically(ke,ee,y.dom.clientHeight))}const E=y=>b(y,!1),L=y=>b(y,!0),V=y=>v(y,ee=>Te(y,ee,!0)),ge=y=>v(y,ee=>Te(y,ee,!1)),Ne=y=>v(y,ee=>g.EditorSelection.cursor(y.lineBlockAt(ee.head).from)),Ue=y=>v(y,ee=>g.EditorSelection.cursor(y.lineBlockAt(ee.head).to)),Ke=({state:y,dispatch:ee})=>(ee(Q(y,{anchor:0})),!0),_e=({state:y,dispatch:ee})=>(ee(Q(y,{anchor:y.doc.length})),!0),a=({state:y,dispatch:ee})=>(ee(Q(y,{anchor:y.selection.main.anchor,head:0})),!0),k=({state:y,dispatch:ee})=>(ee(Q(y,{anchor:y.selection.main.anchor,head:y.doc.length})),!0),N=({state:y,dispatch:ee})=>(ee(y.update({selection:{anchor:0,head:y.doc.length},userEvent:"select"})),!0),X=({state:y,dispatch:ee})=>{let ke=ri(y).map(({from:Le,to:Ze})=>g.EditorSelection.range(Le,Math.min(Ze+1,y.doc.length)));return ee(y.update({selection:g.EditorSelection.create(ke),userEvent:"select"})),!0},ne=({state:y,dispatch:ee})=>{let ke=pe(y.selection,Le=>{var Ze;let Ie=F.syntaxTree(y).resolveInner(Le.head,1);for(;!(Ie.from<Le.from&&Ie.to>=Le.to||Ie.to>Le.to&&Ie.from<=Le.from||!(!((Ze=Ie.parent)===null||Ze===void 0)&&Ze.parent));)Ie=Ie.parent;return g.EditorSelection.range(Ie.to,Ie.from)});return ee(Q(y,ke)),!0},we=({state:y,dispatch:ee})=>{let ke=y.selection,Le=null;return ke.ranges.length>1?Le=g.EditorSelection.create([ke.main]):ke.main.empty||(Le=g.EditorSelection.create([g.EditorSelection.cursor(ke.main.head)])),Le?(ee(Q(y,Le)),!0):!1};function $e({state:y,dispatch:ee},ke){if(y.readOnly)return!1;let Le="delete.selection",Ze=y.changeByRange(Ie=>{let{from:Xe,to:lt}=Ie;if(Xe==lt){let ct=ke(Xe);ct<Xe?Le="delete.backward":ct>Xe&&(Le="delete.forward"),Xe=Math.min(Xe,ct),lt=Math.max(lt,ct)}return Xe==lt?{range:Ie}:{changes:{from:Xe,to:lt},range:g.EditorSelection.cursor(Xe)}});return Ze.changes.empty?!1:(ee(y.update(Ze,{scrollIntoView:!0,userEvent:Le})),!0)}function Ge(y,ee,ke){if(y instanceof G.EditorView)for(let Le of y.pluginField(G.PluginField.atomicRanges))Le.between(ee,ee,(Ze,Ie)=>{Ze<ee&&Ie>ee&&(ee=ke?Ie:Ze)});return ee}const et=(y,ee)=>$e(y,ke=>{let{state:Le}=y,Ze=Le.doc.lineAt(ke),Ie,Xe;if(!ee&&ke>Ze.from&&ke<Ze.from+200&&!/[^ \t]/.test(Ie=Ze.text.slice(0,ke-Ze.from))){if(Ie[Ie.length-1]=="	")return ke-1;let lt=H.countColumn(Ie,Le.tabSize),ct=lt%F.getIndentUnit(Le)||F.getIndentUnit(Le);for(let ft=0;ft<ct&&Ie[Ie.length-1-ft]==" ";ft++)ke--;Xe=ke}else Xe=H.findClusterBreak(Ze.text,ke-Ze.from,ee,ee)+Ze.from,Xe==ke&&Ze.number!=(ee?Le.doc.lines:1)&&(Xe+=ee?1:-1);return Ge(y,Xe,ee)}),ht=y=>et(y,!1),gt=y=>et(y,!0),St=(y,ee)=>$e(y,ke=>{let Le=ke,{state:Ze}=y,Ie=Ze.doc.lineAt(Le),Xe=Ze.charCategorizer(Le);for(let lt=null;;){if(Le==(ee?Ie.to:Ie.from)){Le==ke&&Ie.number!=(ee?Ze.doc.lines:1)&&(Le+=ee?1:-1);break}let ct=H.findClusterBreak(Ie.text,Le-Ie.from,ee)+Ie.from,ft=Ie.text.slice(Math.min(Le,ct)-Ie.from,Math.max(Le,ct)-Ie.from),yt=Xe(ft);if(lt!=null&&yt!=lt)break;(ft!=" "||Le!=ke)&&(lt=yt),Le=ct}return Ge(y,Le,ee)}),bt=y=>St(y,!1),Gt=y=>St(y,!0),Zt=y=>$e(y,ee=>{let ke=y.lineBlockAt(ee).to;return Ge(y,ee<ke?ke:Math.min(y.state.doc.length,ee+1),!0)}),Ht=y=>$e(y,ee=>{let ke=y.lineBlockAt(ee).from;return Ge(y,ee>ke?ke:Math.max(0,ee-1),!1)}),ni=({state:y,dispatch:ee})=>{if(y.readOnly)return!1;let ke=[];for(let Le=0,Ze="",Ie=y.doc.iter();;){if(Ie.next(),Ie.lineBreak||Ie.done){let Xe=Ze.search(/\s+$/);if(Xe>-1&&ke.push({from:Le-(Ze.length-Xe),to:Le}),Ie.done)break;Ze=""}else Ze=Ie.value;Le+=Ie.value.length}return ke.length?(ee(y.update({changes:ke,userEvent:"delete"})),!0):!1},si=({state:y,dispatch:ee})=>{if(y.readOnly)return!1;let ke=y.changeByRange(Le=>({changes:{from:Le.from,to:Le.to,insert:H.Text.of(["",""])},range:g.EditorSelection.cursor(Le.from)}));return ee(y.update(ke,{scrollIntoView:!0,userEvent:"input"})),!0},Ut=({state:y,dispatch:ee})=>{if(y.readOnly)return!1;let ke=y.changeByRange(Le=>{if(!Le.empty||Le.from==0||Le.from==y.doc.length)return{range:Le};let Ze=Le.from,Ie=y.doc.lineAt(Ze),Xe=Ze==Ie.from?Ze-1:H.findClusterBreak(Ie.text,Ze-Ie.from,!1)+Ie.from,lt=Ze==Ie.to?Ze+1:H.findClusterBreak(Ie.text,Ze-Ie.from,!0)+Ie.from;return{changes:{from:Xe,to:lt,insert:y.doc.slice(Ze,lt).append(y.doc.slice(Xe,Ze))},range:g.EditorSelection.cursor(lt)}});return ke.changes.empty?!1:(ee(y.update(ke,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function ri(y){let ee=[],ke=-1;for(let Le of y.selection.ranges){let Ze=y.doc.lineAt(Le.from),Ie=y.doc.lineAt(Le.to);if(!Le.empty&&Le.to==Ie.from&&(Ie=y.doc.lineAt(Le.to-1)),ke>=Ze.number){let Xe=ee[ee.length-1];Xe.to=Ie.to,Xe.ranges.push(Le)}else ee.push({from:Ze.from,to:Ie.to,ranges:[Le]});ke=Ie.number+1}return ee}function ei(y,ee,ke){if(y.readOnly)return!1;let Le=[],Ze=[];for(let Ie of ri(y)){if(ke?Ie.to==y.doc.length:Ie.from==0)continue;let Xe=y.doc.lineAt(ke?Ie.to+1:Ie.from-1),lt=Xe.length+1;if(ke){Le.push({from:Ie.to,to:Xe.to},{from:Ie.from,insert:Xe.text+y.lineBreak});for(let ct of Ie.ranges)Ze.push(g.EditorSelection.range(Math.min(y.doc.length,ct.anchor+lt),Math.min(y.doc.length,ct.head+lt)))}else{Le.push({from:Xe.from,to:Ie.from},{from:Ie.to,insert:y.lineBreak+Xe.text});for(let ct of Ie.ranges)Ze.push(g.EditorSelection.range(ct.anchor-lt,ct.head-lt))}}return Le.length?(ee(y.update({changes:Le,scrollIntoView:!0,selection:g.EditorSelection.create(Ze,y.selection.mainIndex),userEvent:"move.line"})),!0):!1}const Se=({state:y,dispatch:ee})=>ei(y,ee,!1),Z=({state:y,dispatch:ee})=>ei(y,ee,!0);function te(y,ee,ke){if(y.readOnly)return!1;let Le=[];for(let Ze of ri(y))ke?Le.push({from:Ze.from,insert:y.doc.slice(Ze.from,Ze.to)+y.lineBreak}):Le.push({from:Ze.to,insert:y.lineBreak+y.doc.slice(Ze.from,Ze.to)});return ee(y.update({changes:Le,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const Ce=({state:y,dispatch:ee})=>te(y,ee,!1),Oe=({state:y,dispatch:ee})=>te(y,ee,!0),Ye=y=>{if(y.state.readOnly)return!1;let{state:ee}=y,ke=ee.changes(ri(ee).map(({from:Ze,to:Ie})=>(Ze>0?Ze--:Ie<ee.doc.length&&Ie++,{from:Ze,to:Ie}))),Le=pe(ee.selection,Ze=>y.moveVertically(Ze,!0)).map(ke);return y.dispatch({changes:ke,selection:Le,scrollIntoView:!0,userEvent:"delete.line"}),!0},qe=({state:y,dispatch:ee})=>(ee(y.update(y.replaceSelection(y.lineBreak),{scrollIntoView:!0,userEvent:"input"})),!0);function rt(y,ee){if(/\(\)|\[\]|\{\}/.test(y.sliceDoc(ee-1,ee+1)))return{from:ee,to:ee};let ke=F.syntaxTree(y).resolveInner(ee),Le=ke.childBefore(ee),Ze=ke.childAfter(ee),Ie;return Le&&Ze&&Le.to<=ee&&Ze.from>=ee&&(Ie=Le.type.prop(ue.NodeProp.closedBy))&&Ie.indexOf(Ze.name)>-1&&y.doc.lineAt(Le.to).from==y.doc.lineAt(Ze.from).from?{from:Le.to,to:Ze.from}:null}const at=Et(!1),pt=Et(!0);function Et(y){return({state:ee,dispatch:ke})=>{if(ee.readOnly)return!1;let Le=ee.changeByRange(Ze=>{let{from:Ie,to:Xe}=Ze,lt=ee.doc.lineAt(Ie),ct=!y&&Ie==Xe&&rt(ee,Ie);y&&(Ie=Xe=(Xe<=lt.to?lt:ee.doc.lineAt(Xe)).to);let ft=new F.IndentContext(ee,{simulateBreak:Ie,simulateDoubleBreak:!!ct}),yt=F.getIndentation(ft,Ie);for(yt==null&&(yt=/^\s*/.exec(ee.doc.lineAt(Ie).text)[0].length);Xe<lt.to&&/\s/.test(lt.text[Xe-lt.from]);)Xe++;ct?{from:Ie,to:Xe}=ct:Ie>lt.from&&Ie<lt.from+100&&!/\S/.test(lt.text.slice(0,Ie))&&(Ie=lt.from);let xt=["",F.indentString(ee,yt)];return ct&&xt.push(F.indentString(ee,ft.lineIndent(lt.from,-1))),{changes:{from:Ie,to:Xe,insert:H.Text.of(xt)},range:g.EditorSelection.cursor(Ie+1+xt[1].length)}});return ke(ee.update(Le,{scrollIntoView:!0,userEvent:"input"})),!0}}function Pt(y,ee){let ke=-1;return y.changeByRange(Le=>{let Ze=[];for(let Xe=Le.from;Xe<=Le.to;){let lt=y.doc.lineAt(Xe);lt.number>ke&&(Le.empty||Le.to>lt.from)&&(ee(lt,Ze,Le),ke=lt.number),Xe=lt.to+1}let Ie=y.changes(Ze);return{changes:Ze,range:g.EditorSelection.range(Ie.mapPos(Le.anchor,1),Ie.mapPos(Le.head,1))}})}const oi=({state:y,dispatch:ee})=>{if(y.readOnly)return!1;let ke=Object.create(null),Le=new F.IndentContext(y,{overrideIndentation:Ie=>{let Xe=ke[Ie];return Xe==null?-1:Xe}}),Ze=Pt(y,(Ie,Xe,lt)=>{let ct=F.getIndentation(Le,Ie.from);if(ct==null)return;/\S/.test(Ie.text)||(ct=0);let ft=/^\s*/.exec(Ie.text)[0],yt=F.indentString(y,ct);(ft!=yt||lt.from<Ie.from+ft.length)&&(ke[Ie.from]=ct,Xe.push({from:Ie.from,to:Ie.from+ft.length,insert:yt}))});return Ze.changes.empty||ee(y.update(Ze,{userEvent:"indent"})),!0},$t=({state:y,dispatch:ee})=>y.readOnly?!1:(ee(y.update(Pt(y,(ke,Le)=>{Le.push({from:ke.from,insert:y.facet(F.indentUnit)})}),{userEvent:"input.indent"})),!0),ti=({state:y,dispatch:ee})=>y.readOnly?!1:(ee(y.update(Pt(y,(ke,Le)=>{let Ze=/^\s*/.exec(ke.text)[0];if(!Ze)return;let Ie=H.countColumn(Ze,y.tabSize),Xe=0,lt=F.indentString(y,Math.max(0,Ie-F.getIndentUnit(y)));for(;Xe<Ze.length&&Xe<lt.length&&Ze.charCodeAt(Xe)==lt.charCodeAt(Xe);)Xe++;Le.push({from:ke.from+Xe,to:ke.from+Ze.length,insert:lt.slice(Xe)})}),{userEvent:"delete.dedent"})),!0),Xt=({state:y,dispatch:ee})=>y.selection.ranges.some(ke=>!ke.empty)?$t({state:y,dispatch:ee}):(ee(y.update(y.replaceSelection("	"),{scrollIntoView:!0,userEvent:"input"})),!0),Je=[{key:"Ctrl-b",run:J,shift:P,preventDefault:!0},{key:"Ctrl-f",run:Y,shift:I},{key:"Ctrl-p",run:S,shift:l},{key:"Ctrl-n",run:B,shift:d},{key:"Ctrl-a",run:Qe,shift:Ne},{key:"Ctrl-e",run:ot,shift:Ue},{key:"Ctrl-d",run:gt},{key:"Ctrl-h",run:ht},{key:"Ctrl-k",run:Zt},{key:"Ctrl-Alt-h",run:bt},{key:"Ctrl-o",run:si},{key:"Ctrl-t",run:Ut},{key:"Ctrl-v",run:U}],Re=[{key:"ArrowLeft",run:J,shift:P,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:Me,shift:he},{mac:"Cmd-ArrowLeft",run:le,shift:ge},{key:"ArrowRight",run:Y,shift:I,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:Be,shift:de},{mac:"Cmd-ArrowRight",run:je,shift:V},{key:"ArrowUp",run:S,shift:l,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ke,shift:a},{mac:"Ctrl-ArrowUp",run:O,shift:E},{key:"ArrowDown",run:B,shift:d,preventDefault:!0},{mac:"Cmd-ArrowDown",run:_e,shift:k},{mac:"Ctrl-ArrowDown",run:U,shift:L},{key:"PageUp",run:O,shift:E},{key:"PageDown",run:U,shift:L},{key:"Home",run:le,shift:ge},{key:"Mod-Home",run:Ke,shift:a},{key:"End",run:je,shift:V},{key:"Mod-End",run:_e,shift:k},{key:"Enter",run:at},{key:"Mod-a",run:N},{key:"Backspace",run:ht,shift:ht},{key:"Delete",run:gt},{key:"Mod-Backspace",mac:"Alt-Backspace",run:bt},{key:"Mod-Delete",mac:"Alt-Delete",run:Gt},{mac:"Mod-Backspace",run:Ht},{mac:"Mod-Delete",run:Zt}].concat(Je.map(y=>({mac:y.key,run:y.run,shift:y.shift}))),He=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:p,shift:De},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:x,shift:s},{key:"Alt-ArrowUp",run:Se},{key:"Shift-Alt-ArrowUp",run:Ce},{key:"Alt-ArrowDown",run:Z},{key:"Shift-Alt-ArrowDown",run:Oe},{key:"Escape",run:we},{key:"Mod-Enter",run:pt},{key:"Alt-l",mac:"Ctrl-l",run:X},{key:"Mod-i",run:ne,preventDefault:!0},{key:"Mod-[",run:ti},{key:"Mod-]",run:$t},{key:"Mod-Alt-\\",run:oi},{key:"Shift-Mod-k",run:Ye},{key:"Shift-Mod-\\",run:ut}].concat(Re),ze={key:"Tab",run:$t,shift:ti};m.copyLineDown=Oe,m.copyLineUp=Ce,m.cursorCharBackward=xe,m.cursorCharForward=Fe,m.cursorCharLeft=J,m.cursorCharRight=Y,m.cursorDocEnd=_e,m.cursorDocStart=Ke,m.cursorGroupBackward=D,m.cursorGroupForward=q,m.cursorGroupLeft=Me,m.cursorGroupRight=Be,m.cursorLineBoundaryBackward=le,m.cursorLineBoundaryForward=je,m.cursorLineDown=B,m.cursorLineEnd=ot,m.cursorLineStart=Qe,m.cursorLineUp=S,m.cursorMatchingBracket=ut,m.cursorPageDown=U,m.cursorPageUp=O,m.cursorSubwordBackward=j,m.cursorSubwordForward=Ae,m.cursorSyntaxLeft=p,m.cursorSyntaxRight=x,m.defaultKeymap=He,m.deleteCharBackward=ht,m.deleteCharForward=gt,m.deleteGroupBackward=bt,m.deleteGroupForward=Gt,m.deleteLine=Ye,m.deleteToLineEnd=Zt,m.deleteToLineStart=Ht,m.deleteTrailingWhitespace=ni,m.emacsStyleKeymap=Je,m.indentLess=ti,m.indentMore=$t,m.indentSelection=oi,m.indentWithTab=ze,m.insertBlankLine=pt,m.insertNewline=qe,m.insertNewlineAndIndent=at,m.insertTab=Xt,m.moveLineDown=Z,m.moveLineUp=Se,m.selectAll=N,m.selectCharBackward=fe,m.selectCharForward=ie,m.selectCharLeft=P,m.selectCharRight=I,m.selectDocEnd=k,m.selectDocStart=a,m.selectGroupBackward=K,m.selectGroupForward=Ee,m.selectGroupLeft=he,m.selectGroupRight=de,m.selectLine=X,m.selectLineBoundaryBackward=ge,m.selectLineBoundaryForward=V,m.selectLineDown=d,m.selectLineEnd=Ue,m.selectLineStart=Ne,m.selectLineUp=l,m.selectMatchingBracket=me,m.selectPageDown=L,m.selectPageUp=E,m.selectParentSyntax=ne,m.selectSubwordBackward=ye,m.selectSubwordForward=z,m.selectSyntaxLeft=De,m.selectSyntaxRight=s,m.simplifySelection=we,m.splitLine=si,m.standardKeymap=Re,m.transposeChars=Ut},96048:function(We,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});const T=ve=>{let Me=ce(ve.state);return Me.line?H(ve):Me.block?Q(ve):!1};function g(ve,Me){return({state:Be,dispatch:q})=>{if(Be.readOnly)return!1;let D=ve(Me,Be);return D?(q(Be.update(D)),!0):!1}}const H=g(xe,0),G=g(xe,1),se=g(xe,2),F=g(Fe,0),ue=g(Fe,1),pe=g(Fe,2),Q=g((ve,Me)=>Fe(ve,Me,Y(Me)),0),$=[{key:"Mod-/",run:T},{key:"Alt-A",run:F}];function ce(ve,Me=ve.selection.main.head){let Be=ve.languageDataAt("commentTokens",Me);return Be.length?Be[0]:{}}const ae=50;function J(ve,{open:Me,close:Be},q,D){let R=ve.sliceDoc(q-ae,q),re=ve.sliceDoc(D,D+ae),Ae=/\s*$/.exec(R)[0].length,j=/^\s*/.exec(re)[0].length,c=R.length-Ae;if(R.slice(c-Me.length,c)==Me&&re.slice(j,j+Be.length)==Be)return{open:{pos:q-Ae,margin:Ae&&1},close:{pos:D+j,margin:j&&1}};let f,p;D-q<=2*ae?f=p=ve.sliceDoc(q,D):(f=ve.sliceDoc(q,q+ae),p=ve.sliceDoc(D-ae,D));let x=/^\s*/.exec(f)[0].length,u=/\s*$/.exec(p)[0].length,S=p.length-u-Be.length;return f.slice(x,x+Me.length)==Me&&p.slice(S,S+Be.length)==Be?{open:{pos:q+x+Me.length,margin:/\s/.test(f.charAt(x+Me.length))?1:0},close:{pos:D-u-Be.length,margin:/\s/.test(p.charAt(S-1))?1:0}}:null}function Y(ve){let Me=[];for(let Be of ve.selection.ranges){let q=ve.doc.lineAt(Be.from),D=Be.to<=q.to?q:ve.doc.lineAt(Be.to),R=Me.length-1;R>=0&&Me[R].to>q.from?Me[R].to=D.to:Me.push({from:q.from,to:D.to})}return Me}function Fe(ve,Me,Be=Me.selection.ranges){let q=Be.map(R=>ce(Me,R.from).block);if(!q.every(R=>R))return null;let D=Be.map((R,re)=>J(Me,q[re],R.from,R.to));if(ve!=2&&!D.every(R=>R))return{changes:Me.changes(Be.map((R,re)=>D[re]?[]:[{from:R.from,insert:q[re].open+" "},{from:R.to,insert:" "+q[re].close}]))};if(ve!=1&&D.some(R=>R)){let R=[];for(let re=0,Ae;re<D.length;re++)if(Ae=D[re]){let j=q[re],{open:c,close:f}=Ae;R.push({from:c.pos-j.open.length,to:c.pos+c.margin},{from:f.pos-f.margin,to:f.pos+j.close.length})}return{changes:R}}return null}function xe(ve,Me,Be=Me.selection.ranges){let q=[],D=-1;for(let{from:R,to:re}of Be){let Ae=q.length,j=1e9;for(let c=R;c<=re;){let f=Me.doc.lineAt(c);if(f.from>D&&(R==re||re>f.from)){D=f.from;let p=ce(Me,c).line;if(!p)continue;let x=/^\s*/.exec(f.text)[0].length,u=x==f.length,S=f.text.slice(x,x+p.length)==p?x:-1;x<f.text.length&&x<j&&(j=x),q.push({line:f,comment:S,token:p,indent:x,empty:u,single:!1})}c=f.to+1}if(j<1e9)for(let c=Ae;c<q.length;c++)q[c].indent<q[c].line.text.length&&(q[c].indent=j);q.length==Ae+1&&(q[Ae].single=!0)}if(ve!=2&&q.some(R=>R.comment<0&&(!R.empty||R.single))){let R=[];for(let{line:Ae,token:j,indent:c,empty:f,single:p}of q)(p||!f)&&R.push({from:Ae.from+c,insert:j+" "});let re=Me.changes(R);return{changes:re,selection:Me.selection.map(re,1)}}else if(ve!=1&&q.some(R=>R.comment>=0)){let R=[];for(let{line:re,comment:Ae,token:j}of q)if(Ae>=0){let c=re.from+Ae,f=c+j.length;re.text[f-re.from]==" "&&f++,R.push({from:c,to:f})}return{changes:R}}return null}m.blockComment=ue,m.blockUncomment=pe,m.commentKeymap=$,m.lineComment=G,m.lineUncomment=se,m.toggleBlockComment=F,m.toggleBlockCommentByLine=Q,m.toggleComment=T,m.toggleLineComment=H},66367:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040),H=T(23642),G=T(80729),se=T(95298),F=T(88648);function ue(u,S){let B=S.mapPos(u.from,1),_=S.mapPos(u.to,-1);return B>=_?void 0:{from:B,to:_}}const pe=g.StateEffect.define({map:ue}),Q=g.StateEffect.define({map:ue});function $(u){let S=[];for(let{head:B}of u.state.selection.ranges)S.some(_=>_.from<=B&&_.to>=B)||S.push(u.lineBlockAt(B));return S}const ce=g.StateField.define({create(){return H.Decoration.none},update(u,S){u=u.map(S.changes);for(let B of S.effects)B.is(pe)&&!Y(u,B.value.from,B.value.to)?u=u.update({add:[j.range(B.value.from,B.value.to)]}):B.is(Q)&&(u=u.update({filter:(_,O)=>B.value.from!=_||B.value.to!=O,filterFrom:B.value.from,filterTo:B.value.to}));if(S.selection){let B=!1,{head:_}=S.selection.main;u.between(_,_,(O,U)=>{O<_&&U>_&&(B=!0)}),B&&(u=u.update({filterFrom:_,filterTo:_,filter:(O,U)=>U<=_||O>=_}))}return u},provide:u=>H.EditorView.decorations.from(u)});function ae(u){return u.field(ce,!1)||F.RangeSet.empty}function J(u,S,B){var _;let O=null;return(_=u.field(ce,!1))===null||_===void 0||_.between(S,B,(U,Te)=>{(!O||O.from>U)&&(O={from:U,to:Te})}),O}function Y(u,S,B){let _=!1;return u.between(S,S,(O,U)=>{O==S&&U==B&&(_=!0)}),_}function Fe(u,S){return u.field(ce,!1)?S:S.concat(g.StateEffect.appendConfig.of(Ae()))}const xe=u=>{for(let S of $(u)){let B=G.foldable(u.state,S.from,S.to);if(B)return u.dispatch({effects:Fe(u.state,[pe.of(B),Me(u,B)])}),!0}return!1},ve=u=>{if(!u.state.field(ce,!1))return!1;let S=[];for(let B of $(u)){let _=J(u.state,B.from,B.to);_&&S.push(Q.of(_),Me(u,_,!1))}return S.length&&u.dispatch({effects:S}),S.length>0};function Me(u,S,B=!0){let _=u.state.doc.lineAt(S.from).number,O=u.state.doc.lineAt(S.to).number;return H.EditorView.announce.of(`${u.state.phrase(B?"Folded lines":"Unfolded lines")} ${_} ${u.state.phrase("to")} ${O}.`)}const Be=u=>{let{state:S}=u,B=[];for(let _=0;_<S.doc.length;){let O=u.lineBlockAt(_),U=G.foldable(S,O.from,O.to);U&&B.push(pe.of(U)),_=(U?u.lineBlockAt(U.to):O).to+1}return B.length&&u.dispatch({effects:Fe(u.state,B)}),!!B.length},q=u=>{let S=u.state.field(ce,!1);if(!S||!S.size)return!1;let B=[];return S.between(0,u.state.doc.length,(_,O)=>{B.push(Q.of({from:_,to:O}))}),u.dispatch({effects:B}),!0},D=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:xe},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:ve},{key:"Ctrl-Alt-[",run:Be},{key:"Ctrl-Alt-]",run:q}],R={placeholderDOM:null,placeholderText:"\u2026"},re=g.Facet.define({combine(u){return g.combineConfig(u,R)}});function Ae(u){let S=[ce,x];return u&&S.push(re.of(u)),S}const j=H.Decoration.replace({widget:new class extends H.WidgetType{toDOM(u){let{state:S}=u,B=S.facet(re),_=U=>{let Te=u.lineBlockAt(u.posAtDOM(U.target)),je=J(u.state,Te.from,Te.to);je&&u.dispatch({effects:Q.of(je)}),U.preventDefault()};if(B.placeholderDOM)return B.placeholderDOM(u,_);let O=document.createElement("span");return O.textContent=B.placeholderText,O.setAttribute("aria-label",S.phrase("folded code")),O.title=S.phrase("unfold"),O.className="cm-foldPlaceholder",O.onclick=_,O}}}),c={openText:"\u2304",closedText:"\u203A",markerDOM:null,domEventHandlers:{}};class f extends se.GutterMarker{constructor(S,B){super(),this.config=S,this.open=B}eq(S){return this.config==S.config&&this.open==S.open}toDOM(S){if(this.config.markerDOM)return this.config.markerDOM(this.open);let B=document.createElement("span");return B.textContent=this.open?this.config.openText:this.config.closedText,B.title=S.state.phrase(this.open?"Fold line":"Unfold line"),B}}function p(u={}){let S=Object.assign(Object.assign({},c),u),B=new f(S,!0),_=new f(S,!1),O=H.ViewPlugin.fromClass(class{constructor(Te){this.from=Te.viewport.from,this.markers=this.buildMarkers(Te)}update(Te){(Te.docChanged||Te.viewportChanged||Te.startState.facet(G.language)!=Te.state.facet(G.language)||Te.startState.field(ce,!1)!=Te.state.field(ce,!1)||G.syntaxTree(Te.startState)!=G.syntaxTree(Te.state))&&(this.markers=this.buildMarkers(Te.view))}buildMarkers(Te){let je=new F.RangeSetBuilder;for(let le of Te.viewportLineBlocks){let Qe=J(Te.state,le.from,le.to)?_:G.foldable(Te.state,le.from,le.to)?B:null;Qe&&je.add(le.from,le.from,Qe)}return je.finish()}}),{domEventHandlers:U}=S;return[O,se.gutter({class:"cm-foldGutter",markers(Te){var je;return((je=Te.plugin(O))===null||je===void 0?void 0:je.markers)||F.RangeSet.empty},initialSpacer(){return new f(S,!1)},domEventHandlers:Object.assign(Object.assign({},U),{click:(Te,je,le)=>{if(U.click&&U.click(Te,je,le))return!0;let Qe=J(Te.state,je.from,je.to);if(Qe)return Te.dispatch({effects:Q.of(Qe)}),!0;let ot=G.foldable(Te.state,je.from,je.to);return ot?(Te.dispatch({effects:pe.of(ot)}),!0):!1}})}),Ae()]}const x=H.EditorView.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});m.codeFolding=Ae,m.foldAll=Be,m.foldCode=xe,m.foldEffect=pe,m.foldGutter=p,m.foldKeymap=D,m.foldedRanges=ae,m.unfoldAll=q,m.unfoldCode=ve,m.unfoldEffect=Q},95298:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(23642),H=T(88648),G=T(17040);class se extends H.RangeValue{compare(S){return this==S||this.constructor==S.constructor&&this.eq(S)}eq(S){return!1}destroy(S){}}se.prototype.elementClass="",se.prototype.toDOM=void 0,se.prototype.mapMode=G.MapMode.TrackBefore,se.prototype.startSide=se.prototype.endSide=-1,se.prototype.point=!0;const F=G.Facet.define(),ue={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>H.RangeSet.empty,lineMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},pe=G.Facet.define();function Q(u){return[ae(),pe.of(Object.assign(Object.assign({},ue),u))]}const $=g.EditorView.baseTheme({".cm-gutters":{display:"flex",height:"100%",boxSizing:"border-box",left:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"}}),ce=G.Facet.define({combine:u=>u.some(S=>S)});function ae(u){let S=[J,$];return u&&u.fixed===!1&&S.push(ce.of(!0)),S}const J=g.ViewPlugin.fromClass(class{constructor(u){this.view=u,this.prevViewport=u.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight+"px",this.gutters=u.state.facet(pe).map(S=>new ve(u,S));for(let S of this.gutters)this.dom.appendChild(S.dom);this.fixed=!u.state.facet(ce),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),u.scrollDOM.insertBefore(this.dom,u.contentDOM)}update(u){if(this.updateGutters(u)){let S=this.prevViewport,B=u.view.viewport,_=Math.min(S.to,B.to)-Math.max(S.from,B.from);this.syncGutters(_<(B.to-B.from)*.8)}u.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(ce)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=u.view.viewport}syncGutters(u){let S=this.dom.nextSibling;u&&this.dom.remove();let B=H.RangeSet.iter(this.view.state.facet(F),this.view.viewport.from),_=[],O=this.gutters.map(U=>new xe(U,this.view.viewport,-this.view.documentPadding.top));for(let U of this.view.viewportLineBlocks){let Te;if(Array.isArray(U.type)){for(let je of U.type)if(je.type==g.BlockType.Text){Te=je;break}}else Te=U.type==g.BlockType.Text?U:void 0;if(Te){_.length&&(_=[]),Fe(B,_,U.from);for(let je of O)je.line(this.view,Te,_)}}for(let U of O)U.finish();u&&this.view.scrollDOM.insertBefore(this.dom,S)}updateGutters(u){let S=u.startState.facet(pe),B=u.state.facet(pe),_=u.docChanged||u.heightChanged||u.viewportChanged||!H.RangeSet.eq(u.startState.facet(F),u.state.facet(F),u.view.viewport.from,u.view.viewport.to);if(S==B)for(let O of this.gutters)O.update(u)&&(_=!0);else{_=!0;let O=[];for(let U of B){let Te=S.indexOf(U);Te<0?O.push(new ve(this.view,U)):(this.gutters[Te].update(u),O.push(this.gutters[Te]))}for(let U of this.gutters)U.dom.remove(),O.indexOf(U)<0&&U.destroy();for(let U of O)this.dom.appendChild(U.dom);this.gutters=O}return _}destroy(){for(let u of this.gutters)u.destroy();this.dom.remove()}},{provide:g.PluginField.scrollMargins.from(u=>u.gutters.length==0||!u.fixed?null:u.view.textDirection==g.Direction.LTR?{left:u.dom.offsetWidth}:{right:u.dom.offsetWidth})});function Y(u){return Array.isArray(u)?u:[u]}function Fe(u,S,B){for(;u.value&&u.from<=B;)u.from==B&&S.push(u.value),u.next()}class xe{constructor(S,B,_){this.gutter=S,this.height=_,this.localMarkers=[],this.i=0,this.cursor=H.RangeSet.iter(S.markers,B.from)}line(S,B,_){this.localMarkers.length&&(this.localMarkers=[]),Fe(this.cursor,this.localMarkers,B.from);let O=_.length?this.localMarkers.concat(_):this.localMarkers,U=this.gutter.config.lineMarker(S,B,O);U&&O.unshift(U);let Te=this.gutter;if(O.length==0&&!Te.config.renderEmptyElements)return;let je=B.top-this.height;if(this.i==Te.elements.length){let le=new Me(S,B.height,je,O);Te.elements.push(le),Te.dom.appendChild(le.dom)}else Te.elements[this.i].update(S,B.height,je,O);this.height=B.bottom,this.i++}finish(){let S=this.gutter;for(;S.elements.length>this.i;){let B=S.elements.pop();S.dom.removeChild(B.dom),B.destroy()}}}class ve{constructor(S,B){this.view=S,this.config=B,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let _ in B.domEventHandlers)this.dom.addEventListener(_,O=>{let U=S.lineBlockAtHeight(O.clientY-S.documentTop);B.domEventHandlers[_](S,U,O)&&O.preventDefault()});this.markers=Y(B.markers(S)),B.initialSpacer&&(this.spacer=new Me(S,0,0,[B.initialSpacer(S)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(S){let B=this.markers;if(this.markers=Y(this.config.markers(S.view)),this.spacer&&this.config.updateSpacer){let O=this.config.updateSpacer(this.spacer.markers[0],S);O!=this.spacer.markers[0]&&this.spacer.update(S.view,0,0,[O])}let _=S.view.viewport;return!H.RangeSet.eq(this.markers,B,_.from,_.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(S):!1)}destroy(){for(let S of this.elements)S.destroy()}}class Me{constructor(S,B,_,O){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.update(S,B,_,O)}update(S,B,_,O){this.height!=B&&(this.dom.style.height=(this.height=B)+"px"),this.above!=_&&(this.dom.style.marginTop=(this.above=_)?_+"px":""),Be(this.markers,O)||this.setMarkers(S,O)}setMarkers(S,B){let _="cm-gutterElement",O=this.dom.firstChild;for(let U=0,Te=0;;){let je=Te,le=U<B.length?B[U++]:null,Qe=!1;if(le){let ot=le.elementClass;ot&&(_+=" "+ot);for(let nt=Te;nt<this.markers.length;nt++)if(this.markers[nt].compare(le)){je=nt,Qe=!0;break}}else je=this.markers.length;for(;Te<je;){let ot=this.markers[Te++];if(ot.toDOM){ot.destroy(O);let nt=O.nextSibling;O.remove(),O=nt}}if(!le)break;le.toDOM&&(Qe?O=O.nextSibling:this.dom.insertBefore(le.toDOM(S),O)),Qe&&Te++}this.dom.className=_,this.markers=B}destroy(){this.setMarkers(null,[])}}function Be(u,S){if(u.length!=S.length)return!1;for(let B=0;B<u.length;B++)if(!u[B].compare(S[B]))return!1;return!0}const q=G.Facet.define(),D=G.Facet.define({combine(u){return G.combineConfig(u,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(S,B){let _=Object.assign({},S);for(let O in B){let U=_[O],Te=B[O];_[O]=U?(je,le,Qe)=>U(je,le,Qe)||Te(je,le,Qe):Te}return _}})}});class R extends se{constructor(S){super(),this.number=S}eq(S){return this.number==S.number}toDOM(){return document.createTextNode(this.number)}}function re(u,S){return u.state.facet(D).formatNumber(S,u.state)}const Ae=pe.compute([D],u=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(S){return S.state.facet(q)},lineMarker(S,B,_){return _.some(O=>O.toDOM)?null:new R(re(S,S.state.doc.lineAt(B.from).number))},lineMarkerChange:S=>S.startState.facet(D)!=S.state.facet(D),initialSpacer(S){return new R(re(S,c(S.state.doc.lines)))},updateSpacer(S,B){let _=re(B.view,c(B.view.state.doc.lines));return _==S.number?S:new R(_)},domEventHandlers:u.facet(D).domEventHandlers}));function j(u={}){return[D.of(u),ae(),Ae]}function c(u){let S=9;for(;S<u;)S=S*10+9;return S}const f=new class extends se{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},p=F.compute(["selection"],u=>{let S=[],B=-1;for(let _ of u.selection.ranges)if(_.empty){let O=u.doc.lineAt(_.head).from;O>B&&(B=O,S.push(f.range(O)))}return H.RangeSet.of(S)});function x(){return p}m.GutterMarker=se,m.gutter=Q,m.gutterLineClass=F,m.gutters=ae,m.highlightActiveLineGutter=x,m.lineNumberMarkers=q,m.lineNumbers=j},36819:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(87897),H=T(17223),G=T(23642),se=T(17040),F=T(80729),ue=T(88648);let pe=0;class Q{constructor(I,ie,fe){this.set=I,this.base=ie,this.modified=fe,this.id=pe++}static define(I){if(I!=null&&I.base)throw new Error("Can not derive from a modified tag");let ie=new Q([],null,[]);if(ie.set.push(ie),I)for(let fe of I.set)ie.set.push(fe);return ie}static defineModifier(){let I=new ce;return ie=>ie.modified.indexOf(I)>-1?ie:ce.get(ie.base||ie,ie.modified.concat(I).sort((fe,Ve)=>fe.id-Ve.id))}}let $=0;class ce{constructor(){this.instances=[],this.id=$++}static get(I,ie){if(!ie.length)return I;let fe=ie[0].instances.find(Ee=>Ee.base==I&&ae(ie,Ee.modified));if(fe)return fe;let Ve=[],he=new Q(Ve,I,ie);for(let Ee of ie)Ee.instances.push(he);let de=J(ie);for(let Ee of I.set)for(let K of de)Ve.push(ce.get(Ee,K));return he}}function ae(P,I){return P.length==I.length&&P.every((ie,fe)=>ie==I[fe])}function J(P){let I=[P];for(let ie=0;ie<P.length;ie++)for(let fe of J(P.slice(0,ie).concat(P.slice(ie+1))))I.push(fe);return I}function Y(P){let I=Object.create(null);for(let ie in P){let fe=P[ie];Array.isArray(fe)||(fe=[fe]);for(let Ve of ie.split(" "))if(Ve){let he=[],de=2,Ee=Ve;for(let ye=0;;){if(Ee=="..."&&ye>0&&ye+3==Ve.length){de=1;break}let De=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(Ee);if(!De)throw new RangeError("Invalid path: "+Ve);if(he.push(De[0]=="*"?null:De[0][0]=='"'?JSON.parse(De[0]):De[0]),ye+=De[0].length,ye==Ve.length)break;let s=Ve[ye++];if(ye==Ve.length&&s=="!"){de=0;break}if(s!="/")throw new RangeError("Invalid path: "+Ve);Ee=Ve.slice(ye)}let K=he.length-1,A=he[K];if(!A)throw new RangeError("Invalid path: "+Ve);let z=new Be(fe,de,K>0?he.slice(0,K):null);I[A]=z.sort(I[A])}}return Fe.add(I)}const Fe=new g.NodeProp,xe=se.Facet.define({combine(P){return P.length?q.combinedMatch(P):null}}),ve=se.Facet.define({combine(P){return P.length?P[0].match:null}});function Me(P){return P.facet(xe)||P.facet(ve)}class Be{constructor(I,ie,fe,Ve){this.tags=I,this.mode=ie,this.context=fe,this.next=Ve}sort(I){return!I||I.depth<this.depth?(this.next=I,this):(I.next=this.sort(I.next),I)}get depth(){return this.context?this.context.length:0}}class q{constructor(I,ie){this.map=Object.create(null);let fe;function Ve(de){let Ee=H.StyleModule.newName();return(fe||(fe=Object.create(null)))["."+Ee]=de,Ee}this.all=typeof ie.all=="string"?ie.all:ie.all?Ve(ie.all):null;for(let de of I){let Ee=(de.class||Ve(Object.assign({},de,{tag:null})))+(this.all?" "+this.all:""),K=de.tag;if(!Array.isArray(K))this.map[K.id]=Ee;else for(let A of K)this.map[A.id]=Ee}this.module=fe?new H.StyleModule(fe):null,this.scope=ie.scope||null,this.match=this.match.bind(this);let he=[re];this.module&&he.push(G.EditorView.styleModule.of(this.module)),this.extension=he.concat(ie.themeType==null?xe.of(this):xe.computeN([G.EditorView.darkTheme],de=>de.facet(G.EditorView.darkTheme)==(ie.themeType=="dark")?[this]:[])),this.fallback=he.concat(ve.of(this))}match(I,ie){if(this.scope&&ie!=this.scope)return null;for(let fe of I.set){let Ve=this.map[fe.id];if(Ve!==void 0)return fe!=I&&(this.map[I.id]=Ve),Ve}return this.map[I.id]=this.all}static combinedMatch(I){if(I.length==1)return I[0].match;let ie=I.some(fe=>fe.scope)?void 0:Object.create(null);return(fe,Ve)=>{let he=ie&&ie[fe.id];if(he!==void 0)return he;let de=null;for(let Ee of I){let K=Ee.match(fe,Ve);K&&(de=de?de+" "+K:K)}return ie&&(ie[fe.id]=de),de}}static define(I,ie){return new q(I,ie||{})}static get(I,ie,fe){let Ve=Me(I);return Ve&&Ve(ie,fe||g.NodeType.none)}}function D(P,I,ie,fe=0,Ve=P.length){c(P,fe,Ve,I,ie)}class R{constructor(I){this.markCache=Object.create(null),this.tree=F.syntaxTree(I.state),this.decorations=this.buildDeco(I,Me(I.state))}update(I){let ie=F.syntaxTree(I.state),fe=Me(I.state),Ve=fe!=I.startState.facet(xe);ie.length<I.view.viewport.to&&!Ve&&ie.type==this.tree.type?this.decorations=this.decorations.map(I.changes):(ie!=this.tree||I.viewportChanged||Ve)&&(this.tree=ie,this.decorations=this.buildDeco(I.view,fe))}buildDeco(I,ie){if(!ie||!this.tree.length)return G.Decoration.none;let fe=new ue.RangeSetBuilder;for(let{from:Ve,to:he}of I.visibleRanges)c(this.tree,Ve,he,ie,(de,Ee,K)=>{fe.add(de,Ee,this.markCache[K]||(this.markCache[K]=G.Decoration.mark({class:K})))});return fe.finish()}}const re=se.Prec.high(G.ViewPlugin.fromClass(R,{decorations:P=>P.decorations})),Ae=[""];class j{constructor(I,ie,fe){this.at=I,this.style=ie,this.span=fe,this.class=""}startSpan(I,ie){ie!=this.class&&(this.flush(I),I>this.at&&(this.at=I),this.class=ie)}flush(I){I>this.at&&this.class&&this.span(this.at,I,this.class)}highlightRange(I,ie,fe,Ve,he,de){let{type:Ee,from:K,to:A}=I;if(K>=fe||A<=ie)return;Ae[he]=Ee.name,Ee.isTop&&(de=Ee);let z=Ve,ye=Ee.prop(Fe),De=!1;for(;ye;){if(!ye.context||f(ye.context,Ae,he)){for(let C of ye.tags){let l=this.style(C,de);l&&(z&&(z+=" "),z+=l,ye.mode==1?Ve+=(Ve?" ":"")+l:ye.mode==0&&(De=!0))}break}ye=ye.next}if(this.startSpan(I.from,z),De)return;let s=I.tree&&I.tree.prop(g.NodeProp.mounted);if(s&&s.overlay){let C=I.node.enter(s.overlay[0].from+K,1),l=I.firstChild();for(let d=0,b=K;;d++){let E=d<s.overlay.length?s.overlay[d]:null,L=E?E.from+K:A,V=Math.max(ie,b),ge=Math.min(fe,L);if(V<ge&&l)for(;I.from<ge&&(this.highlightRange(I,V,ge,Ve,he+1,de),this.startSpan(Math.min(fe,I.to),z),!(I.to>=L||!I.nextSibling())););if(!E||L>fe)break;b=E.to+K,b>ie&&(this.highlightRange(C.cursor,Math.max(ie,E.from+K),Math.min(fe,b),Ve,he,s.tree.type),this.startSpan(b,z))}l&&I.parent()}else if(I.firstChild()){do if(!(I.to<=ie)){if(I.from>=fe)break;this.highlightRange(I,ie,fe,Ve,he+1,de),this.startSpan(Math.min(fe,I.to),z)}while(I.nextSibling());I.parent()}}}function c(P,I,ie,fe,Ve){let he=new j(I,fe,Ve);he.highlightRange(P.cursor(),I,ie,"",0,P.type),he.flush(ie)}function f(P,I,ie){if(P.length>ie-1)return!1;for(let fe=ie-1,Ve=P.length-1;Ve>=0;Ve--,fe--){let he=P[Ve];if(he&&he!=I[fe])return!1}return!0}const p=Q.define,x=p(),u=p(),S=p(u),B=p(u),_=p(),O=p(_),U=p(_),Te=p(),je=p(Te),le=p(),Qe=p(),ot=p(),nt=p(ot),ut=p(),me={comment:x,lineComment:p(x),blockComment:p(x),docComment:p(x),name:u,variableName:p(u),typeName:S,tagName:p(S),propertyName:B,attributeName:p(B),className:p(u),labelName:p(u),namespace:p(u),macroName:p(u),literal:_,string:O,docString:p(O),character:p(O),attributeValue:p(O),number:U,integer:p(U),float:p(U),bool:p(_),regexp:p(_),escape:p(_),color:p(_),url:p(_),keyword:le,self:p(le),null:p(le),atom:p(le),unit:p(le),modifier:p(le),operatorKeyword:p(le),controlKeyword:p(le),definitionKeyword:p(le),moduleKeyword:p(le),operator:Qe,derefOperator:p(Qe),arithmeticOperator:p(Qe),logicOperator:p(Qe),bitwiseOperator:p(Qe),compareOperator:p(Qe),updateOperator:p(Qe),definitionOperator:p(Qe),typeOperator:p(Qe),controlOperator:p(Qe),punctuation:ot,separator:p(ot),bracket:nt,angleBracket:p(nt),squareBracket:p(nt),paren:p(nt),brace:p(nt),content:Te,heading:je,heading1:p(je),heading2:p(je),heading3:p(je),heading4:p(je),heading5:p(je),heading6:p(je),contentSeparator:p(Te),list:p(Te),quote:p(Te),emphasis:p(Te),strong:p(Te),link:p(Te),monospace:p(Te),strikethrough:p(Te),inserted:p(),deleted:p(),changed:p(),invalid:p(),meta:ut,documentMeta:p(ut),annotation:p(ut),processingInstruction:p(ut),definition:Q.defineModifier(),constant:Q.defineModifier(),function:Q.defineModifier(),standard:Q.defineModifier(),local:Q.defineModifier(),special:Q.defineModifier()},v=q.define([{tag:me.link,textDecoration:"underline"},{tag:me.heading,textDecoration:"underline",fontWeight:"bold"},{tag:me.emphasis,fontStyle:"italic"},{tag:me.strong,fontWeight:"bold"},{tag:me.strikethrough,textDecoration:"line-through"},{tag:me.keyword,color:"#708"},{tag:[me.atom,me.bool,me.url,me.contentSeparator,me.labelName],color:"#219"},{tag:[me.literal,me.inserted],color:"#164"},{tag:[me.string,me.deleted],color:"#a11"},{tag:[me.regexp,me.escape,me.special(me.string)],color:"#e40"},{tag:me.definition(me.variableName),color:"#00f"},{tag:me.local(me.variableName),color:"#30a"},{tag:[me.typeName,me.namespace],color:"#085"},{tag:me.className,color:"#167"},{tag:[me.special(me.variableName),me.macroName],color:"#256"},{tag:me.definition(me.propertyName),color:"#00c"},{tag:me.comment,color:"#940"},{tag:me.meta,color:"#7a757a"},{tag:me.invalid,color:"#f00"}]),M=q.define([{tag:me.link,class:"cmt-link"},{tag:me.heading,class:"cmt-heading"},{tag:me.emphasis,class:"cmt-emphasis"},{tag:me.strong,class:"cmt-strong"},{tag:me.keyword,class:"cmt-keyword"},{tag:me.atom,class:"cmt-atom"},{tag:me.bool,class:"cmt-bool"},{tag:me.url,class:"cmt-url"},{tag:me.labelName,class:"cmt-labelName"},{tag:me.inserted,class:"cmt-inserted"},{tag:me.deleted,class:"cmt-deleted"},{tag:me.literal,class:"cmt-literal"},{tag:me.string,class:"cmt-string"},{tag:me.number,class:"cmt-number"},{tag:[me.regexp,me.escape,me.special(me.string)],class:"cmt-string2"},{tag:me.variableName,class:"cmt-variableName"},{tag:me.local(me.variableName),class:"cmt-variableName cmt-local"},{tag:me.definition(me.variableName),class:"cmt-variableName cmt-definition"},{tag:me.special(me.variableName),class:"cmt-variableName2"},{tag:me.definition(me.propertyName),class:"cmt-propertyName cmt-definition"},{tag:me.typeName,class:"cmt-typeName"},{tag:me.namespace,class:"cmt-namespace"},{tag:me.className,class:"cmt-className"},{tag:me.macroName,class:"cmt-macroName"},{tag:me.propertyName,class:"cmt-propertyName"},{tag:me.operator,class:"cmt-operator"},{tag:me.comment,class:"cmt-comment"},{tag:me.meta,class:"cmt-meta"},{tag:me.invalid,class:"cmt-invalid"},{tag:me.punctuation,class:"cmt-punctuation"}]);m.HighlightStyle=q,m.Tag=Q,m.classHighlightStyle=M,m.defaultHighlightStyle=v,m.highlightTree=D,m.styleTags=Y,m.tags=me},40844:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040),H=T(23642);const G=g.Annotation.define(),se=g.Annotation.define(),F=g.Facet.define(),ue=g.Facet.define({combine(O){return g.combineConfig(O,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}});function pe(O){let U=0;return O.iterChangedRanges((Te,je)=>U=je),U}const Q=g.StateField.define({create(){return B.empty},update(O,U){let Te=U.state.facet(ue),je=U.annotation(G);if(je){let ut=U.docChanged?g.EditorSelection.single(pe(U.changes)):void 0,me=q.fromTransaction(U,ut),v=je.side,M=v==0?O.undone:O.done;return me?M=D(M,M.length,Te.minDepth,me):M=f(M,U.startState.selection),new B(v==0?je.rest:M,v==0?M:je.rest)}let le=U.annotation(se);if((le=="full"||le=="before")&&(O=O.isolate()),U.annotation(g.Transaction.addToHistory)===!1)return U.changes.empty?O:O.addMapping(U.changes.desc);let Qe=q.fromTransaction(U),ot=U.annotation(g.Transaction.time),nt=U.annotation(g.Transaction.userEvent);return Qe?O=O.addChanges(Qe,ot,nt,Te.newGroupDelay,Te.minDepth):U.selection&&(O=O.addSelection(U.startState.selection,ot,nt,Te.newGroupDelay)),(le=="full"||le=="after")&&(O=O.isolate()),O},toJSON(O){return{done:O.done.map(U=>U.toJSON()),undone:O.undone.map(U=>U.toJSON())}},fromJSON(O){return new B(O.done.map(q.fromJSON),O.undone.map(q.fromJSON))}});function $(O={}){return[Q,ue.of(O),H.EditorView.domEventHandlers({beforeinput(U,Te){let je=U.inputType=="historyUndo"?J:U.inputType=="historyRedo"?Y:null;return je?(U.preventDefault(),je(Te)):!1}})]}const ce=Q;function ae(O,U){return function({state:Te,dispatch:je}){if(!U&&Te.readOnly)return!1;let le=Te.field(Q,!1);if(!le)return!1;let Qe=le.pop(O,Te,U);return Qe?(je(Qe),!0):!1}}const J=ae(0,!1),Y=ae(1,!1),Fe=ae(0,!0),xe=ae(1,!0);function ve(O){return function(U){let Te=U.field(Q,!1);if(!Te)return 0;let je=O==0?Te.done:Te.undone;return je.length-(je.length&&!je[0].changes?1:0)}}const Me=ve(0),Be=ve(1);class q{constructor(U,Te,je,le,Qe){this.changes=U,this.effects=Te,this.mapped=je,this.startSelection=le,this.selectionsAfter=Qe}setSelAfter(U){return new q(this.changes,this.effects,this.mapped,this.startSelection,U)}toJSON(){var U,Te,je;return{changes:(U=this.changes)===null||U===void 0?void 0:U.toJSON(),mapped:(Te=this.mapped)===null||Te===void 0?void 0:Te.toJSON(),startSelection:(je=this.startSelection)===null||je===void 0?void 0:je.toJSON(),selectionsAfter:this.selectionsAfter.map(le=>le.toJSON())}}static fromJSON(U){return new q(U.changes&&g.ChangeSet.fromJSON(U.changes),[],U.mapped&&g.ChangeDesc.fromJSON(U.mapped),U.startSelection&&g.EditorSelection.fromJSON(U.startSelection),U.selectionsAfter.map(g.EditorSelection.fromJSON))}static fromTransaction(U,Te){let je=j;for(let le of U.startState.facet(F)){let Qe=le(U);Qe.length&&(je=je.concat(Qe))}return!je.length&&U.changes.empty?null:new q(U.changes.invert(U.startState.doc),je,void 0,Te||U.startState.selection,j)}static selection(U){return new q(void 0,j,void 0,void 0,U)}}function D(O,U,Te,je){let le=U+1>Te+20?U-Te-1:0,Qe=O.slice(le,U);return Qe.push(je),Qe}function R(O,U){let Te=[],je=!1;return O.iterChangedRanges((le,Qe)=>Te.push(le,Qe)),U.iterChangedRanges((le,Qe,ot,nt)=>{for(let ut=0;ut<Te.length;){let me=Te[ut++],v=Te[ut++];nt>=me&&ot<=v&&(je=!0)}}),je}function re(O,U){return O.ranges.length==U.ranges.length&&O.ranges.filter((Te,je)=>Te.empty!=U.ranges[je].empty).length===0}function Ae(O,U){return O.length?U.length?O.concat(U):O:U}const j=[],c=200;function f(O,U){if(O.length){let Te=O[O.length-1],je=Te.selectionsAfter.slice(Math.max(0,Te.selectionsAfter.length-c));return je.length&&je[je.length-1].eq(U)?O:(je.push(U),D(O,O.length-1,1e9,Te.setSelAfter(je)))}else return[q.selection([U])]}function p(O){let U=O[O.length-1],Te=O.slice();return Te[O.length-1]=U.setSelAfter(U.selectionsAfter.slice(0,U.selectionsAfter.length-1)),Te}function x(O,U){if(!O.length)return O;let Te=O.length,je=j;for(;Te;){let le=u(O[Te-1],U,je);if(le.changes&&!le.changes.empty||le.effects.length){let Qe=O.slice(0,Te);return Qe[Te-1]=le,Qe}else U=le.mapped,Te--,je=le.selectionsAfter}return je.length?[q.selection(je)]:j}function u(O,U,Te){let je=Ae(O.selectionsAfter.length?O.selectionsAfter.map(nt=>nt.map(U)):j,Te);if(!O.changes)return q.selection(je);let le=O.changes.map(U),Qe=U.mapDesc(O.changes,!0),ot=O.mapped?O.mapped.composeDesc(Qe):Qe;return new q(le,g.StateEffect.mapEffects(O.effects,U),ot,O.startSelection.map(Qe),je)}const S=/^(input\.type|delete)($|\.)/;class B{constructor(U,Te,je=0,le=void 0){this.done=U,this.undone=Te,this.prevTime=je,this.prevUserEvent=le}isolate(){return this.prevTime?new B(this.done,this.undone):this}addChanges(U,Te,je,le,Qe){let ot=this.done,nt=ot[ot.length-1];return nt&&nt.changes&&!nt.changes.empty&&U.changes&&(!je||S.test(je))&&(!nt.selectionsAfter.length&&Te-this.prevTime<le&&R(nt.changes,U.changes)||je=="input.type.compose")?ot=D(ot,ot.length-1,Qe,new q(U.changes.compose(nt.changes),Ae(U.effects,nt.effects),nt.mapped,nt.startSelection,j)):ot=D(ot,ot.length,Qe,U),new B(ot,j,Te,je)}addSelection(U,Te,je,le){let Qe=this.done.length?this.done[this.done.length-1].selectionsAfter:j;return Qe.length>0&&Te-this.prevTime<le&&je==this.prevUserEvent&&je&&/^select($|\.)/.test(je)&&re(Qe[Qe.length-1],U)?this:new B(f(this.done,U),this.undone,Te,je)}addMapping(U){return new B(x(this.done,U),x(this.undone,U),this.prevTime,this.prevUserEvent)}pop(U,Te,je){let le=U==0?this.done:this.undone;if(le.length==0)return null;let Qe=le[le.length-1];if(je&&Qe.selectionsAfter.length)return Te.update({selection:Qe.selectionsAfter[Qe.selectionsAfter.length-1],annotations:G.of({side:U,rest:p(le)}),userEvent:U==0?"select.undo":"select.redo",scrollIntoView:!0});if(Qe.changes){let ot=le.length==1?j:le.slice(0,le.length-1);return Qe.mapped&&(ot=x(ot,Qe.mapped)),Te.update({changes:Qe.changes,selection:Qe.startSelection,effects:Qe.effects,annotations:G.of({side:U,rest:ot}),filter:!1,userEvent:U==0?"undo":"redo",scrollIntoView:!0})}else return null}}B.empty=new B(j,j);const _=[{key:"Mod-z",run:J,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:Y,preventDefault:!0},{key:"Mod-u",run:Fe,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:xe,preventDefault:!0}];m.history=$,m.historyField=ce,m.historyKeymap=_,m.invertedEffects=F,m.isolateHistory=se,m.redo=Y,m.redoDepth=Be,m.redoSelection=xe,m.undo=J,m.undoDepth=Me,m.undoSelection=Fe},80729:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(87897),H=T(17040),G=T(23642),se=T(18907),F;const ue=new g.NodeProp;function pe(K){return H.Facet.define({combine:K?A=>A.concat(K):void 0})}class Q{constructor(A,z,ye,De=[]){this.data=A,this.topNode=ye,H.EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(H.EditorState.prototype,"tree",{get(){return ae(this)}}),this.parser=z,this.extension=[Ae.of(this),H.EditorState.languageData.of((s,C,l)=>s.facet($(s,C,l)))].concat(De)}isActiveAt(A,z,ye=-1){return $(A,z,ye)==this.data}findRegions(A){let z=A.facet(Ae);if((z==null?void 0:z.data)==this.data)return[{from:0,to:A.doc.length}];if(!z||!z.allowsNesting)return[];let ye=[],De=(s,C)=>{if(s.prop(ue)==this.data){ye.push({from:C,to:C+s.length});return}let l=s.prop(g.NodeProp.mounted);if(l){if(l.tree.prop(ue)==this.data){if(l.overlay)for(let d of l.overlay)ye.push({from:d.from+C,to:d.to+C});else ye.push({from:C,to:C+s.length});return}else if(l.overlay){let d=ye.length;if(De(l.tree,l.overlay[0].from+C),ye.length>d)return}}for(let d=0;d<s.children.length;d++){let b=s.children[d];b instanceof g.Tree&&De(b,s.positions[d]+C)}};return De(ae(A),0),ye}get allowsNesting(){return!0}}Q.setState=H.StateEffect.define();function $(K,A,z){let ye=K.facet(Ae);if(!ye)return null;let De=ye.data;if(ye.allowsNesting)for(let s=ae(K).topNode;s;s=s.enter(A,z,!0,!1))De=s.type.prop(ue)||De;return De}class ce extends Q{constructor(A,z){super(A,z,z.topNode),this.parser=z}static define(A){let z=pe(A.languageData);return new ce(z,A.parser.configure({props:[ue.add(ye=>ye.isTop?z:void 0)]}))}configure(A){return new ce(this.data,this.parser.configure(A))}get allowsNesting(){return this.parser.wrappers.length>0}}function ae(K){let A=K.field(Q.state,!1);return A?A.tree:g.Tree.empty}function J(K,A,z=50){var ye;let De=(ye=K.field(Q.state,!1))===null||ye===void 0?void 0:ye.context;return De&&(De.isDone(A)||De.work(z,A))?De.tree:null}function Y(K,A=K.doc.length){var z;return((z=K.field(Q.state,!1))===null||z===void 0?void 0:z.context.isDone(A))||!1}function Fe(K){var A;return((A=K.plugin(re))===null||A===void 0?void 0:A.isWorking())||!1}class xe{constructor(A,z=A.length){this.doc=A,this.length=z,this.cursorPos=0,this.string="",this.cursor=A.iter()}syncTo(A){return this.string=this.cursor.next(A-this.cursorPos).value,this.cursorPos=A+this.string.length,this.cursorPos-this.string.length}chunk(A){return this.syncTo(A),this.string}get lineChunks(){return!0}read(A,z){let ye=this.cursorPos-this.string.length;return A<ye||z>=this.cursorPos?this.doc.sliceString(A,z):this.string.slice(A-ye,z-ye)}}let ve=null;class Me{constructor(A,z,ye=[],De,s,C,l,d){this.parser=A,this.state=z,this.fragments=ye,this.tree=De,this.treeLen=s,this.viewport=C,this.skipped=l,this.scheduleOn=d,this.parse=null,this.tempSkipped=[]}startParse(){return this.parser.startParse(new xe(this.state.doc),this.fragments)}work(A,z){return z!=null&&z>=this.state.doc.length&&(z=void 0),this.tree!=g.Tree.empty&&this.isDone(z!=null?z:this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var ye;if(typeof A=="number"){let De=Date.now()+A;A=()=>Date.now()>De}for(this.parse||(this.parse=this.startParse()),z!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>z)&&z<this.state.doc.length&&this.parse.stopAt(z);;){let De=this.parse.advance();if(De)if(this.fragments=this.withoutTempSkipped(g.TreeFragment.addTree(De,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(ye=this.parse.stoppedAt)!==null&&ye!==void 0?ye:this.state.doc.length,this.tree=De,this.parse=null,this.treeLen<(z!=null?z:this.state.doc.length))this.parse=this.startParse();else return!0;if(A())return!1}})}takeTree(){let A,z;this.parse&&(A=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>A)&&this.parse.stopAt(A),this.withContext(()=>{for(;!(z=this.parse.advance()););}),this.treeLen=A,this.tree=z,this.fragments=this.withoutTempSkipped(g.TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(A){let z=ve;ve=this;try{return A()}finally{ve=z}}withoutTempSkipped(A){for(let z;z=this.tempSkipped.pop();)A=Be(A,z.from,z.to);return A}changes(A,z){let{fragments:ye,tree:De,treeLen:s,viewport:C,skipped:l}=this;if(this.takeTree(),!A.empty){let d=[];if(A.iterChangedRanges((b,E,L,V)=>d.push({fromA:b,toA:E,fromB:L,toB:V})),ye=g.TreeFragment.applyChanges(ye,d),De=g.Tree.empty,s=0,C={from:A.mapPos(C.from,-1),to:A.mapPos(C.to,1)},this.skipped.length){l=[];for(let b of this.skipped){let E=A.mapPos(b.from,1),L=A.mapPos(b.to,-1);E<L&&l.push({from:E,to:L})}}}return new Me(this.parser,z,ye,De,s,C,l,this.scheduleOn)}updateViewport(A){if(this.viewport.from==A.from&&this.viewport.to==A.to)return!1;this.viewport=A;let z=this.skipped.length;for(let ye=0;ye<this.skipped.length;ye++){let{from:De,to:s}=this.skipped[ye];De<A.to&&s>A.from&&(this.fragments=Be(this.fragments,De,s),this.skipped.splice(ye--,1))}return this.skipped.length>=z?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(A,z){this.skipped.push({from:A,to:z})}static getSkippingParser(A){return new class extends g.Parser{createParse(z,ye,De){let s=De[0].from,C=De[De.length-1].to;return{parsedPos:s,advance(){let d=ve;if(d){for(let b of De)d.tempSkipped.push(b);A&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,A]):A)}return this.parsedPos=C,new g.Tree(g.NodeType.none,[],[],C-s)},stoppedAt:null,stopAt(){}}}}}isDone(A){A=Math.min(A,this.state.doc.length);let z=this.fragments;return this.treeLen>=A&&z.length&&z[0].from==0&&z[0].to>=A}static get(){return ve}}function Be(K,A,z){return g.TreeFragment.applyChanges(K,[{fromA:A,toA:z,fromB:A,toB:z}])}class q{constructor(A){this.context=A,this.tree=A.tree}apply(A){if(!A.docChanged&&this.tree==this.context.tree)return this;let z=this.context.changes(A.changes,A.state),ye=this.context.treeLen==A.startState.doc.length?void 0:Math.max(A.changes.mapPos(this.context.treeLen),z.viewport.to);return z.work(20,ye)||z.takeTree(),new q(z)}static init(A){let z=Math.min(3e3,A.doc.length),ye=new Me(A.facet(Ae).parser,A,[],g.Tree.empty,0,{from:0,to:z},[],null);return ye.work(20,z)||ye.takeTree(),new q(ye)}}Q.state=H.StateField.define({create:q.init,update(K,A){for(let z of A.effects)if(z.is(Q.setState))return z.value;return A.startState.facet(Ae)!=A.state.facet(Ae)?q.init(A.state):K.apply(A)}});let D=K=>{let A=setTimeout(()=>K(),500);return()=>clearTimeout(A)};typeof requestIdleCallback!="undefined"&&(D=K=>{let A=-1,z=setTimeout(()=>{A=requestIdleCallback(K,{timeout:500-100})},100);return()=>A<0?clearTimeout(z):cancelIdleCallback(A)});const R=typeof navigator!="undefined"&&(!((F=navigator.scheduling)===null||F===void 0)&&F.isInputPending)?()=>navigator.scheduling.isInputPending():null,re=G.ViewPlugin.fromClass(class{constructor(A){this.view=A,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(A){let z=this.view.state.field(Q.state).context;(z.updateViewport(A.view.viewport)||this.view.viewport.to>z.treeLen)&&this.scheduleWork(),A.docChanged&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(z)}scheduleWork(){if(this.working)return;let{state:A}=this.view,z=A.field(Q.state);(z.tree!=z.context.tree||!z.context.isDone(A.doc.length))&&(this.working=D(this.work))}work(A){this.working=null;let z=Date.now();if(this.chunkEnd<z&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=z+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:ye,viewport:{to:De}}=this.view,s=ye.field(Q.state);if(s.tree==s.context.tree&&s.context.isDone(De+1e5))return;let C=Date.now()+Math.min(this.chunkBudget,100,A&&!R?Math.max(25,A.timeRemaining()-5):1e9),l=s.context.treeLen<De&&ye.doc.length>De+1e3,d=s.context.work(()=>R&&R()||Date.now()>C,De+(l?0:1e5));this.chunkBudget-=Date.now()-z,(d||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:Q.setState.of(new q(s.context))})),this.chunkBudget>0&&!(d&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(A){A.scheduleOn&&(this.workScheduled++,A.scheduleOn.then(()=>this.scheduleWork()).catch(z=>G.logException(this.view.state,z)).then(()=>this.workScheduled--),A.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ae=H.Facet.define({combine(K){return K.length?K[0]:null},enables:[Q.state,re]});class j{constructor(A,z=[]){this.language=A,this.support=z,this.extension=[A,z]}}class c{constructor(A,z,ye,De,s,C=void 0){this.name=A,this.alias=z,this.extensions=ye,this.filename=De,this.loadFunc=s,this.support=C,this.loading=null}load(){return this.loading||(this.loading=this.loadFunc().then(A=>this.support=A,A=>{throw this.loading=null,A}))}static of(A){let{load:z,support:ye}=A;if(!z){if(!ye)throw new RangeError("Must pass either 'load' or 'support' to LanguageDescription.of");z=()=>Promise.resolve(ye)}return new c(A.name,(A.alias||[]).concat(A.name).map(De=>De.toLowerCase()),A.extensions||[],A.filename,z,ye)}static matchFilename(A,z){for(let De of A)if(De.filename&&De.filename.test(z))return De;let ye=/\.([^.]+)$/.exec(z);if(ye){for(let De of A)if(De.extensions.indexOf(ye[1])>-1)return De}return null}static matchLanguageName(A,z,ye=!0){z=z.toLowerCase();for(let De of A)if(De.alias.some(s=>s==z))return De;if(ye)for(let De of A)for(let s of De.alias){let C=z.indexOf(s);if(C>-1&&(s.length>2||!/\w/.test(z[C-1])&&!/\w/.test(z[C+s.length])))return De}return null}}const f=H.Facet.define(),p=H.Facet.define({combine:K=>{if(!K.length)return"  ";if(!/^(?: +|\t+)$/.test(K[0]))throw new Error("Invalid indent unit: "+JSON.stringify(K[0]));return K[0]}});function x(K){let A=K.facet(p);return A.charCodeAt(0)==9?K.tabSize*A.length:A.length}function u(K,A){let z="",ye=K.tabSize;if(K.facet(p).charCodeAt(0)==9)for(;A>=ye;)z+="	",A-=ye;for(let De=0;De<A;De++)z+=" ";return z}function S(K,A){K instanceof H.EditorState&&(K=new B(K));for(let ye of K.state.facet(f)){let De=ye(K,A);if(De!=null)return De}let z=ae(K.state);return z?O(K,z,A):null}class B{constructor(A,z={}){this.state=A,this.options=z,this.unit=x(A)}lineAt(A,z=1){let ye=this.state.doc.lineAt(A),{simulateBreak:De,simulateDoubleBreak:s}=this.options;return De!=null&&De>=ye.from&&De<=ye.to?s&&De==A?{text:"",from:A}:(z<0?De<A:De<=A)?{text:ye.text.slice(De-ye.from),from:De}:{text:ye.text.slice(0,De-ye.from),from:ye.from}:ye}textAfterPos(A,z=1){if(this.options.simulateDoubleBreak&&A==this.options.simulateBreak)return"";let{text:ye,from:De}=this.lineAt(A,z);return ye.slice(A-De,Math.min(ye.length,A+100-De))}column(A,z=1){let{text:ye,from:De}=this.lineAt(A,z),s=this.countColumn(ye,A-De),C=this.options.overrideIndentation?this.options.overrideIndentation(De):-1;return C>-1&&(s+=C-this.countColumn(ye,ye.search(/\S|$/))),s}countColumn(A,z=A.length){return se.countColumn(A,this.state.tabSize,z)}lineIndent(A,z=1){let{text:ye,from:De}=this.lineAt(A,z),s=this.options.overrideIndentation;if(s){let C=s(De);if(C>-1)return C}return this.countColumn(ye,ye.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const _=new g.NodeProp;function O(K,A,z){return je(A.resolveInner(z).enterUnfinishedNodesBefore(z),z,K)}function U(K){return K.pos==K.options.simulateBreak&&K.options.simulateDoubleBreak}function Te(K){let A=K.type.prop(_);if(A)return A;let z=K.firstChild,ye;if(z&&(ye=z.type.prop(g.NodeProp.closedBy))){let De=K.lastChild,s=De&&ye.indexOf(De.name)>-1;return C=>me(C,!0,1,void 0,s&&!U(C)?De.from:void 0)}return K.parent==null?le:null}function je(K,A,z){for(;K;K=K.parent){let ye=Te(K);if(ye)return ye(new Qe(z,A,K))}return null}function le(){return 0}class Qe extends B{constructor(A,z,ye){super(A.state,A.options),this.base=A,this.pos=z,this.node=ye}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let A=this.state.doc.lineAt(this.node.from);for(;;){let z=this.node.resolve(A.from);for(;z.parent&&z.parent.from==z.from;)z=z.parent;if(ot(z,this.node))break;A=this.state.doc.lineAt(z.from)}return this.lineIndent(A.from)}continue(){let A=this.node.parent;return A?je(A,this.pos,this.base):0}}function ot(K,A){for(let z=A;z;z=z.parent)if(K==z)return!0;return!1}function nt(K){let A=K.node,z=A.childAfter(A.from),ye=A.lastChild;if(!z)return null;let De=K.options.simulateBreak,s=K.state.doc.lineAt(z.from),C=De==null||De<=s.from?s.to:Math.min(s.to,De);for(let l=z.to;;){let d=A.childAfter(l);if(!d||d==ye)return null;if(!d.type.isSkipped)return d.from<C?z:null;l=d.to}}function ut({closing:K,align:A=!0,units:z=1}){return ye=>me(ye,A,z,K)}function me(K,A,z,ye,De){let s=K.textAfter,C=s.match(/^\s*/)[0].length,l=ye&&s.slice(C,C+ye.length)==ye||De==K.pos+C,d=A?nt(K):null;return d?l?K.column(d.from):K.column(d.to):K.baseIndent+(l?0:K.unit*z)}const v=K=>K.baseIndent;function M({except:K,units:A=1}={}){return z=>{let ye=K&&K.test(z.textAfter);return z.baseIndent+(ye?0:A*z.unit)}}const P=200;function I(){return H.EditorState.transactionFilter.of(K=>{if(!K.docChanged||!K.isUserEvent("input.type")&&!K.isUserEvent("input.complete"))return K;let A=K.startState.languageDataAt("indentOnInput",K.startState.selection.main.head);if(!A.length)return K;let z=K.newDoc,{head:ye}=K.newSelection.main,De=z.lineAt(ye);if(ye>De.from+P)return K;let s=z.sliceString(De.from,ye);if(!A.some(b=>b.test(s)))return K;let{state:C}=K,l=-1,d=[];for(let{head:b}of C.selection.ranges){let E=C.doc.lineAt(b);if(E.from==l)continue;l=E.from;let L=S(C,E.from);if(L==null)continue;let V=/^\s*/.exec(E.text)[0],ge=u(C,L);V!=ge&&d.push({from:E.from,to:E.from+V.length,insert:ge})}return d.length?[K,{changes:d,sequential:!0}]:K})}const ie=H.Facet.define(),fe=new g.NodeProp;function Ve(K){let A=K.firstChild,z=K.lastChild;return A&&A.to<z.from?{from:A.to,to:z.type.isError?K.to:z.from}:null}function he(K,A,z){let ye=ae(K);if(ye.length==0)return null;let De=ye.resolveInner(z),s=null;for(let C=De;C;C=C.parent){if(C.to<=z||C.from>z)continue;if(s&&C.from<A)break;let l=C.type.prop(fe);if(l&&(C.to<ye.length-50||ye.length==K.doc.length||!de(C))){let d=l(C,K);d&&d.from<=z&&d.from>=A&&d.to>z&&(s=d)}}return s}function de(K){let A=K.lastChild;return A&&A.to==K.to&&A.type.isError}function Ee(K,A,z){for(let ye of K.facet(ie)){let De=ye(K,A,z);if(De)return De}return he(K,A,z)}m.IndentContext=B,m.LRLanguage=ce,m.Language=Q,m.LanguageDescription=c,m.LanguageSupport=j,m.ParseContext=Me,m.TreeIndentContext=Qe,m.continuedIndent=M,m.defineLanguageFacet=pe,m.delimitedIndent=ut,m.ensureSyntaxTree=J,m.flatIndent=v,m.foldInside=Ve,m.foldNodeProp=fe,m.foldService=ie,m.foldable=Ee,m.getIndentUnit=x,m.getIndentation=S,m.indentNodeProp=_,m.indentOnInput=I,m.indentService=f,m.indentString=u,m.indentUnit=p,m.language=Ae,m.languageDataProp=ue,m.syntaxParserRunning=Fe,m.syntaxTree=ae,m.syntaxTreeAvailable=Y},66206:function(We,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var T=["true","false","on","off","yes","no"],g=new RegExp("\\b(("+T.join(")|(")+"))$","i");const H={token:function(G,se){var F=G.peek(),ue=se.escaped;if(se.escaped=!1,F=="#"&&(G.pos==0||/\s/.test(G.string.charAt(G.pos-1))))return G.skipToEnd(),"comment";if(G.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(se.literal&&G.indentation()>se.keyCol)return G.skipToEnd(),"string";if(se.literal&&(se.literal=!1),G.sol()){if(se.keyCol=0,se.pair=!1,se.pairStart=!1,G.match("---")||G.match("..."))return"def";if(G.match(/^\s*-\s+/))return"meta"}if(G.match(/^(\{|\}|\[|\])/))return F=="{"?se.inlinePairs++:F=="}"?se.inlinePairs--:F=="["?se.inlineList++:se.inlineList--,"meta";if(se.inlineList>0&&!ue&&F==",")return G.next(),"meta";if(se.inlinePairs>0&&!ue&&F==",")return se.keyCol=0,se.pair=!1,se.pairStart=!1,G.next(),"meta";if(se.pairStart){if(G.match(/^\s*(\||\>)\s*/))return se.literal=!0,"meta";if(G.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable";if(se.inlinePairs==0&&G.match(/^\s*-?[0-9\.\,]+\s?$/)||se.inlinePairs>0&&G.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(G.match(g))return"keyword"}return!se.pair&&G.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/)?(se.pair=!0,se.keyCol=G.indentation(),"atom"):se.pair&&G.match(/^:\s*/)?(se.pairStart=!0,"meta"):(se.pairStart=!1,se.escaped=F=="\\",G.next(),null)},startState:function(){return{pair:!1,pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}},languageData:{commentTokens:{line:"#"}}};m.yaml=H},42426:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(23642),H=T(17040),G=T(67047),se=T(63392),F=T(95298),ue=T(88648),pe=T(68513);function Q(he){return he&&typeof he=="object"&&"default"in he?he:{default:he}}var $=Q(pe);class ce{constructor(de,Ee,K){this.from=de,this.to=Ee,this.diagnostic=K}}class ae{constructor(de,Ee,K){this.diagnostics=de,this.panel=Ee,this.selected=K}static init(de,Ee,K){let A=g.Decoration.set(de.map(z=>z.from==z.to||z.from==z.to-1&&K.doc.lineAt(z.from).to==z.from?g.Decoration.widget({widget:new O(z),diagnostic:z}).range(z.from):g.Decoration.mark({attributes:{class:"cm-lintRange cm-lintRange-"+z.severity},diagnostic:z}).range(z.from,z.to)),!0);return new ae(A,Ee,J(A))}}function J(he,de=null,Ee=0){let K=null;return he.between(Ee,1e9,(A,z,{spec:ye})=>{if(!(de&&ye.diagnostic!=de))return K=new ce(A,z,ye.diagnostic),!1}),K}function Y(he,de){return he.field(Be,!1)?de:de.concat(H.StateEffect.appendConfig.of([Be,g.EditorView.decorations.compute([Be],Ee=>{let{selected:K,panel:A}=Ee.field(Be);return!K||!A||K.from==K.to?g.Decoration.none:g.Decoration.set([D.range(K.from,K.to)])}),G.hoverTooltip(R),Qe]))}function Fe(he,de){return{effects:Y(he,[xe.of(de)])}}const xe=H.StateEffect.define(),ve=H.StateEffect.define(),Me=H.StateEffect.define(),Be=H.StateField.define({create(){return new ae(g.Decoration.none,null,null)},update(he,de){if(de.docChanged){let Ee=he.diagnostics.map(de.changes),K=null;if(he.selected){let A=de.changes.mapPos(he.selected.from,1);K=J(Ee,he.selected.diagnostic,A)||J(Ee,null,A)}he=new ae(Ee,he.panel,K)}for(let Ee of de.effects)Ee.is(xe)?he=ae.init(Ee.value,he.panel,de.state):Ee.is(ve)?he=new ae(he.diagnostics,Ee.value?Te.open:null,he.selected):Ee.is(Me)&&(he=new ae(he.diagnostics,he.panel,Ee.value));return he},provide:he=>[se.showPanel.from(he,de=>de.panel),g.EditorView.decorations.from(he,de=>de.diagnostics)]});function q(he){let de=he.field(Be,!1);return de?de.diagnostics.size:0}const D=g.Decoration.mark({class:"cm-lintRange cm-lintRange-active"});function R(he,de,Ee){let{diagnostics:K}=he.state.field(Be),A=[],z=2e8,ye=0;return K.between(de-(Ee<0?1:0),de+(Ee>0?1:0),(De,s,{spec:C})=>{de>=De&&de<=s&&(De==s||(de>De||Ee>0)&&(de<s||Ee<0))&&(A.push(C.diagnostic),z=Math.min(De,z),ye=Math.max(s,ye))}),A.length?{pos:z,end:ye,above:he.state.doc.lineAt(z).to<ye,create(){return{dom:re(he,A)}}}:null}function re(he,de){return $.default("ul",{class:"cm-tooltip-lint"},de.map(Ee=>_(he,Ee,!1)))}const Ae=he=>{let de=he.state.field(Be,!1);(!de||!de.panel)&&he.dispatch({effects:Y(he.state,[ve.of(!0)])});let Ee=se.getPanel(he,Te.open);return Ee&&Ee.dom.querySelector(".cm-panel-lint ul").focus(),!0},j=he=>{let de=he.state.field(Be,!1);return!de||!de.panel?!1:(he.dispatch({effects:ve.of(!1)}),!0)},c=he=>{let de=he.state.field(Be,!1);if(!de)return!1;let Ee=he.state.selection.main,K=de.diagnostics.iter(Ee.to+1);return!K.value&&(K=de.diagnostics.iter(0),!K.value||K.from==Ee.from&&K.to==Ee.to)?!1:(he.dispatch({selection:{anchor:K.from,head:K.to},scrollIntoView:!0}),!0)},f=[{key:"Mod-Shift-m",run:Ae},{key:"F8",run:c}],p=g.ViewPlugin.fromClass(class{constructor(he){this.view=he,this.timeout=-1,this.set=!0;let{delay:de}=he.state.facet(x);this.lintTime=Date.now()+de,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,de)}run(){let he=Date.now();if(he<this.lintTime-10)setTimeout(this.run,this.lintTime-he);else{this.set=!1;let{state:de}=this.view,{sources:Ee}=de.facet(x);Promise.all(Ee.map(K=>Promise.resolve(K(this.view)))).then(K=>{let A=K.reduce((z,ye)=>z.concat(ye));this.view.state.doc==de.doc&&this.view.dispatch(Fe(this.view.state,A))},K=>{g.logException(this.view.state,K)})}}update(he){let de=he.state.facet(x);(he.docChanged||de!=he.startState.facet(x))&&(this.lintTime=Date.now()+de.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,de.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}}),x=H.Facet.define({combine(he){return{sources:he.map(de=>de.source),delay:he.length?Math.max(...he.map(de=>de.delay)):750}},enables:p});function u(he,de={}){var Ee;return x.of({source:he,delay:(Ee=de.delay)!==null&&Ee!==void 0?Ee:750})}function S(he){let de=he.plugin(p);de&&de.force()}function B(he){let de=[];if(he)e:for(let{name:Ee}of he){for(let K=0;K<Ee.length;K++){let A=Ee[K];if(/[a-zA-Z]/.test(A)&&!de.some(z=>z.toLowerCase()==A.toLowerCase())){de.push(A);continue e}}de.push("")}return de}function _(he,de,Ee){var K;let A=Ee?B(de.actions):[];return $.default("li",{class:"cm-diagnostic cm-diagnostic-"+de.severity},$.default("span",{class:"cm-diagnosticText"},de.message),(K=de.actions)===null||K===void 0?void 0:K.map((z,ye)=>{let De=d=>{d.preventDefault();let b=J(he.state.field(Be).diagnostics,de);b&&z.apply(he,b.from,b.to)},{name:s}=z,C=A[ye]?s.indexOf(A[ye]):-1,l=C<0?s:[s.slice(0,C),$.default("u",s.slice(C,C+1)),s.slice(C+1)];return $.default("button",{type:"button",class:"cm-diagnosticAction",onclick:De,onmousedown:De,"aria-label":` Action: ${s}${C<0?"":` (access key "${A[ye]})"`}.`},l)}),de.source&&$.default("div",{class:"cm-diagnosticSource"},de.source))}class O extends g.WidgetType{constructor(de){super(),this.diagnostic=de}eq(de){return de.diagnostic==this.diagnostic}toDOM(){return $.default("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class U{constructor(de,Ee){this.diagnostic=Ee,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=_(de,Ee,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Te{constructor(de){this.view=de,this.items=[];let Ee=A=>{if(A.keyCode==27)j(this.view),this.view.focus();else if(A.keyCode==38||A.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(A.keyCode==40||A.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(A.keyCode==36)this.moveSelection(0);else if(A.keyCode==35)this.moveSelection(this.items.length-1);else if(A.keyCode==13)this.view.focus();else if(A.keyCode>=65&&A.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:z}=this.items[this.selectedIndex],ye=B(z.actions);for(let De=0;De<ye.length;De++)if(ye[De].toUpperCase().charCodeAt(0)==A.keyCode){let s=J(this.view.state.field(Be).diagnostics,z);s&&z.actions[De].apply(de,s.from,s.to)}}else return;A.preventDefault()},K=A=>{for(let z=0;z<this.items.length;z++)this.items[z].dom.contains(A.target)&&this.moveSelection(z)};this.list=$.default("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:Ee,onclick:K}),this.dom=$.default("div",{class:"cm-panel-lint"},this.list,$.default("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>j(this.view)},"\xD7")),this.update()}get selectedIndex(){let de=this.view.state.field(Be).selected;if(!de)return-1;for(let Ee=0;Ee<this.items.length;Ee++)if(this.items[Ee].diagnostic==de.diagnostic)return Ee;return-1}update(){let{diagnostics:de,selected:Ee}=this.view.state.field(Be),K=0,A=!1,z=null;for(de.between(0,this.view.state.doc.length,(ye,De,{spec:s})=>{let C=-1,l;for(let d=K;d<this.items.length;d++)if(this.items[d].diagnostic==s.diagnostic){C=d;break}C<0?(l=new U(this.view,s.diagnostic),this.items.splice(K,0,l),A=!0):(l=this.items[C],C>K&&(this.items.splice(K,C-K),A=!0)),Ee&&l.diagnostic==Ee.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),z=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),K++});K<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)A=!0,this.items.pop();this.items.length==0&&(this.items.push(new U(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),A=!0),z?(this.list.setAttribute("aria-activedescendant",z.id),this.view.requestMeasure({key:this,read:()=>({sel:z.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:ye,panel:De})=>{ye.top<De.top?this.list.scrollTop-=De.top-ye.top:ye.bottom>De.bottom&&(this.list.scrollTop+=ye.bottom-De.bottom)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),A&&this.sync()}sync(){let de=this.list.firstChild;function Ee(){let K=de;de=K.nextSibling,K.remove()}for(let K of this.items)if(K.dom.parentNode==this.list){for(;de!=K.dom;)Ee();de=K.dom.nextSibling}else this.list.insertBefore(K.dom,de);for(;de;)Ee()}moveSelection(de){if(this.selectedIndex<0)return;let Ee=this.view.state.field(Be),K=J(Ee.diagnostics,this.items[de].diagnostic);K&&this.view.dispatch({selection:{anchor:K.from,head:K.to},scrollIntoView:!0,effects:Me.of(K)})}static open(de){return new Te(de)}}function je(he,de='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${de}>${encodeURIComponent(he)}</svg>')`}function le(he){return je(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${he}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const Qe=g.EditorView.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:le("#d11")},".cm-lintRange-warning":{backgroundImage:le("orange")},".cm-lintRange-info":{backgroundImage:le("#999")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});class ot extends F.GutterMarker{constructor(de){super(),this.diagnostics=de,this.severity=de.reduce((Ee,K)=>{let A=K.severity;return A=="error"||A=="warning"&&Ee=="info"?A:Ee},"info")}toDOM(de){let Ee=document.createElement("div");return Ee.className="cm-lint-marker cm-lint-marker-"+this.severity,Ee.onmouseover=()=>ut(de,Ee,this.diagnostics),Ee}}function nt(he,de){let Ee=K=>{let A=de.getBoundingClientRect();if(!(K.clientX>A.left-10&&K.clientX<A.right+10&&K.clientY>A.top-10&&K.clientY<A.bottom+10)){for(let z=K.target;z;z=z.parentNode)if(z.nodeType==1&&z.classList.contains("cm-tooltip-lint"))return;window.removeEventListener("mousemove",Ee),he.state.field(I)&&he.dispatch({effects:P.of(null)})}};window.addEventListener("mousemove",Ee)}function ut(he,de,Ee){function K(){let ye=he.elementAtHeight(de.getBoundingClientRect().top+5-he.documentTop);he.coordsAtPos(ye.from)&&he.dispatch({effects:P.of({pos:ye.from,above:!1,create(){return{dom:re(he,Ee),getCoords:()=>de.getBoundingClientRect()}}})}),de.onmouseout=de.onmousemove=null,nt(he,de)}let{hoverTime:A}=he.state.facet(fe),z=setTimeout(K,A);de.onmouseout=()=>{clearTimeout(z),de.onmouseout=de.onmousemove=null},de.onmousemove=()=>{clearTimeout(z),z=setTimeout(K,A)}}function me(he,de){let Ee=Object.create(null);for(let A of de){let z=he.lineAt(A.from);(Ee[z.from]||(Ee[z.from]=[])).push(A)}let K=[];for(let A in Ee)K.push(new ot(Ee[A]).range(+A));return ue.RangeSet.of(K,!0)}const v=F.gutter({class:"cm-gutter-lint",markers:he=>he.state.field(M)}),M=H.StateField.define({create(){return ue.RangeSet.empty},update(he,de){he=he.map(de.changes);for(let Ee of de.effects)Ee.is(xe)&&(he=me(de.state.doc,Ee.value));return he}}),P=H.StateEffect.define(),I=H.StateField.define({create(){return null},update(he,de){return he&&de.docChanged&&(he=Object.assign(Object.assign({},he),{pos:de.changes.mapPos(he.pos)})),de.effects.reduce((Ee,K)=>K.is(P)?K.value:Ee,he)},provide:he=>G.showTooltip.from(he)}),ie=g.EditorView.baseTheme({".cm-gutter-lint":{width:"1.4em","& .cm-gutterElement":{padding:".2em"}},".cm-lint-marker":{width:"1em",height:"1em"},".cm-lint-marker-info":{content:je('<path fill="#aaf" stroke="#77e" stroke-width="6" stroke-linejoin="round" d="M5 5L35 5L35 35L5 35Z"/>')},".cm-lint-marker-warning":{content:je('<path fill="#fe8" stroke="#fd7" stroke-width="6" stroke-linejoin="round" d="M20 6L37 35L3 35Z"/>')},".cm-lint-marker-error:before":{content:je('<circle cx="20" cy="20" r="15" fill="#f87" stroke="#f43" stroke-width="6"/>')}}),fe=H.Facet.define({combine(he){return H.combineConfig(he,{hoverTime:300})}});function Ve(he={}){return[fe.of(he),M,v,ie,I]}m.closeLintPanel=j,m.diagnosticCount=q,m.forceLinting=S,m.lintGutter=Ve,m.lintKeymap=f,m.linter=u,m.nextDiagnostic=c,m.openLintPanel=Ae,m.setDiagnostics=Fe,m.setDiagnosticsEffect=xe},76844:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040),H=T(80729),G=T(23642),se=T(87897);const F=G.EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),ue=1e4,pe="()[]{}",Q=g.Facet.define({combine(Be){return g.combineConfig(Be,{afterCursor:!0,brackets:pe,maxScanDistance:ue})}}),$=G.Decoration.mark({class:"cm-matchingBracket"}),ce=G.Decoration.mark({class:"cm-nonmatchingBracket"}),J=[g.StateField.define({create(){return G.Decoration.none},update(Be,q){if(!q.docChanged&&!q.selection)return Be;let D=[],R=q.state.facet(Q);for(let re of q.state.selection.ranges){if(!re.empty)continue;let Ae=xe(q.state,re.head,-1,R)||re.head>0&&xe(q.state,re.head-1,1,R)||R.afterCursor&&(xe(q.state,re.head,1,R)||re.head<q.state.doc.length&&xe(q.state,re.head+1,-1,R));if(!Ae)continue;let j=Ae.matched?$:ce;D.push(j.range(Ae.start.from,Ae.start.to)),Ae.end&&D.push(j.range(Ae.end.from,Ae.end.to))}return G.Decoration.set(D,!0)},provide:Be=>G.EditorView.decorations.from(Be)}),F];function Y(Be={}){return[Q.of(Be),J]}function Fe(Be,q,D){let R=Be.prop(q<0?se.NodeProp.openedBy:se.NodeProp.closedBy);if(R)return R;if(Be.name.length==1){let re=D.indexOf(Be.name);if(re>-1&&re%2==(q<0?1:0))return[D[re+q]]}return null}function xe(Be,q,D,R={}){let re=R.maxScanDistance||ue,Ae=R.brackets||pe,j=H.syntaxTree(Be),c=j.resolveInner(q,D);for(let f=c;f;f=f.parent){let p=Fe(f.type,D,Ae);if(p&&f.from<f.to)return ve(Be,q,D,f,p,Ae)}return Me(Be,q,D,j,c.type,re,Ae)}function ve(Be,q,D,R,re,Ae){let j=R.parent,c={from:R.from,to:R.to},f=0,p=j==null?void 0:j.cursor;if(p&&(D<0?p.childBefore(R.from):p.childAfter(R.to)))do if(D<0?p.to<=R.from:p.from>=R.to){if(f==0&&re.indexOf(p.type.name)>-1&&p.from<p.to)return{start:c,end:{from:p.from,to:p.to},matched:!0};if(Fe(p.type,D,Ae))f++;else if(Fe(p.type,-D,Ae)&&(f--,f==0))return{start:c,end:p.from==p.to?void 0:{from:p.from,to:p.to},matched:!1}}while(D<0?p.prevSibling():p.nextSibling());return{start:c,matched:!1}}function Me(Be,q,D,R,re,Ae,j){let c=D<0?Be.sliceDoc(q-1,q):Be.sliceDoc(q,q+1),f=j.indexOf(c);if(f<0||f%2==0!=D>0)return null;let p={from:D<0?q-1:q,to:D>0?q+1:q},x=Be.doc.iterRange(q,D>0?Be.doc.length:0),u=0;for(let S=0;!x.next().done&&S<=Ae;){let B=x.value;D<0&&(S+=B.length);let _=q+S*D;for(let O=D>0?0:B.length-1,U=D>0?B.length:-1;O!=U;O+=D){let Te=j.indexOf(B[O]);if(!(Te<0||R.resolve(_+O,1).type!=re))if(Te%2==0==D>0)u++;else{if(u==1)return{start:p,end:{from:_+O,to:_+O+1},matched:Te>>1==f>>1};u--}}D>0&&(S+=B.length)}return x.done?{start:p,matched:!1}:null}m.bracketMatching=Y,m.matchBrackets=xe},63392:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(23642),H=T(17040);const G=H.Facet.define({combine(ae){let J,Y;for(let Fe of ae)J=J||Fe.topContainer,Y=Y||Fe.bottomContainer;return{topContainer:J,bottomContainer:Y}}});function se(ae){return ae?[G.of(ae)]:[]}function F(ae,J){let Y=ae.plugin(ue),Fe=Y?Y.specs.indexOf(J):-1;return Fe>-1?Y.panels[Fe]:null}const ue=g.ViewPlugin.fromClass(class{constructor(ae){this.input=ae.state.facet(ce),this.specs=this.input.filter(Y=>Y),this.panels=this.specs.map(Y=>Y(ae));let J=ae.state.facet(G);this.top=new pe(ae,!0,J.topContainer),this.bottom=new pe(ae,!1,J.bottomContainer),this.top.sync(this.panels.filter(Y=>Y.top)),this.bottom.sync(this.panels.filter(Y=>!Y.top));for(let Y of this.panels)Y.dom.classList.add("cm-panel"),Y.mount&&Y.mount()}update(ae){let J=ae.state.facet(G);this.top.container!=J.topContainer&&(this.top.sync([]),this.top=new pe(ae.view,!0,J.topContainer)),this.bottom.container!=J.bottomContainer&&(this.bottom.sync([]),this.bottom=new pe(ae.view,!1,J.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let Y=ae.state.facet(ce);if(Y!=this.input){let Fe=Y.filter(q=>q),xe=[],ve=[],Me=[],Be=[];for(let q of Fe){let D=this.specs.indexOf(q),R;D<0?(R=q(ae.view),Be.push(R)):(R=this.panels[D],R.update&&R.update(ae)),xe.push(R),(R.top?ve:Me).push(R)}this.specs=Fe,this.panels=xe,this.top.sync(ve),this.bottom.sync(Me);for(let q of Be)q.dom.classList.add("cm-panel"),q.mount&&q.mount()}else for(let Fe of this.panels)Fe.update&&Fe.update(ae)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:g.PluginField.scrollMargins.from(ae=>({top:ae.top.scrollMargin(),bottom:ae.bottom.scrollMargin()}))});class pe{constructor(J,Y,Fe){this.view=J,this.top=Y,this.container=Fe,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(J){for(let Y of this.panels)Y.destroy&&J.indexOf(Y)<0&&Y.destroy();this.panels=J,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let Y=this.container||this.view.dom;Y.insertBefore(this.dom,this.top?Y.firstChild:null)}let J=this.dom.firstChild;for(let Y of this.panels)if(Y.dom.parentNode==this.dom){for(;J!=Y.dom;)J=Q(J);J=J.nextSibling}else this.dom.insertBefore(Y.dom,J);for(;J;)J=Q(J)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let J of this.classes.split(" "))J&&this.container.classList.remove(J);for(let J of(this.classes=this.view.themeClasses).split(" "))J&&this.container.classList.add(J)}}}function Q(ae){let J=ae.nextSibling;return ae.remove(),J}const $=g.EditorView.baseTheme({".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"}}),ce=H.Facet.define({enables:[ue,$]});m.getPanel=F,m.panels=se,m.showPanel=ce},88648:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040);class H{eq(D){return this==D}range(D,R=D){return new G(D,R,this)}}H.prototype.startSide=H.prototype.endSide=0,H.prototype.point=!1,H.prototype.mapMode=g.MapMode.TrackDel;class G{constructor(D,R,re){this.from=D,this.to=R,this.value=re}}function se(q,D){return q.from-D.from||q.value.startSide-D.value.startSide}class F{constructor(D,R,re,Ae){this.from=D,this.to=R,this.value=re,this.maxPoint=Ae}get length(){return this.to[this.to.length-1]}findIndex(D,R,re,Ae=0){let j=re?this.to:this.from;for(let c=Ae,f=j.length;;){if(c==f)return c;let p=c+f>>1,x=j[p]-D||(re?this.value[p].endSide:this.value[p].startSide)-R;if(p==c)return x>=0?c:f;x>=0?f=p:c=p+1}}between(D,R,re,Ae){for(let j=this.findIndex(R,-1e9,!0),c=this.findIndex(re,1e9,!1,j);j<c;j++)if(Ae(this.from[j]+D,this.to[j]+D,this.value[j])===!1)return!1}map(D,R){let re=[],Ae=[],j=[],c=-1,f=-1;for(let p=0;p<this.value.length;p++){let x=this.value[p],u=this.from[p]+D,S=this.to[p]+D,B,_;if(u==S){let O=R.mapPos(u,x.startSide,x.mapMode);if(O==null||(B=_=O,x.startSide!=x.endSide&&(_=R.mapPos(u,x.endSide),_<B)))continue}else if(B=R.mapPos(u,x.startSide),_=R.mapPos(S,x.endSide),B>_||B==_&&x.startSide>0&&x.endSide<=0)continue;(_-B||x.endSide-x.startSide)<0||(c<0&&(c=B),x.point&&(f=Math.max(f,_-B)),re.push(x),Ae.push(B-c),j.push(_-c))}return{mapped:re.length?new F(Ae,j,re,f):null,pos:c}}}class ue{constructor(D,R,re=ue.empty,Ae){this.chunkPos=D,this.chunk=R,this.nextLayer=re,this.maxPoint=Ae}get length(){let D=this.chunk.length-1;return D<0?0:Math.max(this.chunkEnd(D),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let D=this.nextLayer.size;for(let R of this.chunk)D+=R.value.length;return D}chunkEnd(D){return this.chunkPos[D]+this.chunk[D].length}update(D){let{add:R=[],sort:re=!1,filterFrom:Ae=0,filterTo:j=this.length}=D,c=D.filter;if(R.length==0&&!c)return this;if(re&&(R=R.slice().sort(se)),this.isEmpty)return R.length?ue.of(R):this;let f=new ce(this,null,-1).goto(0),p=0,x=[],u=new Q;for(;f.value||p<R.length;)if(p<R.length&&(f.from-R[p].from||f.startSide-R[p].value.startSide)>=0){let S=R[p++];u.addInner(S.from,S.to,S.value)||x.push(S)}else f.rangeIndex==1&&f.chunkIndex<this.chunk.length&&(p==R.length||this.chunkEnd(f.chunkIndex)<R[p].from)&&(!c||Ae>this.chunkEnd(f.chunkIndex)||j<this.chunkPos[f.chunkIndex])&&u.addChunk(this.chunkPos[f.chunkIndex],this.chunk[f.chunkIndex])?f.nextChunk():((!c||Ae>f.to||j<f.from||c(f.from,f.to,f.value))&&(u.addInner(f.from,f.to,f.value)||x.push(new G(f.from,f.to,f.value))),f.next());return u.finishInner(this.nextLayer.isEmpty&&!x.length?ue.empty:this.nextLayer.update({add:x,filter:c,filterFrom:Ae,filterTo:j}))}map(D){if(D.empty||this.isEmpty)return this;let R=[],re=[],Ae=-1;for(let c=0;c<this.chunk.length;c++){let f=this.chunkPos[c],p=this.chunk[c],x=D.touchesRange(f,f+p.length);if(x===!1)Ae=Math.max(Ae,p.maxPoint),R.push(p),re.push(D.mapPos(f));else if(x===!0){let{mapped:u,pos:S}=p.map(f,D);u&&(Ae=Math.max(Ae,u.maxPoint),R.push(u),re.push(S))}}let j=this.nextLayer.map(D);return R.length==0?j:new ue(re,R,j,Ae)}between(D,R,re){if(!this.isEmpty){for(let Ae=0;Ae<this.chunk.length;Ae++){let j=this.chunkPos[Ae],c=this.chunk[Ae];if(R>=j&&D<=j+c.length&&c.between(j,D-j,R-j,re)===!1)return}this.nextLayer.between(D,R,re)}}iter(D=0){return ae.from([this]).goto(D)}get isEmpty(){return this.nextLayer==this}static iter(D,R=0){return ae.from(D).goto(R)}static compare(D,R,re,Ae,j=-1){let c=D.filter(S=>S.maxPoint>0||!S.isEmpty&&S.maxPoint>=j),f=R.filter(S=>S.maxPoint>0||!S.isEmpty&&S.maxPoint>=j),p=$(c,f,re),x=new Y(c,p,j),u=new Y(f,p,j);re.iterGaps((S,B,_)=>Fe(x,S,u,B,_,Ae)),re.empty&&re.length==0&&Fe(x,0,u,0,0,Ae)}static eq(D,R,re=0,Ae){Ae==null&&(Ae=1e9);let j=D.filter(u=>!u.isEmpty&&R.indexOf(u)<0),c=R.filter(u=>!u.isEmpty&&D.indexOf(u)<0);if(j.length!=c.length)return!1;if(!j.length)return!0;let f=$(j,c),p=new Y(j,f,0).goto(re),x=new Y(c,f,0).goto(re);for(;;){if(p.to!=x.to||!xe(p.active,x.active)||p.point&&(!x.point||!p.point.eq(x.point)))return!1;if(p.to>Ae)return!0;p.next(),x.next()}}static spans(D,R,re,Ae,j=-1){var c;let f=new Y(D,null,j,(c=Ae.filterPoint)===null||c===void 0?void 0:c.bind(Ae)).goto(R),p=R,x=f.openStart;for(;;){let u=Math.min(f.to,re);if(f.point?(Ae.point(p,u,f.point,f.activeForPoint(f.to),x),x=f.openEnd(u)+(f.to>u?1:0)):u>p&&(Ae.span(p,u,f.active,x),x=f.openEnd(u)),f.to>re)break;p=f.to,f.next()}return x}static of(D,R=!1){let re=new Q;for(let Ae of D instanceof G?[D]:R?pe(D):D)re.add(Ae.from,Ae.to,Ae.value);return re.finish()}}ue.empty=new ue([],[],null,-1);function pe(q){if(q.length>1)for(let D=q[0],R=1;R<q.length;R++){let re=q[R];if(se(D,re)>0)return q.slice().sort(se);D=re}return q}ue.empty.nextLayer=ue.empty;class Q{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(D){this.chunks.push(new F(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,D&&(this.from=[],this.to=[],this.value=[])}add(D,R,re){this.addInner(D,R,re)||(this.nextLayer||(this.nextLayer=new Q)).add(D,R,re)}addInner(D,R,re){let Ae=D-this.lastTo||re.startSide-this.last.endSide;if(Ae<=0&&(D-this.lastFrom||re.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return Ae<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=D),this.from.push(D-this.chunkStart),this.to.push(R-this.chunkStart),this.last=re,this.lastFrom=D,this.lastTo=R,this.value.push(re),re.point&&(this.maxPoint=Math.max(this.maxPoint,R-D)),!0)}addChunk(D,R){if((D-this.lastTo||R.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,R.maxPoint),this.chunks.push(R),this.chunkPos.push(D);let re=R.value.length-1;return this.last=R.value[re],this.lastFrom=R.from[re]+D,this.lastTo=R.to[re]+D,!0}finish(){return this.finishInner(ue.empty)}finishInner(D){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return D;let R=new ue(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(D):D,this.setMaxPoint);return this.from=null,R}}function $(q,D,R){let re=new Map;for(let j of q)for(let c=0;c<j.chunk.length;c++)j.chunk[c].maxPoint<=0&&re.set(j.chunk[c],j.chunkPos[c]);let Ae=new Set;for(let j of D)for(let c=0;c<j.chunk.length;c++){let f=re.get(j.chunk[c]);f!=null&&(R?R.mapPos(f):f)==j.chunkPos[c]&&!(R!=null&&R.touchesRange(f,f+j.chunk[c].length))&&Ae.add(j.chunk[c])}return Ae}class ce{constructor(D,R,re,Ae=0){this.layer=D,this.skip=R,this.minPoint=re,this.rank=Ae}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(D,R=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(D,R,!1),this}gotoInner(D,R,re){for(;this.chunkIndex<this.layer.chunk.length;){let Ae=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(Ae)||this.layer.chunkEnd(this.chunkIndex)<D||Ae.maxPoint<this.minPoint))break;this.chunkIndex++,re=!1}if(this.chunkIndex<this.layer.chunk.length){let Ae=this.layer.chunk[this.chunkIndex].findIndex(D-this.layer.chunkPos[this.chunkIndex],R,!0);(!re||this.rangeIndex<Ae)&&this.setRangeIndex(Ae)}this.next()}forward(D,R){(this.to-D||this.endSide-R)<0&&this.gotoInner(D,R,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let D=this.layer.chunkPos[this.chunkIndex],R=this.layer.chunk[this.chunkIndex],re=D+R.from[this.rangeIndex];if(this.from=re,this.to=D+R.to[this.rangeIndex],this.value=R.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(D){if(D==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=D}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(D){return this.from-D.from||this.startSide-D.startSide||this.rank-D.rank||this.to-D.to||this.endSide-D.endSide}}class ae{constructor(D){this.heap=D}static from(D,R=null,re=-1){let Ae=[];for(let j=0;j<D.length;j++)for(let c=D[j];!c.isEmpty;c=c.nextLayer)c.maxPoint>=re&&Ae.push(new ce(c,R,re,j));return Ae.length==1?Ae[0]:new ae(Ae)}get startSide(){return this.value?this.value.startSide:0}goto(D,R=-1e9){for(let re of this.heap)re.goto(D,R);for(let re=this.heap.length>>1;re>=0;re--)J(this.heap,re);return this.next(),this}forward(D,R){for(let re of this.heap)re.forward(D,R);for(let re=this.heap.length>>1;re>=0;re--)J(this.heap,re);(this.to-D||this.value.endSide-R)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let D=this.heap[0];this.from=D.from,this.to=D.to,this.value=D.value,this.rank=D.rank,D.value&&D.next(),J(this.heap,0)}}}function J(q,D){for(let R=q[D];;){let re=(D<<1)+1;if(re>=q.length)break;let Ae=q[re];if(re+1<q.length&&Ae.compare(q[re+1])>=0&&(Ae=q[re+1],re++),R.compare(Ae)<0)break;q[re]=R,q[D]=Ae,D=re}}class Y{constructor(D,R,re,Ae=()=>!0){this.minPoint=re,this.filterPoint=Ae,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=ae.from(D,R,re)}goto(D,R=-1e9){return this.cursor.goto(D,R),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=D,this.endSide=R,this.openStart=-1,this.next(),this}forward(D,R){for(;this.minActive>-1&&(this.activeTo[this.minActive]-D||this.active[this.minActive].endSide-R)<0;)this.removeActive(this.minActive);this.cursor.forward(D,R)}removeActive(D){ve(this.active,D),ve(this.activeTo,D),ve(this.activeRank,D),this.minActive=Be(this.active,this.activeTo)}addActive(D){let R=0,{value:re,to:Ae,rank:j}=this.cursor;for(;R<this.activeRank.length&&this.activeRank[R]<=j;)R++;Me(this.active,R,re),Me(this.activeTo,R,Ae),Me(this.activeRank,R,j),D&&Me(D,R,this.cursor.from),this.minActive=Be(this.active,this.activeTo)}next(){let D=this.to,R=this.point;this.point=null;let re=this.openStart<0?[]:null,Ae=0;for(;;){let j=this.minActive;if(j>-1&&(this.activeTo[j]-this.cursor.from||this.active[j].endSide-this.cursor.startSide)<0){if(this.activeTo[j]>D){this.to=this.activeTo[j],this.endSide=this.active[j].endSide;break}this.removeActive(j),re&&ve(re,j)}else if(this.cursor.value)if(this.cursor.from>D){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let c=this.cursor.value;if(!c.point)this.addActive(re),this.cursor.next();else if(R&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else if(!this.filterPoint(this.cursor.from,this.cursor.to,this.cursor.value,this.cursor.rank))this.cursor.next();else{this.point=c,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=c.endSide,this.cursor.from<D&&(Ae=1),this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(re){let j=0;for(;j<re.length&&re[j]<D;)j++;this.openStart=j+Ae}}activeForPoint(D){if(!this.active.length)return this.active;let R=[];for(let re=this.active.length-1;re>=0&&!(this.activeRank[re]<this.pointRank);re--)(this.activeTo[re]>D||this.activeTo[re]==D&&this.active[re].endSide>=this.point.endSide)&&R.push(this.active[re]);return R.reverse()}openEnd(D){let R=0;for(let re=this.activeTo.length-1;re>=0&&this.activeTo[re]>D;re--)R++;return R}}function Fe(q,D,R,re,Ae,j){q.goto(D),R.goto(re);let c=re+Ae,f=re,p=re-D;for(;;){let x=q.to+p-R.to||q.endSide-R.endSide,u=x<0?q.to+p:R.to,S=Math.min(u,c);if(q.point||R.point?q.point&&R.point&&(q.point==R.point||q.point.eq(R.point))&&xe(q.activeForPoint(q.to+p),R.activeForPoint(R.to))||j.comparePoint(f,S,q.point,R.point):S>f&&!xe(q.active,R.active)&&j.compareRange(f,S,q.active,R.active),u>c)break;f=u,x<=0&&q.next(),x>=0&&R.next()}}function xe(q,D){if(q.length!=D.length)return!1;for(let R=0;R<q.length;R++)if(q[R]!=D[R]&&!q[R].eq(D[R]))return!1;return!0}function ve(q,D){for(let R=D,re=q.length-1;R<re;R++)q[R]=q[R+1];q.pop()}function Me(q,D,R){for(let re=q.length-1;re>=D;re--)q[re+1]=q[re];q[D]=R}function Be(q,D){let R=-1,re=1e9;for(let Ae=0;Ae<D.length;Ae++)(D[Ae]-re||q[Ae].endSide-q[R].endSide)<0&&(R=Ae,re=D[Ae]);return R}m.Range=G,m.RangeSet=ue,m.RangeSetBuilder=Q,m.RangeValue=H},63105:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040),H=T(23642),G=T(18907);const se=2e3;function F(Y,Fe,xe){let ve=Math.min(Fe.line,xe.line),Me=Math.max(Fe.line,xe.line),Be=[];if(Fe.off>se||xe.off>se||Fe.col<0||xe.col<0){let q=Math.min(Fe.off,xe.off),D=Math.max(Fe.off,xe.off);for(let R=ve;R<=Me;R++){let re=Y.doc.line(R);re.length<=D&&Be.push(g.EditorSelection.range(re.from+q,re.to+D))}}else{let q=Math.min(Fe.col,xe.col),D=Math.max(Fe.col,xe.col);for(let R=ve;R<=Me;R++){let re=Y.doc.line(R),Ae=G.findColumn(re.text,q,Y.tabSize,!0);if(Ae>-1){let j=G.findColumn(re.text,D,Y.tabSize);Be.push(g.EditorSelection.range(re.from+Ae,re.from+j))}}}return Be}function ue(Y,Fe){let xe=Y.coordsAtPos(Y.viewport.from);return xe?Math.round(Math.abs((xe.left-Fe)/Y.defaultCharacterWidth)):-1}function pe(Y,Fe){let xe=Y.posAtCoords({x:Fe.clientX,y:Fe.clientY},!1),ve=Y.state.doc.lineAt(xe),Me=xe-ve.from,Be=Me>se?-1:Me==ve.length?ue(Y,Fe.clientX):G.countColumn(ve.text,Y.state.tabSize,xe-ve.from);return{line:ve.number,col:Be,off:Me}}function Q(Y,Fe){let xe=pe(Y,Fe),ve=Y.state.selection;return xe?{update(Me){if(Me.docChanged){let Be=Me.changes.mapPos(Me.startState.doc.line(xe.line).from),q=Me.state.doc.lineAt(Be);xe={line:q.number,col:xe.col,off:Math.min(xe.off,q.length)},ve=ve.map(Me.changes)}},get(Me,Be,q){let D=pe(Y,Me);if(!D)return ve;let R=F(Y.state,xe,D);return R.length?q?g.EditorSelection.create(R.concat(ve.ranges)):g.EditorSelection.create(R):ve}}:null}function $(Y){let Fe=(Y==null?void 0:Y.eventFilter)||(xe=>xe.altKey&&xe.button==0);return H.EditorView.mouseSelectionStyle.of((xe,ve)=>Fe(ve)?Q(xe,ve):null)}const ce={Alt:[18,Y=>Y.altKey],Control:[17,Y=>Y.ctrlKey],Shift:[16,Y=>Y.shiftKey],Meta:[91,Y=>Y.metaKey]},ae={style:"cursor: crosshair"};function J(Y={}){let[Fe,xe]=ce[Y.key||"Alt"],ve=H.ViewPlugin.fromClass(class{constructor(Me){this.view=Me,this.isDown=!1}set(Me){this.isDown!=Me&&(this.isDown=Me,this.view.update([]))}},{eventHandlers:{keydown(Me){this.set(Me.keyCode==Fe||xe(Me))},keyup(Me){(Me.keyCode==Fe||!xe(Me))&&this.set(!1)}}});return[ve,H.EditorView.contentAttributes.of(Me=>{var Be;return!((Be=Me.plugin(ve))===null||Be===void 0)&&Be.isDown?ae:null})]}m.crosshairCursor=J,m.rectangularSelection=$},22502:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(23642),H=T(17040),G=T(63392),se=T(88648),F=T(68513),ue=T(18907);function pe(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var Q=pe(F);const $=typeof String.prototype.normalize=="function"?a=>a.normalize("NFKD"):a=>a;class ce{constructor(k,N,X=0,ne=k.length,we){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=k.iterRange(X,ne),this.bufferStart=X,this.normalize=we?$e=>we($($e)):$,this.query=this.normalize(N)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return ue.codePointAt(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let k=this.peek();if(k<0)return this.done=!0,this;let N=ue.fromCodePoint(k),X=this.bufferStart+this.bufferPos;this.bufferPos+=ue.codePointSize(k);let ne=this.normalize(N);for(let we=0,$e=X;;we++){let Ge=ne.charCodeAt(we),et=this.match(Ge,$e);if(et)return this.value=et,this;if(we==ne.length-1)break;$e==X&&we<N.length&&N.charCodeAt(we)==Ge&&$e++}}}match(k,N){let X=null;for(let ne=0;ne<this.matches.length;ne+=2){let we=this.matches[ne],$e=!1;this.query.charCodeAt(we)==k&&(we==this.query.length-1?X={from:this.matches[ne+1],to:N+1}:(this.matches[ne]++,$e=!0)),$e||(this.matches.splice(ne,2),ne-=2)}return this.query.charCodeAt(0)==k&&(this.query.length==1?X={from:N,to:N+1}:this.matches.push(1,N)),X}}typeof Symbol!="undefined"&&(ce.prototype[Symbol.iterator]=function(){return this});const ae={from:-1,to:-1,match:/.*/.exec("")},J="gm"+(/x/.unicode==null?"":"u");class Y{constructor(k,N,X,ne=0,we=k.length){if(this.to=we,this.curLine="",this.done=!1,this.value=ae,/\\[sWDnr]|\n|\r|\[\^/.test(N))return new ve(k,N,X,ne,we);this.re=new RegExp(N,J+(X!=null&&X.ignoreCase?"i":"")),this.iter=k.iter();let $e=k.lineAt(ne);this.curLineStart=$e.from,this.matchPos=ne,this.getLine(this.curLineStart)}getLine(k){this.iter.next(k),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let k=this.matchPos-this.curLineStart;;){this.re.lastIndex=k;let N=this.matchPos<=this.to&&this.re.exec(this.curLine);if(N){let X=this.curLineStart+N.index,ne=X+N[0].length;if(this.matchPos=ne+(X==ne?1:0),X==this.curLine.length&&this.nextLine(),X<ne||X>this.value.to)return this.value={from:X,to:ne,match:N},this;k=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),k=0;else return this.done=!0,this}}}const Fe=new WeakMap;class xe{constructor(k,N){this.from=k,this.text=N}get to(){return this.from+this.text.length}static get(k,N,X){let ne=Fe.get(k);if(!ne||ne.from>=X||ne.to<=N){let Ge=new xe(N,k.sliceString(N,X));return Fe.set(k,Ge),Ge}if(ne.from==N&&ne.to==X)return ne;let{text:we,from:$e}=ne;return $e>N&&(we=k.sliceString(N,$e)+we,$e=N),ne.to<X&&(we+=k.sliceString(ne.to,X)),Fe.set(k,new xe($e,we)),new xe(N,we.slice(N-$e,X-$e))}}class ve{constructor(k,N,X,ne,we){this.text=k,this.to=we,this.done=!1,this.value=ae,this.matchPos=ne,this.re=new RegExp(N,J+(X!=null&&X.ignoreCase?"i":"")),this.flat=xe.get(k,ne,this.chunkEnd(ne+5e3))}chunkEnd(k){return k>=this.to?this.to:this.text.lineAt(k).to}next(){for(;;){let k=this.re.lastIndex=this.matchPos-this.flat.from,N=this.re.exec(this.flat.text);if(N&&!N[0]&&N.index==k&&(this.re.lastIndex=k+1,N=this.re.exec(this.flat.text)),N&&this.flat.to<this.to&&N.index+N[0].length>this.flat.text.length-10&&(N=null),N){let X=this.flat.from+N.index,ne=X+N[0].length;return this.value={from:X,to:ne,match:N},this.matchPos=ne+(X==ne?1:0),this}else{if(this.flat.to==this.to)return this.done=!0,this;this.flat=xe.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}}typeof Symbol!="undefined"&&(Y.prototype[Symbol.iterator]=ve.prototype[Symbol.iterator]=function(){return this});function Me(a){try{return new RegExp(a,J),!0}catch(k){return!1}}function Be(a){let k=Q.default("input",{class:"cm-textfield",name:"line"}),N=Q.default("form",{class:"cm-gotoLine",onkeydown:ne=>{ne.keyCode==27?(ne.preventDefault(),a.dispatch({effects:q.of(!1)}),a.focus()):ne.keyCode==13&&(ne.preventDefault(),X())},onsubmit:ne=>{ne.preventDefault(),X()}},Q.default("label",a.state.phrase("Go to line"),": ",k)," ",Q.default("button",{class:"cm-button",type:"submit"},a.state.phrase("go")));function X(){let ne=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(k.value);if(!ne)return;let{state:we}=a,$e=we.doc.lineAt(we.selection.main.head),[,Ge,et,ht,gt]=ne,St=ht?+ht.slice(1):0,bt=et?+et:$e.number;if(et&&gt){let Zt=bt/100;Ge&&(Zt=Zt*(Ge=="-"?-1:1)+$e.number/we.doc.lines),bt=Math.round(we.doc.lines*Zt)}else et&&Ge&&(bt=bt*(Ge=="-"?-1:1)+$e.number);let Gt=we.doc.line(Math.max(1,Math.min(we.doc.lines,bt)));a.dispatch({effects:q.of(!1),selection:H.EditorSelection.cursor(Gt.from+Math.max(0,Math.min(St,Gt.length))),scrollIntoView:!0}),a.focus()}return{dom:N,pos:-10}}const q=H.StateEffect.define(),D=H.StateField.define({create(){return!0},update(a,k){for(let N of k.effects)N.is(q)&&(a=N.value);return a},provide:a=>G.showPanel.from(a,k=>k?Be:null)}),R=a=>{let k=G.getPanel(a,Be);if(!k){let N=[q.of(!0)];a.state.field(D,!1)==null&&N.push(H.StateEffect.appendConfig.of([D,re])),a.dispatch({effects:N}),k=G.getPanel(a,Be)}return k&&k.dom.querySelector("input").focus(),!0},re=g.EditorView.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),Ae={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!0},j=H.Facet.define({combine(a){return H.combineConfig(a,Ae,{highlightWordAroundCursor:(k,N)=>k||N,minSelectionLength:Math.min,maxMatches:Math.min})}});function c(a){let k=[B,S];return a&&k.push(j.of(a)),k}const f=g.Decoration.mark({class:"cm-selectionMatch"}),p=g.Decoration.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function x(a,k,N,X){return(N==0||a(k.sliceDoc(N-1,N))!=H.CharCategory.Word)&&(X==k.doc.length||a(k.sliceDoc(X,X+1))!=H.CharCategory.Word)}function u(a,k,N,X){return a(k.sliceDoc(N,N+1))==H.CharCategory.Word&&a(k.sliceDoc(X-1,X))==H.CharCategory.Word}const S=g.ViewPlugin.fromClass(class{constructor(a){this.decorations=this.getDeco(a)}update(a){(a.selectionSet||a.docChanged||a.viewportChanged)&&(this.decorations=this.getDeco(a.view))}getDeco(a){let k=a.state.facet(j),{state:N}=a,X=N.selection;if(X.ranges.length>1)return g.Decoration.none;let ne=X.main,we,$e=null;if(ne.empty){if(!k.highlightWordAroundCursor)return g.Decoration.none;let et=N.wordAt(ne.head);if(!et)return g.Decoration.none;$e=N.charCategorizer(ne.head),we=N.sliceDoc(et.from,et.to)}else{let et=ne.to-ne.from;if(et<k.minSelectionLength||et>200)return g.Decoration.none;if(k.wholeWords){if(we=N.sliceDoc(ne.from,ne.to),$e=N.charCategorizer(ne.head),!(x($e,N,ne.from,ne.to)&&u($e,N,ne.from,ne.to)))return g.Decoration.none}else if(we=N.sliceDoc(ne.from,ne.to).trim(),!we)return g.Decoration.none}let Ge=[];for(let et of a.visibleRanges){let ht=new ce(N.doc,we,et.from,et.to);for(;!ht.next().done;){let{from:gt,to:St}=ht.value;if((!$e||x($e,N,gt,St))&&(ne.empty&&gt<=ne.from&&St>=ne.to?Ge.push(p.range(gt,St)):(gt>=ne.to||St<=ne.from)&&Ge.push(f.range(gt,St)),Ge.length>k.maxMatches))return g.Decoration.none}}return g.Decoration.set(Ge)}},{decorations:a=>a.decorations}),B=g.EditorView.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),_=({state:a,dispatch:k})=>{let{selection:N}=a,X=H.EditorSelection.create(N.ranges.map(ne=>a.wordAt(ne.head)||H.EditorSelection.cursor(ne.head)),N.mainIndex);return X.eq(N)?!1:(k(a.update({selection:X})),!0)};function O(a,k){let{main:N,ranges:X}=a.selection,ne=a.wordAt(N.head),we=ne&&ne.from==N.from&&ne.to==N.to;for(let $e=!1,Ge=new ce(a.doc,k,X[X.length-1].to);;)if(Ge.next(),Ge.done){if($e)return null;Ge=new ce(a.doc,k,0,Math.max(0,X[X.length-1].from-1)),$e=!0}else{if($e&&X.some(et=>et.from==Ge.value.from))continue;if(we){let et=a.wordAt(Ge.value.from);if(!et||et.from!=Ge.value.from||et.to!=Ge.value.to)continue}return Ge.value}}const U=({state:a,dispatch:k})=>{let{ranges:N}=a.selection;if(N.some(we=>we.from===we.to))return _({state:a,dispatch:k});let X=a.sliceDoc(N[0].from,N[0].to);if(a.selection.ranges.some(we=>a.sliceDoc(we.from,we.to)!=X))return!1;let ne=O(a,X);return ne?(k(a.update({selection:a.selection.addRange(H.EditorSelection.range(ne.from,ne.to),!1),effects:g.EditorView.scrollIntoView(ne.to)})),!0):!1},Te=H.Facet.define({combine(a){var k;return{top:a.reduce((N,X)=>N!=null?N:X.top,void 0)||!1,caseSensitive:a.reduce((N,X)=>N!=null?N:X.caseSensitive||X.matchCase,void 0)||!1,createPanel:((k=a.find(N=>N.createPanel))===null||k===void 0?void 0:k.createPanel)||(N=>new L(N))}}});function je(a){return a?[Te.of(a),_e]:_e}const le=je;class Qe{constructor(k){this.search=k.search,this.caseSensitive=!!k.caseSensitive,this.regexp=!!k.regexp,this.replace=k.replace||"",this.valid=!!this.search&&(!this.regexp||Me(this.search)),this.unquoted=this.search.replace(/\\([nrt\\])/g,(N,X)=>X=="n"?`
`:X=="r"?"\r":X=="t"?"	":"\\")}eq(k){return this.search==k.search&&this.replace==k.replace&&this.caseSensitive==k.caseSensitive&&this.regexp==k.regexp}create(){return this.regexp?new v(this):new ut(this)}getCursor(k,N=0,X=k.length){return this.regexp?me(this,k,N,X):nt(this,k,N,X)}}class ot{constructor(k){this.spec=k}}function nt(a,k,N,X){return new ce(k,a.unquoted,N,X,a.caseSensitive?void 0:ne=>ne.toLowerCase())}class ut extends ot{constructor(k){super(k)}nextMatch(k,N,X){let ne=nt(this.spec,k,X,k.length).nextOverlapping();return ne.done&&(ne=nt(this.spec,k,0,N).nextOverlapping()),ne.done?null:ne.value}prevMatchInRange(k,N,X){for(let ne=X;;){let we=Math.max(N,ne-1e4-this.spec.unquoted.length),$e=nt(this.spec,k,we,ne),Ge=null;for(;!$e.nextOverlapping().done;)Ge=$e.value;if(Ge)return Ge;if(we==N)return null;ne-=1e4}}prevMatch(k,N,X){return this.prevMatchInRange(k,0,N)||this.prevMatchInRange(k,X,k.length)}getReplacement(k){return this.spec.replace}matchAll(k,N){let X=nt(this.spec,k,0,k.length),ne=[];for(;!X.next().done;){if(ne.length>=N)return null;ne.push(X.value)}return ne}highlight(k,N,X,ne){let we=nt(this.spec,k,Math.max(0,N-this.spec.unquoted.length),Math.min(X+this.spec.unquoted.length,k.length));for(;!we.next().done;)ne(we.value.from,we.value.to)}}function me(a,k,N,X){return new Y(k,a.search,a.caseSensitive?void 0:{ignoreCase:!0},N,X)}class v extends ot{nextMatch(k,N,X){let ne=me(this.spec,k,X,k.length).next();return ne.done&&(ne=me(this.spec,k,0,N).next()),ne.done?null:ne.value}prevMatchInRange(k,N,X){for(let ne=1;;ne++){let we=Math.max(N,X-ne*1e4),$e=me(this.spec,k,we,X),Ge=null;for(;!$e.next().done;)Ge=$e.value;if(Ge&&(we==N||Ge.from>we+10))return Ge;if(we==N)return null}}prevMatch(k,N,X){return this.prevMatchInRange(k,0,N)||this.prevMatchInRange(k,X,k.length)}getReplacement(k){return this.spec.replace.replace(/\$([$&\d+])/g,(N,X)=>X=="$"?"$":X=="&"?k.match[0]:X!="0"&&+X<k.match.length?k.match[X]:N)}matchAll(k,N){let X=me(this.spec,k,0,k.length),ne=[];for(;!X.next().done;){if(ne.length>=N)return null;ne.push(X.value)}return ne}highlight(k,N,X,ne){let we=me(this.spec,k,Math.max(0,N-250),Math.min(X+250,k.length));for(;!we.next().done;)ne(we.value.from,we.value.to)}}const M=H.StateEffect.define(),P=H.StateEffect.define(),I=H.StateField.define({create(a){return new fe(l(a).create(),null)},update(a,k){for(let N of k.effects)N.is(M)?a=new fe(N.value.create(),a.panel):N.is(P)&&(a=new fe(a.query,N.value?C:null));return a},provide:a=>G.showPanel.from(a,k=>k.panel)});function ie(a){let k=a.field(I,!1);return k?k.query.spec:l(a)}class fe{constructor(k,N){this.query=k,this.panel=N}}const Ve=g.Decoration.mark({class:"cm-searchMatch"}),he=g.Decoration.mark({class:"cm-searchMatch cm-searchMatch-selected"}),de=g.ViewPlugin.fromClass(class{constructor(a){this.view=a,this.decorations=this.highlight(a.state.field(I))}update(a){let k=a.state.field(I);(k!=a.startState.field(I)||a.docChanged||a.selectionSet||a.viewportChanged)&&(this.decorations=this.highlight(k))}highlight({query:a,panel:k}){if(!k||!a.spec.valid)return g.Decoration.none;let{view:N}=this,X=new se.RangeSetBuilder;for(let ne=0,we=N.visibleRanges,$e=we.length;ne<$e;ne++){let{from:Ge,to:et}=we[ne];for(;ne<$e-1&&et>we[ne+1].from-2*250;)et=we[++ne].to;a.highlight(N.state.doc,Ge,et,(ht,gt)=>{let St=N.state.selection.ranges.some(bt=>bt.from==ht&&bt.to==gt);X.add(ht,gt,St?he:Ve)})}return X.finish()}},{decorations:a=>a.decorations});function Ee(a){return k=>{let N=k.state.field(I,!1);return N&&N.query.spec.valid?a(k,N):d(k)}}const K=Ee((a,{query:k})=>{let{from:N,to:X}=a.state.selection.main,ne=k.nextMatch(a.state.doc,N,X);return!ne||ne.from==N&&ne.to==X?!1:(a.dispatch({selection:{anchor:ne.from,head:ne.to},scrollIntoView:!0,effects:Ue(a,ne),userEvent:"select.search"}),!0)}),A=Ee((a,{query:k})=>{let{state:N}=a,{from:X,to:ne}=N.selection.main,we=k.prevMatch(N.doc,X,ne);return we?(a.dispatch({selection:{anchor:we.from,head:we.to},scrollIntoView:!0,effects:Ue(a,we),userEvent:"select.search"}),!0):!1}),z=Ee((a,{query:k})=>{let N=k.matchAll(a.state.doc,1e3);return!N||!N.length?!1:(a.dispatch({selection:H.EditorSelection.create(N.map(X=>H.EditorSelection.range(X.from,X.to))),userEvent:"select.search.matches"}),!0)}),ye=({state:a,dispatch:k})=>{let N=a.selection;if(N.ranges.length>1||N.main.empty)return!1;let{from:X,to:ne}=N.main,we=[],$e=0;for(let Ge=new ce(a.doc,a.sliceDoc(X,ne));!Ge.next().done;){if(we.length>1e3)return!1;Ge.value.from==X&&($e=we.length),we.push(H.EditorSelection.range(Ge.value.from,Ge.value.to))}return k(a.update({selection:H.EditorSelection.create(we,$e),userEvent:"select.search.matches"})),!0},De=Ee((a,{query:k})=>{let{state:N}=a,{from:X,to:ne}=N.selection.main;if(N.readOnly)return!1;let we=k.nextMatch(N.doc,X,X);if(!we)return!1;let $e=[],Ge,et;if(we.from==X&&we.to==ne&&(et=N.toText(k.getReplacement(we)),$e.push({from:we.from,to:we.to,insert:et}),we=k.nextMatch(N.doc,we.from,we.to)),we){let ht=$e.length==0||$e[0].from>=we.to?0:we.to-we.from-et.length;Ge={anchor:we.from-ht,head:we.to-ht}}return a.dispatch({changes:$e,selection:Ge,scrollIntoView:!!Ge,effects:we?Ue(a,we):void 0,userEvent:"input.replace"}),!0}),s=Ee((a,{query:k})=>{if(a.state.readOnly)return!1;let N=k.matchAll(a.state.doc,1e9).map(X=>{let{from:ne,to:we}=X;return{from:ne,to:we,insert:k.getReplacement(X)}});return N.length?(a.dispatch({changes:N,userEvent:"input.replace.all"}),!0):!1});function C(a){return a.state.facet(Te).createPanel(a)}function l(a,k){var N;let X=a.selection.main,ne=X.empty||X.to>X.from+100?"":a.sliceDoc(X.from,X.to),we=(N=k==null?void 0:k.caseSensitive)!==null&&N!==void 0?N:a.facet(Te).caseSensitive;return k&&!ne?k:new Qe({search:ne.replace(/\n/g,"\\n"),caseSensitive:we})}const d=a=>{let k=a.state.field(I,!1);if(k&&k.panel){let N=G.getPanel(a,C);if(!N)return!1;let X=N.dom.querySelector("[name=search]");if(X!=a.root.activeElement){let ne=l(a.state,k.query.spec);ne.valid&&a.dispatch({effects:M.of(ne)}),X.focus(),X.select()}}else a.dispatch({effects:[P.of(!0),k?M.of(l(a.state,k.query.spec)):H.StateEffect.appendConfig.of(_e)]});return!0},b=a=>{let k=a.state.field(I,!1);if(!k||!k.panel)return!1;let N=G.getPanel(a,C);return N&&N.dom.contains(a.root.activeElement)&&a.focus(),a.dispatch({effects:P.of(!1)}),!0},E=[{key:"Mod-f",run:d,scope:"editor search-panel"},{key:"F3",run:K,shift:A,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:K,shift:A,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:b,scope:"editor search-panel"},{key:"Mod-Shift-l",run:ye},{key:"Alt-g",run:R},{key:"Mod-d",run:U,preventDefault:!0}];class L{constructor(k){this.view=k;let N=this.query=k.state.field(I).query.spec;this.commit=this.commit.bind(this),this.searchField=Q.default("input",{value:N.search,placeholder:V(k,"Find"),"aria-label":V(k,"Find"),class:"cm-textfield",name:"search",onchange:this.commit,onkeyup:this.commit}),this.replaceField=Q.default("input",{value:N.replace,placeholder:V(k,"Replace"),"aria-label":V(k,"Replace"),class:"cm-textfield",name:"replace",onchange:this.commit,onkeyup:this.commit}),this.caseField=Q.default("input",{type:"checkbox",name:"case",checked:N.caseSensitive,onchange:this.commit}),this.reField=Q.default("input",{type:"checkbox",name:"re",checked:N.regexp,onchange:this.commit});function X(ne,we,$e){return Q.default("button",{class:"cm-button",name:ne,onclick:we,type:"button"},$e)}this.dom=Q.default("div",{onkeydown:ne=>this.keydown(ne),class:"cm-search"},[this.searchField,X("next",()=>K(k),[V(k,"next")]),X("prev",()=>A(k),[V(k,"previous")]),X("select",()=>z(k),[V(k,"all")]),Q.default("label",null,[this.caseField,V(k,"match case")]),Q.default("label",null,[this.reField,V(k,"regexp")]),...k.state.readOnly?[]:[Q.default("br"),this.replaceField,X("replace",()=>De(k),[V(k,"replace")]),X("replaceAll",()=>s(k),[V(k,"replace all")]),Q.default("button",{name:"close",onclick:()=>b(k),"aria-label":V(k,"close"),type:"button"},["\xD7"])]])}commit(){let k=new Qe({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,replace:this.replaceField.value});k.eq(this.query)||(this.query=k,this.view.dispatch({effects:M.of(k)}))}keydown(k){g.runScopeHandlers(this.view,k,"search-panel")?k.preventDefault():k.keyCode==13&&k.target==this.searchField?(k.preventDefault(),(k.shiftKey?A:K)(this.view)):k.keyCode==13&&k.target==this.replaceField&&(k.preventDefault(),De(this.view))}update(k){for(let N of k.transactions)for(let X of N.effects)X.is(M)&&!X.value.eq(this.query)&&this.setQuery(X.value)}setQuery(k){this.query=k,this.searchField.value=k.search,this.replaceField.value=k.replace,this.caseField.checked=k.caseSensitive,this.reField.checked=k.regexp}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(Te).top}}function V(a,k){return a.state.phrase(k)}const ge=30,Ne=/[\s\.,:;?!]/;function Ue(a,{from:k,to:N}){let X=a.state.doc.lineAt(k).from,ne=a.state.doc.lineAt(N).to,we=Math.max(X,k-ge),$e=Math.min(ne,N+ge),Ge=a.state.sliceDoc(we,$e);if(we!=X){for(let et=0;et<ge;et++)if(!Ne.test(Ge[et+1])&&Ne.test(Ge[et])){Ge=Ge.slice(et);break}}if($e!=ne){for(let et=Ge.length-1;et>Ge.length-ge;et--)if(!Ne.test(Ge[et-1])&&Ne.test(Ge[et])){Ge=Ge.slice(0,et);break}}return g.EditorView.announce.of(`${a.state.phrase("current match")}. ${Ge} ${a.state.phrase("on line")} ${a.state.doc.lineAt(k).number}`)}const Ke=g.EditorView.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),_e=[I,H.Prec.lowest(de),Ke];m.RegExpCursor=Y,m.SearchCursor=ce,m.SearchQuery=Qe,m.closeSearchPanel=b,m.findNext=K,m.findPrevious=A,m.getSearchQuery=ie,m.gotoLine=R,m.highlightSelectionMatches=c,m.openSearchPanel=d,m.replaceAll=s,m.replaceNext=De,m.search=je,m.searchConfig=le,m.searchKeymap=E,m.selectMatches=z,m.selectNextOccurrence=U,m.selectSelectionMatches=ye,m.setSearchQuery=M},17040:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(18907);const H=/\r\n?|\n/;m.MapMode=void 0,function(C){C[C.Simple=0]="Simple",C[C.TrackDel=1]="TrackDel",C[C.TrackBefore=2]="TrackBefore",C[C.TrackAfter=3]="TrackAfter"}(m.MapMode||(m.MapMode={}));class G{constructor(l){this.sections=l}get length(){let l=0;for(let d=0;d<this.sections.length;d+=2)l+=this.sections[d];return l}get newLength(){let l=0;for(let d=0;d<this.sections.length;d+=2){let b=this.sections[d+1];l+=b<0?this.sections[d]:b}return l}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(l){for(let d=0,b=0,E=0;d<this.sections.length;){let L=this.sections[d++],V=this.sections[d++];V<0?(l(b,E,L),E+=L):E+=V,b+=L}}iterChangedRanges(l,d=!1){pe(this,l,d)}get invertedDesc(){let l=[];for(let d=0;d<this.sections.length;){let b=this.sections[d++],E=this.sections[d++];E<0?l.push(b,E):l.push(E,b)}return new G(l)}composeDesc(l){return this.empty?l:l.empty?this:$(this,l)}mapDesc(l,d=!1){return l.empty?this:Q(this,l,d)}mapPos(l,d=-1,b=m.MapMode.Simple){let E=0,L=0;for(let V=0;V<this.sections.length;){let ge=this.sections[V++],Ne=this.sections[V++],Ue=E+ge;if(Ne<0){if(Ue>l)return L+(l-E);L+=ge}else{if(b!=m.MapMode.Simple&&Ue>=l&&(b==m.MapMode.TrackDel&&E<l&&Ue>l||b==m.MapMode.TrackBefore&&E<l||b==m.MapMode.TrackAfter&&Ue>l))return null;if(Ue>l||Ue==l&&d<0&&!ge)return l==E||d<0?L:L+Ne;L+=Ne}E=Ue}if(l>E)throw new RangeError(`Position ${l} is out of range for changeset of length ${E}`);return L}touchesRange(l,d=l){for(let b=0,E=0;b<this.sections.length&&E<=d;){let L=this.sections[b++],V=this.sections[b++],ge=E+L;if(V>=0&&E<=d&&ge>=l)return E<l&&ge>d?"cover":!0;E=ge}return!1}toString(){let l="";for(let d=0;d<this.sections.length;){let b=this.sections[d++],E=this.sections[d++];l+=(l?" ":"")+b+(E>=0?":"+E:"")}return l}toJSON(){return this.sections}static fromJSON(l){if(!Array.isArray(l)||l.length%2||l.some(d=>typeof d!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new G(l)}}class se extends G{constructor(l,d){super(l),this.inserted=d}apply(l){if(this.length!=l.length)throw new RangeError("Applying change set to a document with the wrong length");return pe(this,(d,b,E,L,V)=>l=l.replace(E,E+(b-d),V),!1),l}mapDesc(l,d=!1){return Q(this,l,d,!0)}invert(l){let d=this.sections.slice(),b=[];for(let E=0,L=0;E<d.length;E+=2){let V=d[E],ge=d[E+1];if(ge>=0){d[E]=ge,d[E+1]=V;let Ne=E>>1;for(;b.length<Ne;)b.push(g.Text.empty);b.push(V?l.slice(L,L+V):g.Text.empty)}L+=V}return new se(d,b)}compose(l){return this.empty?l:l.empty?this:$(this,l,!0)}map(l,d=!1){return l.empty?this:Q(this,l,d,!0)}iterChanges(l,d=!1){pe(this,l,d)}get desc(){return new G(this.sections)}filter(l){let d=[],b=[],E=[],L=new ce(this);e:for(let V=0,ge=0;;){let Ne=V==l.length?1e9:l[V++];for(;ge<Ne||ge==Ne&&L.len==0;){if(L.done)break e;let Ke=Math.min(L.len,Ne-ge);F(E,Ke,-1);let _e=L.ins==-1?-1:L.off==0?L.ins:0;F(d,Ke,_e),_e>0&&ue(b,d,L.text),L.forward(Ke),ge+=Ke}let Ue=l[V++];for(;ge<Ue;){if(L.done)break e;let Ke=Math.min(L.len,Ue-ge);F(d,Ke,-1),F(E,Ke,L.ins==-1?-1:L.off==0?L.ins:0),L.forward(Ke),ge+=Ke}}return{changes:new se(d,b),filtered:new G(E)}}toJSON(){let l=[];for(let d=0;d<this.sections.length;d+=2){let b=this.sections[d],E=this.sections[d+1];E<0?l.push(b):E==0?l.push([b]):l.push([b].concat(this.inserted[d>>1].toJSON()))}return l}static of(l,d,b){let E=[],L=[],V=0,ge=null;function Ne(Ke=!1){if(!Ke&&!E.length)return;V<d&&F(E,d-V,-1);let _e=new se(E,L);ge=ge?ge.compose(_e.map(ge)):_e,E=[],L=[],V=0}function Ue(Ke){if(Array.isArray(Ke))for(let _e of Ke)Ue(_e);else if(Ke instanceof se){if(Ke.length!=d)throw new RangeError(`Mismatched change set length (got ${Ke.length}, expected ${d})`);Ne(),ge=ge?ge.compose(Ke.map(ge)):Ke}else{let{from:_e,to:a=_e,insert:k}=Ke;if(_e>a||_e<0||a>d)throw new RangeError(`Invalid change range ${_e} to ${a} (in doc of length ${d})`);let N=k?typeof k=="string"?g.Text.of(k.split(b||H)):k:g.Text.empty,X=N.length;if(_e==a&&X==0)return;_e<V&&Ne(),_e>V&&F(E,_e-V,-1),F(E,a-_e,X),ue(L,E,N),V=a}}return Ue(l),Ne(!ge),ge}static empty(l){return new se(l?[l,-1]:[],[])}static fromJSON(l){if(!Array.isArray(l))throw new RangeError("Invalid JSON representation of ChangeSet");let d=[],b=[];for(let E=0;E<l.length;E++){let L=l[E];if(typeof L=="number")d.push(L,-1);else{if(!Array.isArray(L)||typeof L[0]!="number"||L.some((V,ge)=>ge&&typeof V!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(L.length==1)d.push(L[0],0);else{for(;b.length<E;)b.push(g.Text.empty);b[E]=g.Text.of(L.slice(1)),d.push(L[0],b[E].length)}}}return new se(d,b)}}function F(C,l,d,b=!1){if(l==0&&d<=0)return;let E=C.length-2;E>=0&&d<=0&&d==C[E+1]?C[E]+=l:l==0&&C[E]==0?C[E+1]+=d:b?(C[E]+=l,C[E+1]+=d):C.push(l,d)}function ue(C,l,d){if(d.length==0)return;let b=l.length-2>>1;if(b<C.length)C[C.length-1]=C[C.length-1].append(d);else{for(;C.length<b;)C.push(g.Text.empty);C.push(d)}}function pe(C,l,d){let b=C.inserted;for(let E=0,L=0,V=0;V<C.sections.length;){let ge=C.sections[V++],Ne=C.sections[V++];if(Ne<0)E+=ge,L+=ge;else{let Ue=E,Ke=L,_e=g.Text.empty;for(;Ue+=ge,Ke+=Ne,Ne&&b&&(_e=_e.append(b[V-2>>1])),!(d||V==C.sections.length||C.sections[V+1]<0);)ge=C.sections[V++],Ne=C.sections[V++];l(E,Ue,L,Ke,_e),E=Ue,L=Ke}}}function Q(C,l,d,b=!1){let E=[],L=b?[]:null,V=new ce(C),ge=new ce(l);for(let Ne=0,Ue=0;;)if(V.ins==-1)Ne+=V.len,V.next();else if(ge.ins==-1&&Ue<Ne){let Ke=Math.min(ge.len,Ne-Ue);ge.forward(Ke),F(E,Ke,-1),Ue+=Ke}else if(ge.ins>=0&&(V.done||Ue<Ne||Ue==Ne&&(ge.len<V.len||ge.len==V.len&&!d))){for(F(E,ge.ins,-1);Ne>Ue&&!V.done&&Ne+V.len<Ue+ge.len;)Ne+=V.len,V.next();Ue+=ge.len,ge.next()}else if(V.ins>=0){let Ke=0,_e=Ne+V.len;for(;;)if(ge.ins>=0&&Ue>Ne&&Ue+ge.len<_e)Ke+=ge.ins,Ue+=ge.len,ge.next();else if(ge.ins==-1&&Ue<_e){let a=Math.min(ge.len,_e-Ue);Ke+=a,ge.forward(a),Ue+=a}else break;F(E,Ke,V.ins),L&&ue(L,E,V.text),Ne=_e,V.next()}else{if(V.done&&ge.done)return L?new se(E,L):new G(E);throw new Error("Mismatched change set lengths")}}function $(C,l,d=!1){let b=[],E=d?[]:null,L=new ce(C),V=new ce(l);for(let ge=!1;;){if(L.done&&V.done)return E?new se(b,E):new G(b);if(L.ins==0)F(b,L.len,0,ge),L.next();else if(V.len==0&&!V.done)F(b,0,V.ins,ge),E&&ue(E,b,V.text),V.next();else{if(L.done||V.done)throw new Error("Mismatched change set lengths");{let Ne=Math.min(L.len2,V.len),Ue=b.length;if(L.ins==-1){let Ke=V.ins==-1?-1:V.off?0:V.ins;F(b,Ne,Ke,ge),E&&Ke&&ue(E,b,V.text)}else V.ins==-1?(F(b,L.off?0:L.len,Ne,ge),E&&ue(E,b,L.textBit(Ne))):(F(b,L.off?0:L.len,V.off?0:V.ins,ge),E&&!V.off&&ue(E,b,V.text));ge=(L.ins>Ne||V.ins>=0&&V.len>Ne)&&(ge||b.length>Ue),L.forward2(Ne),V.forward(Ne)}}}}class ce{constructor(l){this.set=l,this.i=0,this.next()}next(){let{sections:l}=this.set;this.i<l.length?(this.len=l[this.i++],this.ins=l[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:l}=this.set,d=this.i-2>>1;return d>=l.length?g.Text.empty:l[d]}textBit(l){let{inserted:d}=this.set,b=this.i-2>>1;return b>=d.length&&!l?g.Text.empty:d[b].slice(this.off,l==null?void 0:this.off+l)}forward(l){l==this.len?this.next():(this.len-=l,this.off+=l)}forward2(l){this.ins==-1?this.forward(l):l==this.ins?this.next():(this.ins-=l,this.off+=l)}}class ae{constructor(l,d,b){this.from=l,this.to=d,this.flags=b}get anchor(){return this.flags&16?this.to:this.from}get head(){return this.flags&16?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&4?-1:this.flags&8?1:0}get bidiLevel(){let l=this.flags&3;return l==3?null:l}get goalColumn(){let l=this.flags>>5;return l==33554431?void 0:l}map(l,d=-1){let b,E;return this.empty?b=E=l.mapPos(this.from,d):(b=l.mapPos(this.from,1),E=l.mapPos(this.to,-1)),b==this.from&&E==this.to?this:new ae(b,E,this.flags)}extend(l,d=l){if(l<=this.anchor&&d>=this.anchor)return J.range(l,d);let b=Math.abs(l-this.anchor)>Math.abs(d-this.anchor)?l:d;return J.range(this.anchor,b)}eq(l){return this.anchor==l.anchor&&this.head==l.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(l){if(!l||typeof l.anchor!="number"||typeof l.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return J.range(l.anchor,l.head)}}class J{constructor(l,d=0){this.ranges=l,this.mainIndex=d}map(l,d=-1){return l.empty?this:J.create(this.ranges.map(b=>b.map(l,d)),this.mainIndex)}eq(l){if(this.ranges.length!=l.ranges.length||this.mainIndex!=l.mainIndex)return!1;for(let d=0;d<this.ranges.length;d++)if(!this.ranges[d].eq(l.ranges[d]))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new J([this.main])}addRange(l,d=!0){return J.create([l].concat(this.ranges),d?0:this.mainIndex+1)}replaceRange(l,d=this.mainIndex){let b=this.ranges.slice();return b[d]=l,J.create(b,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(l=>l.toJSON()),main:this.mainIndex}}static fromJSON(l){if(!l||!Array.isArray(l.ranges)||typeof l.main!="number"||l.main>=l.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new J(l.ranges.map(d=>ae.fromJSON(d)),l.main)}static single(l,d=l){return new J([J.range(l,d)],0)}static create(l,d=0){if(l.length==0)throw new RangeError("A selection needs at least one range");for(let b=0,E=0;E<l.length;E++){let L=l[E];if(L.empty?L.from<=b:L.from<b)return Y(l.slice(),d);b=L.to}return new J(l,d)}static cursor(l,d=0,b,E){return new ae(l,l,(d==0?0:d<0?4:8)|(b==null?3:Math.min(2,b))|(E!=null?E:33554431)<<5)}static range(l,d,b){let E=(b!=null?b:33554431)<<5;return d<l?new ae(d,l,16|E|8):new ae(l,d,E|(d>l?4:0))}}function Y(C,l=0){let d=C[l];C.sort((b,E)=>b.from-E.from),l=C.indexOf(d);for(let b=1;b<C.length;b++){let E=C[b],L=C[b-1];if(E.empty?E.from<=L.to:E.from<L.to){let V=L.from,ge=Math.max(E.to,L.to);b<=l&&l--,C.splice(--b,2,E.anchor>E.head?J.range(ge,V):J.range(V,ge))}}return new J(C,l)}function Fe(C,l){for(let d of C.ranges)if(d.to>l)throw new RangeError("Selection points outside of document")}let xe=0;class ve{constructor(l,d,b,E,L){this.combine=l,this.compareInput=d,this.compare=b,this.isStatic=E,this.extensions=L,this.id=xe++,this.default=l([])}static define(l={}){return new ve(l.combine||(d=>d),l.compareInput||((d,b)=>d===b),l.compare||(l.combine?(d,b)=>d===b:Me),!!l.static,l.enables)}of(l){return new Be([],this,0,l)}compute(l,d){if(this.isStatic)throw new Error("Can't compute a static facet");return new Be(l,this,1,d)}computeN(l,d){if(this.isStatic)throw new Error("Can't compute a static facet");return new Be(l,this,2,d)}from(l,d){return d||(d=b=>b),this.compute([l],b=>d(b.field(l)))}}function Me(C,l){return C==l||C.length==l.length&&C.every((d,b)=>d===l[b])}class Be{constructor(l,d,b,E){this.dependencies=l,this.facet=d,this.type=b,this.value=E,this.id=xe++}dynamicSlot(l){var d;let b=this.value,E=this.facet.compareInput,L=this.id,V=l[L]>>1,ge=this.type==2,Ne=!1,Ue=!1,Ke=[];for(let _e of this.dependencies)_e=="doc"?Ne=!0:_e=="selection"?Ue=!0:((d=l[_e.id])!==null&&d!==void 0?d:1)&1||Ke.push(l[_e.id]);return{create(_e){return _e.values[V]=b(_e),1},update(_e,a){if(Ne&&a.docChanged||Ue&&(a.docChanged||a.selection)||Ke.some(k=>(B(_e,k)&1)>0)){let k=b(_e);if(ge?!q(k,_e.values[V],E):!E(k,_e.values[V]))return _e.values[V]=k,1}return 0},reconfigure(_e,a){let k=b(_e),N=a.config.address[L];if(N!=null){let X=_(a,N);if(ge?q(k,X,E):E(k,X))return _e.values[V]=X,0}return _e.values[V]=k,1}}}}function q(C,l,d){if(C.length!=l.length)return!1;for(let b=0;b<C.length;b++)if(!d(C[b],l[b]))return!1;return!0}function D(C,l,d){let b=d.map(Ne=>C[Ne.id]),E=d.map(Ne=>Ne.type),L=b.filter(Ne=>!(Ne&1)),V=C[l.id]>>1;function ge(Ne){let Ue=[];for(let Ke=0;Ke<b.length;Ke++){let _e=_(Ne,b[Ke]);if(E[Ke]==2)for(let a of _e)Ue.push(a);else Ue.push(_e)}return l.combine(Ue)}return{create(Ne){for(let Ue of b)B(Ne,Ue);return Ne.values[V]=ge(Ne),1},update(Ne,Ue){if(!L.some(_e=>B(Ne,_e)&1))return 0;let Ke=ge(Ne);return l.compare(Ke,Ne.values[V])?0:(Ne.values[V]=Ke,1)},reconfigure(Ne,Ue){let Ke=b.some(N=>B(Ne,N)&1),_e=Ue.config.facets[l.id],a=Ue.facet(l);if(_e&&!Ke&&Me(d,_e))return Ne.values[V]=a,0;let k=ge(Ne);return l.compare(k,a)?(Ne.values[V]=a,0):(Ne.values[V]=k,1)}}}const R=ve.define({static:!0});class re{constructor(l,d,b,E,L){this.id=l,this.createF=d,this.updateF=b,this.compareF=E,this.spec=L,this.provides=void 0}static define(l){let d=new re(xe++,l.create,l.update,l.compare||((b,E)=>b===E),l);return l.provide&&(d.provides=l.provide(d)),d}create(l){let d=l.facet(R).find(b=>b.field==this);return((d==null?void 0:d.create)||this.createF)(l)}slot(l){let d=l[this.id]>>1;return{create:b=>(b.values[d]=this.create(b),1),update:(b,E)=>{let L=b.values[d],V=this.updateF(L,E);return this.compareF(L,V)?0:(b.values[d]=V,1)},reconfigure:(b,E)=>E.config.address[this.id]!=null?(b.values[d]=E.field(this),0):(b.values[d]=this.create(b),1)}}init(l){return[this,R.of({field:this,create:l})]}get extension(){return this}}const Ae={lowest:4,low:3,default:2,high:1,highest:0};function j(C){return l=>new f(l,C)}const c={lowest:j(Ae.lowest),low:j(Ae.low),default:j(Ae.default),high:j(Ae.high),highest:j(Ae.highest),fallback:j(Ae.lowest),extend:j(Ae.high),override:j(Ae.highest)};class f{constructor(l,d){this.inner=l,this.prec=d}}class p{of(l){return new x(this,l)}reconfigure(l){return p.reconfigure.of({compartment:this,extension:l})}get(l){return l.config.compartments.get(this)}}class x{constructor(l,d){this.compartment=l,this.inner=d}}class u{constructor(l,d,b,E,L,V){for(this.base=l,this.compartments=d,this.dynamicSlots=b,this.address=E,this.staticValues=L,this.facets=V,this.statusTemplate=[];this.statusTemplate.length<b.length;)this.statusTemplate.push(0)}staticFacet(l){let d=this.address[l.id];return d==null?l.default:this.staticValues[d>>1]}static resolve(l,d,b){let E=[],L=Object.create(null),V=new Map;for(let a of S(l,d,V))a instanceof re?E.push(a):(L[a.facet.id]||(L[a.facet.id]=[])).push(a);let ge=Object.create(null),Ne=[],Ue=[];for(let a of E)ge[a.id]=Ue.length<<1,Ue.push(k=>a.slot(k));let Ke=b==null?void 0:b.config.facets;for(let a in L){let k=L[a],N=k[0].facet,X=Ke&&Ke[a]||[];if(k.every(ne=>ne.type==0))if(ge[N.id]=Ne.length<<1|1,Me(X,k))Ne.push(b.facet(N));else{let ne=N.combine(k.map(we=>we.value));Ne.push(b&&N.compare(ne,b.facet(N))?b.facet(N):ne)}else{for(let ne of k)ne.type==0?(ge[ne.id]=Ne.length<<1|1,Ne.push(ne.value)):(ge[ne.id]=Ue.length<<1,Ue.push(we=>ne.dynamicSlot(we)));ge[N.id]=Ue.length<<1,Ue.push(ne=>D(ne,N,k))}}let _e=Ue.map(a=>a(ge));return new u(l,V,_e,ge,Ne,L)}}function S(C,l,d){let b=[[],[],[],[],[]],E=new Map;function L(V,ge){let Ne=E.get(V);if(Ne!=null){if(Ne>=ge)return;let Ue=b[Ne].indexOf(V);Ue>-1&&b[Ne].splice(Ue,1),V instanceof x&&d.delete(V.compartment)}if(E.set(V,ge),Array.isArray(V))for(let Ue of V)L(Ue,ge);else if(V instanceof x){if(d.has(V.compartment))throw new RangeError("Duplicate use of compartment in extensions");let Ue=l.get(V.compartment)||V.inner;d.set(V.compartment,Ue),L(Ue,ge)}else if(V instanceof f)L(V.inner,V.prec);else if(V instanceof re)b[ge].push(V),V.provides&&L(V.provides,ge);else if(V instanceof Be)b[ge].push(V),V.facet.extensions&&L(V.facet.extensions,ge);else{let Ue=V.extension;if(!Ue)throw new Error(`Unrecognized extension value in extension set (${V}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);L(Ue,ge)}}return L(C,Ae.default),b.reduce((V,ge)=>V.concat(ge))}function B(C,l){if(l&1)return 2;let d=l>>1,b=C.status[d];if(b==4)throw new Error("Cyclic dependency between fields and/or facets");if(b&2)return b;C.status[d]=4;let E=C.computeSlot(C,C.config.dynamicSlots[d]);return C.status[d]=2|E}function _(C,l){return l&1?C.config.staticValues[l>>1]:C.values[l>>1]}const O=ve.define(),U=ve.define({combine:C=>C.some(l=>l),static:!0}),Te=ve.define({combine:C=>C.length?C[0]:void 0,static:!0}),je=ve.define(),le=ve.define(),Qe=ve.define(),ot=ve.define({combine:C=>C.length?C[0]:!1});class nt{constructor(l,d){this.type=l,this.value=d}static define(){return new ut}}class ut{of(l){return new nt(this,l)}}class me{constructor(l){this.map=l}of(l){return new v(this,l)}}class v{constructor(l,d){this.type=l,this.value=d}map(l){let d=this.type.map(this.value,l);return d===void 0?void 0:d==this.value?this:new v(this.type,d)}is(l){return this.type==l}static define(l={}){return new me(l.map||(d=>d))}static mapEffects(l,d){if(!l.length)return l;let b=[];for(let E of l){let L=E.map(d);L&&b.push(L)}return b}}v.reconfigure=v.define(),v.appendConfig=v.define();class M{constructor(l,d,b,E,L,V){this.startState=l,this.changes=d,this.selection=b,this.effects=E,this.annotations=L,this.scrollIntoView=V,this._doc=null,this._state=null,b&&Fe(b,d.newLength),L.some(ge=>ge.type==M.time)||(this.annotations=L.concat(M.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(l){for(let d of this.annotations)if(d.type==l)return d.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(l){let d=this.annotation(M.userEvent);return!!(d&&(d==l||d.length>l.length&&d.slice(0,l.length)==l&&d[l.length]=="."))}}M.time=nt.define(),M.userEvent=nt.define(),M.addToHistory=nt.define(),M.remote=nt.define();function P(C,l){let d=[];for(let b=0,E=0;;){let L,V;if(b<C.length&&(E==l.length||l[E]>=C[b]))L=C[b++],V=C[b++];else if(E<l.length)L=l[E++],V=l[E++];else return d;!d.length||d[d.length-1]<L?d.push(L,V):d[d.length-1]<V&&(d[d.length-1]=V)}}function I(C,l,d){var b;let E,L,V;return d?(E=l.changes,L=se.empty(l.changes.length),V=C.changes.compose(l.changes)):(E=l.changes.map(C.changes),L=C.changes.mapDesc(l.changes,!0),V=C.changes.compose(E)),{changes:V,selection:l.selection?l.selection.map(L):(b=C.selection)===null||b===void 0?void 0:b.map(E),effects:v.mapEffects(C.effects,E).concat(v.mapEffects(l.effects,L)),annotations:C.annotations.length?C.annotations.concat(l.annotations):l.annotations,scrollIntoView:C.scrollIntoView||l.scrollIntoView}}function ie(C,l,d){let b=l.selection,E=Ee(l.annotations);return l.userEvent&&(E=E.concat(M.userEvent.of(l.userEvent))),{changes:l.changes instanceof se?l.changes:se.of(l.changes||[],d,C.facet(Te)),selection:b&&(b instanceof J?b:J.single(b.anchor,b.head)),effects:Ee(l.effects),annotations:E,scrollIntoView:!!l.scrollIntoView}}function fe(C,l,d){let b=ie(C,l.length?l[0]:{},C.doc.length);l.length&&l[0].filter===!1&&(d=!1);for(let L=1;L<l.length;L++){l[L].filter===!1&&(d=!1);let V=!!l[L].sequential;b=I(b,ie(C,l[L],V?b.changes.newLength:C.doc.length),V)}let E=new M(C,b.changes,b.selection,b.effects,b.annotations,b.scrollIntoView);return he(d?Ve(E):E)}function Ve(C){let l=C.startState,d=!0;for(let E of l.facet(je)){let L=E(C);if(L===!1){d=!1;break}Array.isArray(L)&&(d=d===!0?L:P(d,L))}if(d!==!0){let E,L;if(d===!1)L=C.changes.invertedDesc,E=se.empty(l.doc.length);else{let V=C.changes.filter(d);E=V.changes,L=V.filtered.invertedDesc}C=new M(l,E,C.selection&&C.selection.map(L),v.mapEffects(C.effects,L),C.annotations,C.scrollIntoView)}let b=l.facet(le);for(let E=b.length-1;E>=0;E--){let L=b[E](C);L instanceof M?C=L:Array.isArray(L)&&L.length==1&&L[0]instanceof M?C=L[0]:C=fe(l,Ee(L),!1)}return C}function he(C){let l=C.startState,d=l.facet(Qe),b=C;for(let E=d.length-1;E>=0;E--){let L=d[E](C);L&&Object.keys(L).length&&(b=I(C,ie(l,L,C.changes.newLength),!0))}return b==C?C:new M(l,C.changes,C.selection,b.effects,b.annotations,b.scrollIntoView)}const de=[];function Ee(C){return C==null?de:Array.isArray(C)?C:[C]}m.CharCategory=void 0,function(C){C[C.Word=0]="Word",C[C.Space=1]="Space",C[C.Other=2]="Other"}(m.CharCategory||(m.CharCategory={}));const K=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let A;try{A=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(C){}function z(C){if(A)return A.test(C);for(let l=0;l<C.length;l++){let d=C[l];if(/\w/.test(d)||d>"\x80"&&(d.toUpperCase()!=d.toLowerCase()||K.test(d)))return!0}return!1}function ye(C){return l=>{if(!/\S/.test(l))return m.CharCategory.Space;if(z(l))return m.CharCategory.Word;for(let d=0;d<C.length;d++)if(l.indexOf(C[d])>-1)return m.CharCategory.Word;return m.CharCategory.Other}}class De{constructor(l,d,b,E,L,V){this.config=l,this.doc=d,this.selection=b,this.values=E,this.status=l.statusTemplate.slice(),this.computeSlot=L,V&&(V._state=this);for(let ge=0;ge<this.config.dynamicSlots.length;ge++)B(this,ge<<1);this.computeSlot=null}field(l,d=!0){let b=this.config.address[l.id];if(b==null){if(d)throw new RangeError("Field is not present in this state");return}return B(this,b),_(this,b)}update(...l){return fe(this,l,!0)}applyTransaction(l){let d=this.config,{base:b,compartments:E}=d;for(let V of l.effects)V.is(p.reconfigure)?(d&&(E=new Map,d.compartments.forEach((ge,Ne)=>E.set(Ne,ge)),d=null),E.set(V.value.compartment,V.value.extension)):V.is(v.reconfigure)?(d=null,b=V.value):V.is(v.appendConfig)&&(d=null,b=Ee(b).concat(V.value));let L;d?L=l.startState.values.slice():(d=u.resolve(b,E,this),L=new De(d,this.doc,this.selection,d.dynamicSlots.map(()=>null),(ge,Ne)=>Ne.reconfigure(ge,this),null).values),new De(d,l.newDoc,l.newSelection,L,(V,ge)=>ge.update(V,l),l)}replaceSelection(l){return typeof l=="string"&&(l=this.toText(l)),this.changeByRange(d=>({changes:{from:d.from,to:d.to,insert:l},range:J.cursor(d.from+l.length)}))}changeByRange(l){let d=this.selection,b=l(d.ranges[0]),E=this.changes(b.changes),L=[b.range],V=Ee(b.effects);for(let ge=1;ge<d.ranges.length;ge++){let Ne=l(d.ranges[ge]),Ue=this.changes(Ne.changes),Ke=Ue.map(E);for(let a=0;a<ge;a++)L[a]=L[a].map(Ke);let _e=E.mapDesc(Ue,!0);L.push(Ne.range.map(_e)),E=E.compose(Ke),V=v.mapEffects(V,Ke).concat(v.mapEffects(Ee(Ne.effects),_e))}return{changes:E,selection:J.create(L,d.mainIndex),effects:V}}changes(l=[]){return l instanceof se?l:se.of(l,this.doc.length,this.facet(De.lineSeparator))}toText(l){return g.Text.of(l.split(this.facet(De.lineSeparator)||H))}sliceDoc(l=0,d=this.doc.length){return this.doc.sliceString(l,d,this.lineBreak)}facet(l){let d=this.config.address[l.id];return d==null?l.default:(B(this,d),_(this,d))}toJSON(l){let d={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(l)for(let b in l){let E=l[b];E instanceof re&&(d[b]=E.spec.toJSON(this.field(l[b]),this))}return d}static fromJSON(l,d={},b){if(!l||typeof l.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let E=[];if(b)for(let L in b){let V=b[L],ge=l[L];E.push(V.init(Ne=>V.spec.fromJSON(ge,Ne)))}return De.create({doc:l.doc,selection:J.fromJSON(l.selection),extensions:d.extensions?E.concat([d.extensions]):E})}static create(l={}){let d=u.resolve(l.extensions||[],new Map),b=l.doc instanceof g.Text?l.doc:g.Text.of((l.doc||"").split(d.staticFacet(De.lineSeparator)||H)),E=l.selection?l.selection instanceof J?l.selection:J.single(l.selection.anchor,l.selection.head):J.single(0);return Fe(E,b.length),d.staticFacet(U)||(E=E.asSingle()),new De(d,b,E,d.dynamicSlots.map(()=>null),(L,V)=>V.create(L),null)}get tabSize(){return this.facet(De.tabSize)}get lineBreak(){return this.facet(De.lineSeparator)||`
`}get readOnly(){return this.facet(ot)}phrase(l){for(let d of this.facet(De.phrases))if(Object.prototype.hasOwnProperty.call(d,l))return d[l];return l}languageDataAt(l,d,b=-1){let E=[];for(let L of this.facet(O))for(let V of L(this,d,b))Object.prototype.hasOwnProperty.call(V,l)&&E.push(V[l]);return E}charCategorizer(l){return ye(this.languageDataAt("wordChars",l).join(""))}wordAt(l){let{text:d,from:b,length:E}=this.doc.lineAt(l),L=this.charCategorizer(l),V=l-b,ge=l-b;for(;V>0;){let Ne=g.findClusterBreak(d,V,!1);if(L(d.slice(Ne,V))!=m.CharCategory.Word)break;V=Ne}for(;ge<E;){let Ne=g.findClusterBreak(d,ge);if(L(d.slice(ge,Ne))!=m.CharCategory.Word)break;ge=Ne}return V==ge?null:J.range(V+b,ge+b)}}De.allowMultipleSelections=U,De.tabSize=ve.define({combine:C=>C.length?C[0]:4}),De.lineSeparator=Te,De.readOnly=ot,De.phrases=ve.define(),De.languageData=O,De.changeFilter=je,De.transactionFilter=le,De.transactionExtender=Qe,p.reconfigure=v.define();function s(C,l,d={}){let b={};for(let E of C)for(let L of Object.keys(E)){let V=E[L],ge=b[L];if(ge===void 0)b[L]=V;else if(!(ge===V||V===void 0))if(Object.hasOwnProperty.call(d,L))b[L]=d[L](ge,V);else throw new Error("Config merge conflict for field "+L)}for(let E in l)b[E]===void 0&&(b[E]=l[E]);return b}Object.defineProperty(m,"Text",{enumerable:!0,get:function(){return g.Text}}),m.Annotation=nt,m.AnnotationType=ut,m.ChangeDesc=G,m.ChangeSet=se,m.Compartment=p,m.EditorSelection=J,m.EditorState=De,m.Facet=ve,m.Prec=c,m.SelectionRange=ae,m.StateEffect=v,m.StateEffectType=me,m.StateField=re,m.Transaction=M,m.combineConfig=s},3767:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(87897),H=T(36819),G=T(80729);function se(j,c,f,p=0,x=0){c==null&&(c=j.search(/[^\s\u00a0]/),c==-1&&(c=j.length));let u=x;for(let S=p;S<c;S++)j.charCodeAt(S)==9?u+=f-u%f:u++;return u}class F{constructor(c,f,p){this.string=c,this.tabSize=f,this.indentUnit=p,this.pos=0,this.start=0,this.lastColumnPos=0,this.lastColumnValue=0}eol(){return this.pos>=this.string.length}sol(){return this.pos==0}peek(){return this.string.charAt(this.pos)||void 0}next(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)}eat(c){let f=this.string.charAt(this.pos),p;if(typeof c=="string"?p=f==c:p=f&&(c instanceof RegExp?c.test(f):c(f)),p)return++this.pos,f}eatWhile(c){let f=this.pos;for(;this.eat(c););return this.pos>f}eatSpace(){let c=this.pos;for(;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>c}skipToEnd(){this.pos=this.string.length}skipTo(c){let f=this.string.indexOf(c,this.pos);if(f>-1)return this.pos=f,!0}backUp(c){this.pos-=c}column(){return this.lastColumnPos<this.start&&(this.lastColumnValue=se(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue}indentation(){return se(this.string,null,this.tabSize)}match(c,f,p){if(typeof c=="string"){let x=S=>p?S.toLowerCase():S,u=this.string.substr(this.pos,c.length);return x(u)==x(c)?(f!==!1&&(this.pos+=c.length),!0):null}else{let x=this.string.slice(this.pos).match(c);return x&&x.index>0?null:(x&&f!==!1&&(this.pos+=x[0].length),x)}}current(){return this.string.slice(this.start,this.pos)}}function ue(j){return{token:j.token,blankLine:j.blankLine||(()=>{}),startState:j.startState||(()=>!0),copyState:j.copyState||pe,indent:j.indent||(()=>null),languageData:j.languageData||{},tokenTable:j.tokenTable||Fe}}function pe(j){if(typeof j!="object")return j;let c={};for(let f in j){let p=j[f];c[f]=p instanceof Array?p.slice():p}return c}class Q extends G.Language{constructor(c){let f=G.defineLanguageFacet(c.languageData),p=ue(c),x,u=new class extends g.Parser{createParse(S,B,_){return new J(x,S,B,_)}};super(f,u,Ae(f),[G.indentService.of((S,B)=>this.getIndent(S,B))]),x=this,this.streamParser=p,this.stateAfter=new g.NodeProp({perNode:!0}),this.tokenTable=c.tokenTable?new q(p.tokenTable):D}static define(c){return new Q(c)}getIndent(c,f){let p=G.syntaxTree(c.state),x=p.resolve(f);for(;x&&x.type!=this.topNode;)x=x.parent;if(!x)return null;let u=$(this,p,0,x.from,f),S,B;if(u?(B=u.state,S=u.pos+1):(B=this.streamParser.startState(c.unit),S=0),f-S>1e4)return null;for(;S<f;){let O=c.state.doc.lineAt(S),U=Math.min(f,O.to);if(O.length){let Te=new F(O.text,c.state.tabSize,c.unit);for(;Te.pos<U-O.from;)Y(this.streamParser.token,Te,B)}else this.streamParser.blankLine(B,c.unit);if(U==f)break;S=O.to+1}let{text:_}=c.lineAt(f);return this.streamParser.indent(B,/^\s*(.*)/.exec(_)[1],c)}get allowsNesting(){return!1}}function $(j,c,f,p,x){let u=f>=p&&f+c.length<=x&&c.prop(j.stateAfter);if(u)return{state:j.streamParser.copyState(u),pos:f+c.length};for(let S=c.children.length-1;S>=0;S--){let B=c.children[S],_=f+c.positions[S],O=B instanceof g.Tree&&_<x&&$(j,B,_,p,x);if(O)return O}return null}function ce(j,c,f,p,x){if(x&&f<=0&&p>=c.length)return c;!x&&c.type==j.topNode&&(x=!0);for(let u=c.children.length-1;u>=0;u--){let S=c.positions[u],B=c.children[u],_;if(S<p&&B instanceof g.Tree){if(!(_=ce(j,B,f-S,p-S,x)))break;return x?new g.Tree(c.type,c.children.slice(0,u).concat(_),c.positions.slice(0,u+1),S+_.length):_}}return null}function ae(j,c,f,p){for(let x of c){let u=x.from+(x.openStart?25:0),S=x.to-(x.openEnd?25:0),B=u<=f&&S>f&&$(j,x.tree,0-x.offset,f,S),_;if(B&&(_=ce(j,x.tree,f+x.offset,B.pos+x.offset,!1)))return{state:B.state,tree:_}}return{state:j.streamParser.startState(p?G.getIndentUnit(p):4),tree:g.Tree.empty}}class J{constructor(c,f,p,x){this.lang=c,this.input=f,this.fragments=p,this.ranges=x,this.stoppedAt=null,this.chunks=[],this.chunkPos=[],this.chunk=[],this.chunkReused=void 0,this.rangeIndex=0,this.to=x[x.length-1].to;let u=G.ParseContext.get(),S=x[0].from,{state:B,tree:_}=ae(c,p,S,u==null?void 0:u.state);this.state=B,this.parsedPos=this.chunkStart=S+_.length;for(let O=0;O<_.children.length;O++)this.chunks.push(_.children[O]),this.chunkPos.push(_.positions[O]);u&&this.parsedPos<u.viewport.from-1e5&&(this.state=this.lang.streamParser.startState(G.getIndentUnit(u.state)),u.skipUntilInView(this.parsedPos,u.viewport.from),this.parsedPos=u.viewport.from),this.moveRangeIndex()}advance(){let c=G.ParseContext.get(),f=this.stoppedAt==null?this.to:Math.min(this.to,this.stoppedAt),p=Math.min(f,this.chunkStart+2048);for(c&&(p=Math.min(p,c.viewport.to));this.parsedPos<p;)this.parseLine(c);return this.chunkStart<this.parsedPos&&this.finishChunk(),this.parsedPos>=f?this.finish():c&&this.parsedPos>=c.viewport.to?(c.skipUntilInView(this.parsedPos,f),this.finish()):null}stopAt(c){this.stoppedAt=c}lineAfter(c){let f=this.input.chunk(c);if(this.input.lineChunks)f==`
`&&(f="");else{let p=f.indexOf(`
`);p>-1&&(f=f.slice(0,p))}return c+f.length<=this.to?f:f.slice(0,this.to-c)}nextLine(){let c=this.parsedPos,f=this.lineAfter(c),p=c+f.length;for(let x=this.rangeIndex;;){let u=this.ranges[x].to;if(u>=p||(f=f.slice(0,u-(p-f.length)),x++,x==this.ranges.length))break;let S=this.ranges[x].from,B=this.lineAfter(S);f+=B,p=S+B.length}return{line:f,end:p}}skipGapsTo(c,f,p){for(;;){let x=this.ranges[this.rangeIndex].to,u=c+f;if(p>0?x>u:x>=u)break;let S=this.ranges[++this.rangeIndex].from;f+=S-x}return f}moveRangeIndex(){for(;this.ranges[this.rangeIndex].to<this.parsedPos;)this.rangeIndex++}emitToken(c,f,p,x,u){if(this.ranges.length>1){u=this.skipGapsTo(f,u,1),f+=u;let S=this.chunk.length;u=this.skipGapsTo(p,u,-1),p+=u,x+=this.chunk.length-S}return this.chunk.push(c,f,p,x),u}parseLine(c){let{line:f,end:p}=this.nextLine(),x=0,{streamParser:u}=this.lang,S=new F(f,c?c.state.tabSize:4,c?G.getIndentUnit(c.state):2);if(S.eol())u.blankLine(this.state,S.indentUnit);else for(;!S.eol();){let B=Y(u.token,S,this.state);if(B&&(x=this.emitToken(this.lang.tokenTable.resolve(B),this.parsedPos+S.start,this.parsedPos+S.pos,4,x)),S.start>1e4)break}this.parsedPos=p,this.moveRangeIndex(),this.parsedPos<this.to&&this.parsedPos++}finishChunk(){let c=g.Tree.build({buffer:this.chunk,start:this.chunkStart,length:this.parsedPos-this.chunkStart,nodeSet:ve,topID:0,maxBufferLength:2048,reused:this.chunkReused});c=new g.Tree(c.type,c.children,c.positions,c.length,[[this.lang.stateAfter,this.lang.streamParser.copyState(this.state)]]),this.chunks.push(c),this.chunkPos.push(this.chunkStart-this.ranges[0].from),this.chunk=[],this.chunkReused=void 0,this.chunkStart=this.parsedPos}finish(){return new g.Tree(this.lang.topNode,this.chunks,this.chunkPos,this.parsedPos-this.ranges[0].from).balance()}}function Y(j,c,f){c.start=c.pos;for(let p=0;p<10;p++){let x=j(c,f);if(c.pos>c.start)return x}throw new Error("Stream parser failed to advance stream.")}const Fe=Object.create(null),xe=[g.NodeType.none],ve=new g.NodeSet(xe),Me=[],Be=Object.create(null);for(let[j,c]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","typeName"],["attribute","propertyName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])Be[j]=re(Fe,c);class q{constructor(c){this.extra=c,this.table=Object.assign(Object.create(null),Be)}resolve(c){return c?this.table[c]||(this.table[c]=re(this.extra,c)):0}}const D=new q(Fe);function R(j,c){Me.indexOf(j)>-1||(Me.push(j),console.warn(c))}function re(j,c){let f=null;for(let u of c.split(".")){let S=j[u]||H.tags[u];S?typeof S=="function"?f?f=S(f):R(u,`Modifier ${u} used at start of tag`):f?R(u,`Tag ${u} used as modifier`):f=S:R(u,`Unknown highlighting tag ${u}`)}if(!f)return 0;let p=c.replace(/ /g,"_"),x=g.NodeType.define({id:xe.length,name:p,props:[H.styleTags({[p]:f})]});return xe.push(x),x.id}function Ae(j){let c=g.NodeType.define({id:xe.length,name:"Document",props:[G.languageDataProp.add(()=>j)]});return xe.push(c),c}m.StreamLanguage=Q,m.StringStream=F},18907:function(We,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});let T="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(j=>j?parseInt(j,36):1);for(let j=1;j<T.length;j++)T[j]+=T[j-1];function g(j){for(let c=1;c<T.length;c+=2)if(T[c]>j)return T[c-1]<=j;return!1}function H(j){return j>=127462&&j<=127487}const G=8205;function se(j,c,f=!0,p=!0){return(f?F:ue)(j,c,p)}function F(j,c,f){if(c==j.length)return c;c&&pe(j.charCodeAt(c))&&Q(j.charCodeAt(c-1))&&c--;let p=$(j,c);for(c+=ae(p);c<j.length;){let x=$(j,c);if(p==G||x==G||f&&g(x))c+=ae(x),p=x;else if(H(x)){let u=0,S=c-2;for(;S>=0&&H($(j,S));)u++,S-=2;if(u%2==0)break;c+=2}else break}return c}function ue(j,c,f){for(;c>0;){let p=F(j,c-2,f);if(p<c)return p;c--}return 0}function pe(j){return j>=56320&&j<57344}function Q(j){return j>=55296&&j<56320}function $(j,c){let f=j.charCodeAt(c);if(!Q(f)||c+1==j.length)return f;let p=j.charCodeAt(c+1);return pe(p)?(f-55296<<10)+(p-56320)+65536:f}function ce(j){return j<=65535?String.fromCharCode(j):(j-=65536,String.fromCharCode((j>>10)+55296,(j&1023)+56320))}function ae(j){return j<65536?1:2}function J(j,c,f=j.length){let p=0;for(let x=0;x<f;)j.charCodeAt(x)==9?(p+=c-p%c,x++):(p++,x=se(j,x));return p}function Y(j,c,f,p){for(let x=0,u=0;;){if(u>=c)return x;if(x==j.length)break;u+=j.charCodeAt(x)==9?f-u%f:1,x=se(j,x)}return p===!0?-1:j.length}class Fe{constructor(){}lineAt(c){if(c<0||c>this.length)throw new RangeError(`Invalid position ${c} in document of length ${this.length}`);return this.lineInner(c,!1,1,0)}line(c){if(c<1||c>this.lines)throw new RangeError(`Invalid line number ${c} in ${this.lines}-line document`);return this.lineInner(c,!0,1,0)}replace(c,f,p){let x=[];return this.decompose(0,c,x,2),p.length&&p.decompose(0,p.length,x,3),this.decompose(f,this.length,x,1),ve.from(x,this.length-(f-c)+p.length)}append(c){return this.replace(this.length,this.length,c)}slice(c,f=this.length){let p=[];return this.decompose(c,f,p,0),ve.from(p,f-c)}eq(c){if(c==this)return!0;if(c.length!=this.length||c.lines!=this.lines)return!1;let f=this.scanIdentical(c,1),p=this.length-this.scanIdentical(c,-1),x=new D(this),u=new D(c);for(let S=f,B=f;;){if(x.next(S),u.next(S),S=0,x.lineBreak!=u.lineBreak||x.done!=u.done||x.value!=u.value)return!1;if(B+=x.value.length,x.done||B>=p)return!0}}iter(c=1){return new D(this,c)}iterRange(c,f=this.length){return new R(this,c,f)}iterLines(c,f){let p;if(c==null)p=this.iter();else{f==null&&(f=this.lines+1);let x=this.line(c).from;p=this.iterRange(x,Math.max(x,f==this.lines+1?this.length:f<=1?0:this.line(f-1).to))}return new re(p)}toString(){return this.sliceString(0)}toJSON(){let c=[];return this.flatten(c),c}static of(c){if(c.length==0)throw new RangeError("A document must have at least one line");return c.length==1&&!c[0]?Fe.empty:c.length<=32?new xe(c):ve.from(xe.split(c,[]))}}class xe extends Fe{constructor(c,f=Me(c)){super(),this.text=c,this.length=f}get lines(){return this.text.length}get children(){return null}lineInner(c,f,p,x){for(let u=0;;u++){let S=this.text[u],B=x+S.length;if((f?p:B)>=c)return new Ae(x,B,p,S);x=B+1,p++}}decompose(c,f,p,x){let u=c<=0&&f>=this.length?this:new xe(q(this.text,c,f),Math.min(f,this.length)-Math.max(0,c));if(x&1){let S=p.pop(),B=Be(u.text,S.text.slice(),0,u.length);if(B.length<=32)p.push(new xe(B,S.length+u.length));else{let _=B.length>>1;p.push(new xe(B.slice(0,_)),new xe(B.slice(_)))}}else p.push(u)}replace(c,f,p){if(!(p instanceof xe))return super.replace(c,f,p);let x=Be(this.text,Be(p.text,q(this.text,0,c)),f),u=this.length+p.length-(f-c);return x.length<=32?new xe(x,u):ve.from(xe.split(x,[]),u)}sliceString(c,f=this.length,p=`
`){let x="";for(let u=0,S=0;u<=f&&S<this.text.length;S++){let B=this.text[S],_=u+B.length;u>c&&S&&(x+=p),c<_&&f>u&&(x+=B.slice(Math.max(0,c-u),f-u)),u=_+1}return x}flatten(c){for(let f of this.text)c.push(f)}scanIdentical(){return 0}static split(c,f){let p=[],x=-1;for(let u of c)p.push(u),x+=u.length+1,p.length==32&&(f.push(new xe(p,x)),p=[],x=-1);return x>-1&&f.push(new xe(p,x)),f}}class ve extends Fe{constructor(c,f){super(),this.children=c,this.length=f,this.lines=0;for(let p of c)this.lines+=p.lines}lineInner(c,f,p,x){for(let u=0;;u++){let S=this.children[u],B=x+S.length,_=p+S.lines-1;if((f?_:B)>=c)return S.lineInner(c,f,p,x);x=B+1,p=_+1}}decompose(c,f,p,x){for(let u=0,S=0;S<=f&&u<this.children.length;u++){let B=this.children[u],_=S+B.length;if(c<=_&&f>=S){let O=x&((S<=c?1:0)|(_>=f?2:0));S>=c&&_<=f&&!O?p.push(B):B.decompose(c-S,f-S,p,O)}S=_+1}}replace(c,f,p){if(p.lines<this.lines)for(let x=0,u=0;x<this.children.length;x++){let S=this.children[x],B=u+S.length;if(c>=u&&f<=B){let _=S.replace(c-u,f-u,p),O=this.lines-S.lines+_.lines;if(_.lines<O>>5-1&&_.lines>O>>5+1){let U=this.children.slice();return U[x]=_,new ve(U,this.length-(f-c)+p.length)}return super.replace(u,B,_)}u=B+1}return super.replace(c,f,p)}sliceString(c,f=this.length,p=`
`){let x="";for(let u=0,S=0;u<this.children.length&&S<=f;u++){let B=this.children[u],_=S+B.length;S>c&&u&&(x+=p),c<_&&f>S&&(x+=B.sliceString(c-S,f-S,p)),S=_+1}return x}flatten(c){for(let f of this.children)f.flatten(c)}scanIdentical(c,f){if(!(c instanceof ve))return 0;let p=0,[x,u,S,B]=f>0?[0,0,this.children.length,c.children.length]:[this.children.length-1,c.children.length-1,-1,-1];for(;;x+=f,u+=f){if(x==S||u==B)return p;let _=this.children[x],O=c.children[u];if(_!=O)return p+_.scanIdentical(O,f);p+=_.length+1}}static from(c,f=c.reduce((p,x)=>p+x.length+1,-1)){let p=0;for(let le of c)p+=le.lines;if(p<32){let le=[];for(let Qe of c)Qe.flatten(le);return new xe(le,f)}let x=Math.max(32,p>>5),u=x<<1,S=x>>1,B=[],_=0,O=-1,U=[];function Te(le){let Qe;if(le.lines>u&&le instanceof ve)for(let ot of le.children)Te(ot);else le.lines>S&&(_>S||!_)?(je(),B.push(le)):le instanceof xe&&_&&(Qe=U[U.length-1])instanceof xe&&le.lines+Qe.lines<=32?(_+=le.lines,O+=le.length+1,U[U.length-1]=new xe(Qe.text.concat(le.text),Qe.length+1+le.length)):(_+le.lines>x&&je(),_+=le.lines,O+=le.length+1,U.push(le))}function je(){_!=0&&(B.push(U.length==1?U[0]:ve.from(U,O)),O=-1,_=U.length=0)}for(let le of c)Te(le);return je(),B.length==1?B[0]:new ve(B,f)}}Fe.empty=new xe([""],0);function Me(j){let c=-1;for(let f of j)c+=f.length+1;return c}function Be(j,c,f=0,p=1e9){for(let x=0,u=0,S=!0;u<j.length&&x<=p;u++){let B=j[u],_=x+B.length;_>=f&&(_>p&&(B=B.slice(0,p-x)),x<f&&(B=B.slice(f-x)),S?(c[c.length-1]+=B,S=!1):c.push(B)),x=_+1}return c}function q(j,c,f){return Be(j,[""],c,f)}class D{constructor(c,f=1){this.dir=f,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[c],this.offsets=[f>0?1:(c instanceof xe?c.text.length:c.children.length)<<1]}nextInner(c,f){for(this.done=this.lineBreak=!1;;){let p=this.nodes.length-1,x=this.nodes[p],u=this.offsets[p],S=u>>1,B=x instanceof xe?x.text.length:x.children.length;if(S==(f>0?B:0)){if(p==0)return this.done=!0,this.value="",this;f>0&&this.offsets[p-1]++,this.nodes.pop(),this.offsets.pop()}else if((u&1)==(f>0?0:1)){if(this.offsets[p]+=f,c==0)return this.lineBreak=!0,this.value=`
`,this;c--}else if(x instanceof xe){let _=x.text[S+(f<0?-1:0)];if(this.offsets[p]+=f,_.length>Math.max(0,c))return this.value=c==0?_:f>0?_.slice(c):_.slice(0,_.length-c),this;c-=_.length}else{let _=x.children[S+(f<0?-1:0)];c>_.length?(c-=_.length,this.offsets[p]+=f):(f<0&&this.offsets[p]--,this.nodes.push(_),this.offsets.push(f>0?1:(_ instanceof xe?_.text.length:_.children.length)<<1))}}}next(c=0){return c<0&&(this.nextInner(-c,-this.dir),c=this.value.length),this.nextInner(c,this.dir)}}class R{constructor(c,f,p){this.value="",this.done=!1,this.cursor=new D(c,f>p?-1:1),this.pos=f>p?c.length:0,this.from=Math.min(f,p),this.to=Math.max(f,p)}nextInner(c,f){if(f<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;c+=Math.max(0,f<0?this.pos-this.to:this.from-this.pos);let p=f<0?this.pos-this.from:this.to-this.pos;c>p&&(c=p),p-=c;let{value:x}=this.cursor.next(c);return this.pos+=(x.length+c)*f,this.value=x.length<=p?x:f<0?x.slice(x.length-p):x.slice(0,p),this.done=!this.value,this}next(c=0){return c<0?c=Math.max(c,this.from-this.pos):c>0&&(c=Math.min(c,this.to-this.pos)),this.nextInner(c,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class re{constructor(c){this.inner=c,this.afterBreak=!0,this.value="",this.done=!1}next(c=0){let{done:f,lineBreak:p,value:x}=this.inner.next(c);return f?(this.done=!0,this.value=""):p?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=x,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol!="undefined"&&(Fe.prototype[Symbol.iterator]=function(){return this.iter()},D.prototype[Symbol.iterator]=R.prototype[Symbol.iterator]=re.prototype[Symbol.iterator]=function(){return this});class Ae{constructor(c,f,p,x){this.from=c,this.to=f,this.number=p,this.text=x}get length(){return this.to-this.from}}m.Line=Ae,m.Text=Fe,m.codePointAt=$,m.codePointSize=ae,m.countColumn=J,m.findClusterBreak=se,m.findColumn=Y,m.fromCodePoint=ce},67047:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(23642),H=T(17040);const G=typeof navigator!="undefined"&&!/Edge\/(\d+)/.exec(navigator.userAgent)&&/Apple Computer/.test(navigator.vendor)&&(/Mobile\/\w+/.test(navigator.userAgent)||navigator.maxTouchPoints>2),se="-10000px";class F{constructor(f,p,x){this.facet=p,this.createTooltipView=x,this.input=f.state.facet(p),this.tooltips=this.input.filter(u=>u),this.tooltipViews=this.tooltips.map(x)}update(f){let p=f.state.facet(this.facet),x=p.filter(S=>S);if(p===this.input){for(let S of this.tooltipViews)S.update&&S.update(f);return!1}let u=[];for(let S=0;S<x.length;S++){let B=x[S],_=-1;if(B){for(let O=0;O<this.tooltips.length;O++){let U=this.tooltips[O];U&&U.create==B.create&&(_=O)}if(_<0)u[S]=this.createTooltipView(B);else{let O=u[S]=this.tooltipViews[_];O.update&&O.update(f)}}}for(let S of this.tooltipViews)u.indexOf(S)<0&&S.dom.remove();return this.input=p,this.tooltips=x,this.tooltipViews=u,!0}}function ue(c={}){return Q.of(c)}function pe(){return{top:0,left:0,bottom:innerHeight,right:innerWidth}}const Q=H.Facet.define({combine:c=>{var f,p,x;return{position:G?"absolute":((f=c.find(u=>u.position))===null||f===void 0?void 0:f.position)||"fixed",parent:((p=c.find(u=>u.parent))===null||p===void 0?void 0:p.parent)||null,tooltipSpace:((x=c.find(u=>u.tooltipSpace))===null||x===void 0?void 0:x.tooltipSpace)||pe}}}),$=g.ViewPlugin.fromClass(class{constructor(c){var f;this.view=c,this.inView=!0,this.lastTransaction=0,this.measureTimeout=-1;let p=c.state.facet(Q);this.position=p.position,this.parent=p.parent,this.classes=c.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new F(c,J,x=>this.createTooltip(x)),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(x=>{Date.now()>this.lastTransaction-50&&x.length>0&&x[x.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),(f=c.dom.ownerDocument.defaultView)===null||f===void 0||f.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let c of this.manager.tooltipViews)this.intersectionObserver.observe(c.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(c){c.transactions.length&&(this.lastTransaction=Date.now());let f=this.manager.update(c);f&&this.observeIntersection();let p=f||c.geometryChanged,x=c.state.facet(Q);if(x.position!=this.position){this.position=x.position;for(let u of this.manager.tooltipViews)u.dom.style.position=this.position;p=!0}if(x.parent!=this.parent){this.parent&&this.container.remove(),this.parent=x.parent,this.createContainer();for(let u of this.manager.tooltipViews)this.container.appendChild(u.dom);p=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);p&&this.maybeMeasure()}createTooltip(c){let f=c.create(this.view);if(f.dom.classList.add("cm-tooltip"),c.arrow&&!f.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let p=document.createElement("div");p.className="cm-tooltip-arrow",f.dom.appendChild(p)}return f.dom.style.position=this.position,f.dom.style.top=se,this.container.appendChild(f.dom),f.mount&&f.mount(this.view),f}destroy(){var c,f;(c=this.view.dom.ownerDocument.defaultView)===null||c===void 0||c.removeEventListener("resize",this.measureSoon);for(let{dom:p}of this.manager.tooltipViews)p.remove();(f=this.intersectionObserver)===null||f===void 0||f.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let c=this.view.dom.getBoundingClientRect();return{editor:c,parent:this.parent?this.container.getBoundingClientRect():c,pos:this.manager.tooltips.map((f,p)=>{let x=this.manager.tooltipViews[p];return x.getCoords?x.getCoords(f.pos):this.view.coordsAtPos(f.pos)}),size:this.manager.tooltipViews.map(({dom:f})=>f.getBoundingClientRect()),space:this.view.state.facet(Q).tooltipSpace(this.view)}}writeMeasure(c){let{editor:f,space:p}=c,x=[];for(let u=0;u<this.manager.tooltips.length;u++){let S=this.manager.tooltips[u],B=this.manager.tooltipViews[u],{dom:_}=B,O=c.pos[u],U=c.size[u];if(!O||O.bottom<=Math.max(f.top,p.top)||O.top>=Math.min(f.bottom,p.bottom)||O.right<Math.max(f.left,p.left)-.1||O.left>Math.min(f.right,p.right)+.1){_.style.top=se;continue}let Te=S.arrow?B.dom.querySelector(".cm-tooltip-arrow"):null,je=Te?7:0,le=U.right-U.left,Qe=U.bottom-U.top,ot=B.offset||ae,nt=this.view.textDirection==g.Direction.LTR,ut=U.width>p.right-p.left?nt?p.left:p.right-U.width:nt?Math.min(O.left-(Te?14:0)+ot.x,p.right-le):Math.max(p.left,O.left-le+(Te?14:0)-ot.x),me=!!S.above;!S.strictSide&&(me?O.top-(U.bottom-U.top)-ot.y<p.top:O.bottom+(U.bottom-U.top)+ot.y>p.bottom)&&me==p.bottom-O.bottom>O.top-p.top&&(me=!me);let v=me?O.top-Qe-je-ot.y:O.bottom+je+ot.y,M=ut+le;if(B.overlap!==!0)for(let P of x)P.left<M&&P.right>ut&&P.top<v+Qe&&P.bottom>v&&(v=me?P.top-Qe-2-je:P.bottom+je+2);this.position=="absolute"?(_.style.top=v-c.parent.top+"px",_.style.left=ut-c.parent.left+"px"):(_.style.top=v+"px",_.style.left=ut+"px"),Te&&(Te.style.left=`${O.left+(nt?ot.x:-ot.x)-(ut+14-7)}px`),B.overlap!==!0&&x.push({left:ut,top:v,right:M,bottom:v+Qe}),_.classList.toggle("cm-tooltip-above",me),_.classList.toggle("cm-tooltip-below",!me),B.positioned&&B.positioned()}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let c of this.manager.tooltipViews)c.dom.style.top=se}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),ce=g.EditorView.baseTheme({".cm-tooltip":{zIndex:100},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),ae={x:0,y:0},J=H.Facet.define({enables:[$,ce]}),Y=H.Facet.define();class Fe{constructor(f){this.view=f,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new F(f,Y,p=>this.createHostedView(p))}static create(f){return new Fe(f)}createHostedView(f){let p=f.create(this.view);return p.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(p.dom),this.mounted&&p.mount&&p.mount(this.view),p}mount(f){for(let p of this.manager.tooltipViews)p.mount&&p.mount(f);this.mounted=!0}positioned(){for(let f of this.manager.tooltipViews)f.positioned&&f.positioned()}update(f){this.manager.update(f)}}const xe=J.compute([Y],c=>{let f=c.facet(Y).filter(p=>p);return f.length===0?null:{pos:Math.min(...f.map(p=>p.pos)),end:Math.max(...f.filter(p=>p.end!=null).map(p=>p.end)),create:Fe.create,above:f[0].above,arrow:f.some(p=>p.arrow)}});class ve{constructor(f,p,x,u,S){this.view=f,this.source=p,this.field=x,this.setHover=u,this.hoverTime=S,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:f.dom,time:0},this.checkHover=this.checkHover.bind(this),f.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),f.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active)return;let f=Date.now()-this.lastMove.time;f<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-f):this.startHover()}startHover(){var f;clearTimeout(this.restartTimeout);let{lastMove:p}=this,x=this.view.contentDOM.contains(p.target)?this.view.posAtCoords(p):null;if(x==null)return;let u=this.view.coordsAtPos(x);if(u==null||p.y<u.top||p.y>u.bottom||p.x<u.left-this.view.defaultCharacterWidth||p.x>u.right+this.view.defaultCharacterWidth)return;let S=this.view.bidiSpans(this.view.state.doc.lineAt(x)).find(O=>O.from<=x&&O.to>=x),B=S&&S.dir==g.Direction.RTL?-1:1,_=this.source(this.view,x,p.x<u.left?-B:B);if(!((f=_)===null||f===void 0)&&f.then){let O=this.pending={pos:x};_.then(U=>{this.pending==O&&(this.pending=null,U&&this.view.dispatch({effects:this.setHover.of(U)}))},U=>g.logException(this.view.state,U,"hover tooltip"))}else _&&this.view.dispatch({effects:this.setHover.of(_)})}mousemove(f){var p;this.lastMove={x:f.clientX,y:f.clientY,target:f.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let x=this.active;if(x&&!Me(this.lastMove.target)||this.pending){let{pos:u}=x||this.pending,S=(p=x==null?void 0:x.end)!==null&&p!==void 0?p:u;(u==S?this.view.posAtCoords(this.lastMove)!=u:!Be(this.view,u,S,f.clientX,f.clientY,6))&&(this.view.dispatch({effects:this.setHover.of(null)}),this.pending=null)}}mouseleave(){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function Me(c){for(let f=c;f;f=f.parentNode)if(f.nodeType==1&&f.classList.contains("cm-tooltip"))return!0;return!1}function Be(c,f,p,x,u,S){let B=document.createRange(),_=c.domAtPos(f),O=c.domAtPos(p);B.setEnd(O.node,O.offset),B.setStart(_.node,_.offset);let U=B.getClientRects();B.detach();for(let Te=0;Te<U.length;Te++){let je=U[Te];if(Math.max(je.top-u,u-je.bottom,je.left-x,x-je.right)<=S)return!0}return!1}function q(c,f={}){let p=H.StateEffect.define(),x=H.StateField.define({create(){return null},update(u,S){if(u&&f.hideOnChange&&(S.docChanged||S.selection))return null;for(let B of S.effects){if(B.is(p))return B.value;if(B.is(re))return null}if(u&&S.docChanged){let B=S.changes.mapPos(u.pos,-1,H.MapMode.TrackDel);if(B==null)return null;let _=Object.assign(Object.create(null),u);return _.pos=B,u.end!=null&&(_.end=S.changes.mapPos(u.end)),_}return u},provide:u=>Y.from(u)});return[x,g.ViewPlugin.define(u=>new ve(u,c,x,p,f.hoverTime||300)),xe]}function D(c,f){let p=c.plugin($);if(!p)return null;let x=p.manager.tooltips.indexOf(f);return x<0?null:p.manager.tooltipViews[x]}function R(c){return c.facet(Y).some(f=>f)}const re=H.StateEffect.define(),Ae=re.of(null);function j(c){var f;(f=c.plugin($))===null||f===void 0||f.maybeMeasure()}m.closeHoverTooltips=Ae,m.getTooltip=D,m.hasHoverTooltips=R,m.hoverTooltip=q,m.repositionTooltips=j,m.showTooltip=J,m.tooltips=ue},23642:function(We,m,T){"use strict";Object.defineProperty(m,"__esModule",{value:!0});var g=T(17040),H=T(17223),G=T(88648),se=T(18907),F=T(26691);function ue(r){let e;return r.nodeType==11?e=r.getSelection?r:r.ownerDocument:e=r,e.getSelection()}function pe(r,e){return e?r==e||r.contains(e.nodeType!=1?e.parentNode:e):!1}function Q(){let r=document.activeElement;for(;r&&r.shadowRoot;)r=r.shadowRoot.activeElement;return r}function $(r,e){if(!e.anchorNode)return!1;try{return pe(r,e.anchorNode)}catch(t){return!1}}function ce(r){return r.nodeType==3?Ae(r,0,r.nodeValue.length).getClientRects():r.nodeType==1?r.getClientRects():[]}function ae(r,e,t,i){return t?Y(r,e,t,i,-1)||Y(r,e,t,i,1):!1}function J(r){for(var e=0;;e++)if(r=r.previousSibling,!r)return e}function Y(r,e,t,i,n){for(;;){if(r==t&&e==i)return!0;if(e==(n<0?0:Fe(r))){if(r.nodeName=="DIV")return!1;let o=r.parentNode;if(!o||o.nodeType!=1)return!1;e=J(r)+(n<0?0:1),r=o}else if(r.nodeType==1){if(r=r.childNodes[e+(n<0?-1:0)],r.nodeType==1&&r.contentEditable=="false")return!1;e=n<0?Fe(r):0}else return!1}}function Fe(r){return r.nodeType==3?r.nodeValue.length:r.childNodes.length}const xe={left:0,right:0,top:0,bottom:0};function ve(r,e){let t=e?r.left:r.right;return{left:t,right:t,top:r.top,bottom:r.bottom}}function Me(r){return{left:0,right:r.innerWidth,top:0,bottom:r.innerHeight}}function Be(r,e,t,i,n,o,h,w){let W=r.ownerDocument,oe=W.defaultView;for(let be=r;be;)if(be.nodeType==1){let Pe,it=be==W.body;if(it)Pe=Me(oe);else{if(be.scrollHeight<=be.clientHeight&&be.scrollWidth<=be.clientWidth){be=be.parentNode;continue}let mt=be.getBoundingClientRect();Pe={left:mt.left,right:mt.left+be.clientWidth,top:mt.top,bottom:mt.top+be.clientHeight}}let tt=0,st=0;if(n=="nearest")e.top<Pe.top?(st=-(Pe.top-e.top+h),t>0&&e.bottom>Pe.bottom+st&&(st=e.bottom-Pe.bottom+st+h)):e.bottom>Pe.bottom&&(st=e.bottom-Pe.bottom+h,t<0&&e.top-st<Pe.top&&(st=-(Pe.top+st-e.top+h)));else{let mt=e.bottom-e.top,At=Pe.bottom-Pe.top;st=(n=="center"&&mt<=At?e.top+mt/2-At/2:n=="start"||n=="center"&&t<0?e.top-h:e.bottom-At+h)-Pe.top}if(i=="nearest"?e.left<Pe.left?(tt=-(Pe.left-e.left+o),t>0&&e.right>Pe.right+tt&&(tt=e.right-Pe.right+tt+o)):e.right>Pe.right&&(tt=e.right-Pe.right+o,t<0&&e.left<Pe.left+tt&&(tt=-(Pe.left+tt-e.left+o))):tt=(i=="center"?e.left+(e.right-e.left)/2-(Pe.right-Pe.left)/2:i=="start"==w?e.left-o:e.right-(Pe.right-Pe.left)+o)-Pe.left,tt||st)if(it)oe.scrollBy(tt,st);else{if(st){let mt=be.scrollTop;be.scrollTop+=st,st=be.scrollTop-mt}if(tt){let mt=be.scrollLeft;be.scrollLeft+=tt,tt=be.scrollLeft-mt}e={left:e.left-tt,top:e.top-st,right:e.right-tt,bottom:e.bottom-st}}if(it)break;be=be.assignedSlot||be.parentNode,i=n="nearest"}else if(be.nodeType==11)be=be.host;else break}class q{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){this.set(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)}set(e,t,i,n){this.anchorNode=e,this.anchorOffset=t,this.focusNode=i,this.focusOffset=n}}let D=null;function R(r){if(r.setActive)return r.setActive();if(D)return r.focus(D);let e=[];for(let t=r;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(r.focus(D==null?{get preventScroll(){return D={preventScroll:!0},!0}}:void 0),!D){D=!1;for(let t=0;t<e.length;){let i=e[t++],n=e[t++],o=e[t++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=o&&(i.scrollLeft=o)}}}let re;function Ae(r,e,t=e){let i=re||(re=document.createRange());return i.setEnd(r,t),i.setStart(r,e),i}function j(r,e,t){let i={key:e,code:e,keyCode:t,which:t,cancelable:!0},n=new KeyboardEvent("keydown",i);n.synthetic=!0,r.dispatchEvent(n);let o=new KeyboardEvent("keyup",i);return o.synthetic=!0,r.dispatchEvent(o),n.defaultPrevented||o.defaultPrevented}function c(r){for(;r;){if(r&&(r.nodeType==9||r.nodeType==11&&r.host))return r;r=r.assignedSlot||r.parentNode}return null}function f(r){for(;r.attributes.length;)r.removeAttributeNode(r.attributes[0])}class p{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new p(e.parentNode,J(e),t)}static after(e,t){return new p(e.parentNode,J(e)+1,t)}}const x=[];class u{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(this.dirty&2){let t=this.dom,i=null,n;for(let o of this.children){if(o.dirty){if(!o.dom&&(n=i?i.nextSibling:t.firstChild)){let h=u.get(n);(!h||!h.parent&&h.constructor==o.constructor)&&o.reuseDOM(n)}o.sync(e),o.dirty=0}if(n=i?i.nextSibling:t.firstChild,e&&!e.written&&e.node==t&&n!=o.dom&&(e.written=!0),o.dom.parentNode==t)for(;n&&n!=o.dom;)n=S(n);else t.insertBefore(o.dom,n);i=o.dom}for(n=i?i.nextSibling:t.firstChild,n&&e&&e.node==t&&(e.written=!0);n;)n=S(n)}else if(this.dirty&1)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=Fe(e)==0?0:t==0?-1:1;for(;;){let o=e.parentNode;if(o==this.dom)break;n==0&&o.firstChild!=o.lastChild&&(e==o.firstChild?n=-1:n=1),e=o}n<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!u.get(i);)i=i.nextSibling;if(!i)return this.length;for(let n=0,o=0;;n++){let h=this.children[n];if(h.dom==i)return o;o+=h.length+h.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,o=-1,h=-1,w=-1;for(let W=0,oe=i,be=i;W<this.children.length;W++){let Pe=this.children[W],it=oe+Pe.length;if(oe<e&&it>t)return Pe.domBoundsAround(e,t,oe);if(it>=e&&n==-1&&(n=W,o=oe),oe>t&&Pe.dom.parentNode==this.dom){h=W,w=be;break}be=it,oe=it+Pe.breakAfter}return{from:o,to:w<0?i+this.length:w,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:h<this.children.length&&h>=0?this.children[h].dom:null}}markDirty(e=!1){this.dirty|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),t.dirty&1)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=x){this.markDirty();for(let n=e;n<t;n++){let o=this.children[n];o.parent==this&&o.destroy()}this.children.splice(e,t-e,...i);for(let n=0;n<i.length;n++)i[n].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new B(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}merge(e,t,i,n,o,h){return!1}become(e){return!1}getSide(){return 0}destroy(){this.parent=null}}u.prototype.breakAfter=0;function S(r){let e=r.nextSibling;return r.parentNode.removeChild(r),e}class B{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function _(r,e,t,i,n,o,h,w,W){let{children:oe}=r,be=oe.length?oe[e]:null,Pe=o.length?o[o.length-1]:null,it=Pe?Pe.breakAfter:h;if(!(e==i&&be&&!h&&!it&&o.length<2&&be.merge(t,n,o.length?Pe:null,t==0,w,W))){if(i<oe.length){let tt=oe[i];tt&&n<tt.length?(e==i&&(tt=tt.split(n),n=0),!it&&Pe&&tt.merge(0,n,Pe,!0,0,W)?o[o.length-1]=tt:(n&&tt.merge(0,n,null,!1,0,W),o.push(tt))):tt!=null&&tt.breakAfter&&(Pe?Pe.breakAfter=1:h=1),i++}for(be&&(be.breakAfter=h,t>0&&(!h&&o.length&&be.merge(t,be.length,o[0],!1,w,0)?be.breakAfter=o.shift().breakAfter:(t<be.length||be.children.length&&be.children[be.children.length-1].length==0)&&be.merge(t,be.length,null,!1,w,0),e++));e<i&&o.length;)if(oe[i-1].become(o[o.length-1]))i--,o.pop(),W=o.length?0:w;else if(oe[e].become(o[0]))e++,o.shift(),w=o.length?0:W;else break;!o.length&&e&&i<oe.length&&!oe[e-1].breakAfter&&oe[i].merge(0,0,oe[e-1],!1,w,W)&&e--,(e<i||o.length)&&r.replaceChildren(e,i,o)}}function O(r,e,t,i,n,o){let h=r.childCursor(),{i:w,off:W}=h.findPos(t,1),{i:oe,off:be}=h.findPos(e,-1),Pe=e-t;for(let it of i)Pe+=it.length;r.length+=Pe,_(r,oe,be,w,W,i,0,n,o)}let U=typeof navigator!="undefined"?navigator:{userAgent:"",vendor:"",platform:""},Te=typeof document!="undefined"?document:{documentElement:{style:{}}};const je=/Edge\/(\d+)/.exec(U.userAgent),le=/MSIE \d/.test(U.userAgent),Qe=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(U.userAgent),ot=!!(le||Qe||je),nt=!ot&&/gecko\/(\d+)/i.test(U.userAgent),ut=!ot&&/Chrome\/(\d+)/.exec(U.userAgent),me="webkitFontSmoothing"in Te.documentElement.style,v=!ot&&/Apple Computer/.test(U.vendor),M=v&&(/Mobile\/\w+/.test(U.userAgent)||U.maxTouchPoints>2);var P={mac:M||/Mac/.test(U.platform),windows:/Win/.test(U.platform),linux:/Linux|X11/.test(U.platform),ie:ot,ie_version:le?Te.documentMode||6:Qe?+Qe[1]:je?+je[1]:0,gecko:nt,gecko_version:nt?+(/Firefox\/(\d+)/.exec(U.userAgent)||[0,0])[1]:0,chrome:!!ut,chrome_version:ut?+ut[1]:0,ios:M,android:/Android\b/.test(U.userAgent),webkit:me,safari:v,webkit_version:me?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:Te.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const I=256;class ie extends u{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,i){return i&&(!(i instanceof ie)||this.length-(t-e)+i.length>I)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new ie(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new p(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return Ve(this.dom,e,t)}}class fe extends u{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let n of t)n.setParent(this)}setAttrs(e){if(f(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.dirty|=6)}sync(e){this.dom?this.dirty&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e)}merge(e,t,i,n,o,h){return i&&(!(i instanceof fe&&i.mark.eq(this.mark))||e&&o<=0||t<this.length&&h<=0)?!1:(O(this,e,t,i?i.children:[],o-1,h-1),this.markDirty(),!0)}split(e){let t=[],i=0,n=-1,o=0;for(let w of this.children){let W=i+w.length;W>e&&t.push(i<e?w.split(e-i):w),n<0&&i>=e&&(n=o),i=W,o++}let h=this.length-e;return this.length=e,n>-1&&(this.children.length=n,this.markDirty()),new fe(this.mark,t,h)}domAtPos(e){return ye(this.dom,this.children,e)}coordsAt(e,t){return s(this,e,t)}}function Ve(r,e,t){let i=r.nodeValue.length;e>i&&(e=i);let n=e,o=e,h=0;e==0&&t<0||e==i&&t>=0?P.chrome||P.gecko||(e?(n--,h=1):(o++,h=-1)):t<0?n--:o++;let w=Ae(r,n,o).getClientRects();if(!w.length)return xe;let W=w[(h?h<0:t>=0)?0:w.length-1];return P.safari&&!h&&W.width==0&&(W=Array.prototype.find.call(w,oe=>oe.width)||W),h?ve(W,h<0):W||null}class he extends u{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i,this.prevWidget=null}static create(e,t,i){return new(e.customView||he)(e,t,i)}split(e){let t=he.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,o,h){return i&&(!(i instanceof he)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&h<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}become(e){return e.length==this.length&&e instanceof he&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.eq(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return se.Text.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):se.Text.empty}domAtPos(e){return e==0?p.before(this.dom):p.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;if(!i.length)return xe;for(let o=e>0?i.length-1:0;n=i[o],!(e>0?o==0:o==i.length-1||n.top<n.bottom);o+=e>0?-1:1);return e==0&&t>0||e==this.length&&t<=0?n:ve(n,e==0)}get isEditable(){return!1}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class de extends he{domAtPos(e){let{topView:t,text:i}=this.widget;return t?Ee(e,0,t,i,(n,o)=>n.domAtPos(o),n=>new p(i,Math.min(n,i.nodeValue.length))):new p(i,Math.min(e,i.nodeValue.length))}sync(){this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){let{topView:i,text:n}=this.widget;return i?K(e,t,i,n):Math.min(t,this.length)}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){let{topView:i,text:n}=this.widget;return i?Ee(e,t,i,n,(o,h,w)=>o.coordsAt(h,w),(o,h)=>Ve(n,o,h)):Ve(n,e,t)}destroy(){var e;super.destroy(),(e=this.widget.topView)===null||e===void 0||e.destroy()}get isEditable(){return!0}}function Ee(r,e,t,i,n,o){if(t instanceof fe){for(let h of t.children){let w=pe(h.dom,i),W=w?i.nodeValue.length:h.length;if(r<W||r==W&&h.getSide()<=0)return w?Ee(r,e,h,i,n,o):n(h,r,e);r-=W}return n(t,t.length,-1)}else return t.dom==i?o(r,e):n(t,r,e)}function K(r,e,t,i){if(t instanceof fe)for(let n of t.children){let o=0,h=pe(n.dom,i);if(pe(n.dom,r))return o+(h?K(r,e,n,i):n.localPosFromDOM(r,e));o+=h?i.nodeValue.length:n.length}else if(t.dom==i)return Math.min(e,i.nodeValue.length);return t.localPosFromDOM(r,e)}class A extends u{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof A&&e.side==this.side}split(){return new A(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return p.before(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){let t=this.dom.getBoundingClientRect(),i=z(this,this.side>0?-1:1);return i&&i.top<t.bottom&&i.bottom>t.top?{left:t.left,right:t.right,top:i.top,bottom:i.bottom}:t}get overrideDOMText(){return se.Text.empty}}ie.prototype.children=he.prototype.children=A.prototype.children=x;function z(r,e){let t=r.parent,i=t?t.children.indexOf(r):-1;for(;t&&i>=0;)if(e<0?i>0:i<t.children.length){let n=t.children[i+e];if(n instanceof ie){let o=n.coordsAt(e<0?n.length:0,e);if(o)return o}i+=e}else if(t instanceof fe&&t.parent)i=t.parent.children.indexOf(t)+(e<0?0:1),t=t.parent;else{let n=t.dom.lastChild;if(n&&n.nodeName=="BR")return n.getClientRects()[0];break}}function ye(r,e,t){let i=0;for(let n=0;i<e.length;i++){let o=e[i],h=n+o.length;if(!(h==n&&o.getSide()<=0)){if(t>n&&t<h&&o.dom.parentNode==r)return o.domAtPos(t-n);if(t<=n)break;n=h}}for(;i>0;i--){let n=e[i-1].dom;if(n.parentNode==r)return p.after(n)}return new p(r,0)}function De(r,e,t){let i,{children:n}=r;t>0&&e instanceof fe&&n.length&&(i=n[n.length-1])instanceof fe&&i.mark.eq(e.mark)?De(i,e.children[0],t-1):(n.push(e),e.setParent(r)),r.length+=e.length}function s(r,e,t){for(let o=0,h=0;h<r.children.length;h++){let w=r.children[h],W=o+w.length,oe;if((t<=0||W==r.length||w.getSide()>0?W>=e:W>e)&&(e<W||h+1==r.children.length||(oe=r.children[h+1]).length||oe.getSide()>0)){let be=0;if(W==o){if(w.getSide()<=0)continue;be=t=-w.getSide()}let Pe=w.coordsAt(Math.max(0,e-o),t);return be&&Pe?ve(Pe,t<0):Pe}o=W}let i=r.dom.lastChild;if(!i)return r.dom.getBoundingClientRect();let n=ce(i);return n[n.length-1]||null}function C(r,e){for(let t in r)t=="class"&&e.class?e.class+=" "+r.class:t=="style"&&e.style?e.style+=";"+r.style:e[t]=r[t];return e}function l(r,e){if(r==e)return!0;if(!r||!e)return!1;let t=Object.keys(r),i=Object.keys(e);if(t.length!=i.length)return!1;for(let n of t)if(i.indexOf(n)==-1||r[n]!==e[n])return!1;return!0}function d(r,e,t){if(e)for(let i in e)t&&i in t||r.removeAttribute(i);if(t)for(let i in t)e&&e[i]==t[i]||r.setAttribute(i,t[i])}class b{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}destroy(e){}}m.BlockType=void 0,function(r){r[r.Text=0]="Text",r[r.WidgetBefore=1]="WidgetBefore",r[r.WidgetAfter=2]="WidgetAfter",r[r.WidgetRange=3]="WidgetRange"}(m.BlockType||(m.BlockType={}));class E extends G.RangeValue{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new L(e)}static widget(e){let t=e.side||0,i=!!e.block;return t+=i?t>0?3e8:-4e8:t>0?1e8:-1e8,new ge(e,t,t,i,e.widget||null,!1)}static replace(e){let t=!!e.block,i,n;if(e.isBlockGap)i=-5e8,n=4e8;else{let{start:o,end:h}=Ne(e,t);i=(o?t?-3e8:-1:5e8)-1,n=(h?t?2e8:1:-6e8)+1}return new ge(e,i,n,t,e.widget||null,!0)}static line(e){return new V(e)}static set(e,t=!1){return G.RangeSet.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}E.none=G.RangeSet.empty;class L extends E{constructor(e){let{start:t,end:i}=Ne(e);super(t?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof L&&this.tagName==e.tagName&&this.class==e.class&&l(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}L.prototype.point=!1;class V extends E{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof V&&l(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}V.prototype.mapMode=g.MapMode.TrackBefore,V.prototype.point=!0;class ge extends E{constructor(e,t,i,n,o,h){super(t,i,o,e),this.block=n,this.isReplace=h,this.mapMode=n?t<=0?g.MapMode.TrackBefore:g.MapMode.TrackAfter:g.MapMode.TrackDel}get type(){return this.startSide<this.endSide?m.BlockType.WidgetRange:this.startSide<=0?m.BlockType.WidgetBefore:m.BlockType.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof ge&&Ue(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ge.prototype.point=!0;function Ne(r,e=!1){let{inclusiveStart:t,inclusiveEnd:i}=r;return t==null&&(t=r.inclusive),i==null&&(i=r.inclusive),{start:t!=null?t:e,end:i!=null?i:e}}function Ue(r,e){return r==e||!!(r&&e&&r.compare(e))}function Ke(r,e,t,i=0){let n=t.length-1;n>=0&&t[n]+i>=r?t[n]=Math.max(t[n],e):t.push(r,e)}class _e extends u{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,o,h){if(i){if(!(i instanceof _e))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),O(this,e,t,i?i.children:[],o,h),!0}split(e){let t=new _e;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].split(n),0),this.children[i].merge(n,this.children[i].length,null,!1,0,0),i++);for(let o=i;o<this.children.length;o++)t.append(this.children[o],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){l(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){De(this,e,t)}addLineDeco(e){let t=e.spec.attributes,i=e.spec.class;t&&(this.attrs=C(t,this.attrs||{})),i&&(this.attrs=C({class:i},this.attrs||{}))}domAtPos(e){return ye(this.dom,this.children,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.dirty|=6)}sync(e){var t;this.dom?this.dirty&4&&(f(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(d(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e);let i=this.dom.lastChild;for(;i&&u.get(i)instanceof fe;)i=i.lastChild;if(!i||!this.length||i.nodeName!="BR"&&((t=u.get(i))===null||t===void 0?void 0:t.isEditable)==!1&&(!P.ios||!this.children.some(n=>n instanceof ie))){let n=document.createElement("BR");n.cmIgnore=!0,this.dom.appendChild(n)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof ie))return null;let i=ce(t.dom);if(i.length!=1)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return s(this,e,t)}become(e){return!1}get type(){return m.BlockType.Text}static find(e,t){for(let i=0,n=0;i<e.children.length;i++){let o=e.children[i],h=n+o.length;if(h>=t){if(o instanceof _e)return o;if(h>t)break}n=h+o.breakAfter}return null}}class a extends u{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0,this.prevWidget=null}merge(e,t,i,n,o,h){return i&&(!(i instanceof a)||!this.widget.compare(i.widget)||e>0&&o<=0||t<this.length&&h<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?p.before(this.dom):p.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let i=new a(this.widget,t,this.type);return i.breakAfter=this.breakAfter,i}get children(){return x}sync(){(!this.dom||!this.widget.updateDOM(this.dom))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):g.Text.empty}domBoundsAround(){return null}become(e){return e instanceof a&&e.type==this.type&&e.widget.constructor==this.widget.constructor?(e.widget.eq(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class k{constructor(e,t,i,n){this.doc=e,this.pos=t,this.end=i,this.disallowBlockEffectsBelow=n,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!e.breakAfter&&!(e instanceof a&&e.type==m.BlockType.WidgetBefore)}getLine(){return this.curLine||(this.content.push(this.curLine=new _e),this.atCursorPos=!0),this.curLine}flushBuffer(e){this.pendingBuffer&&(this.curLine.append(N(new A(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer([]),this.curLine=null,this.content.push(e)}finish(e){e?this.pendingBuffer=0:this.flushBuffer([]),this.posCovered()||this.getLine()}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:o,lineBreak:h,done:w}=this.cursor.next(this.skip);if(this.skip=0,w)throw new Error("Ran out of text content when drawing inline views");if(h){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer([]),this.curLine=null,e--;continue}else this.text=o,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(0,i)),this.getLine().append(N(new ie(this.text.slice(this.textOff,this.textOff+n)),t),i),this.atCursorPos=!0,this.textOff+=n,e-=n,i=0}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,o){let h=t-e;if(i instanceof ge)if(i.block){let{type:w}=i;w==m.BlockType.WidgetAfter&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new a(i.widget||new X("div"),h,w))}else{let w=he.create(i.widget||new X("span"),h,i.startSide),W=this.atCursorPos&&!w.isEditable&&o<=n.length&&(e<t||i.startSide>0),oe=!w.isEditable&&(e<t||i.startSide<=0),be=this.getLine();this.pendingBuffer==2&&!W&&(this.pendingBuffer=0),this.flushBuffer(n),W&&(be.append(N(new A(1),n),o),o=n.length+Math.max(0,o-n.length)),be.append(N(w,n),o),this.atCursorPos=oe,this.pendingBuffer=oe?e<t?1:2:0}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);h&&(this.textOff+h<=this.text.length?this.textOff+=h:(this.skip+=h-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=o)}filterPoint(e,t,i,n){if(n<this.disallowBlockEffectsBelow&&i instanceof ge){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}return!0}static build(e,t,i,n,o){let h=new k(e,t,i,o);return h.openEnd=G.RangeSet.spans(n,t,i,h),h.openStart<0&&(h.openStart=h.openEnd),h.finish(h.openEnd),h}}function N(r,e){for(let t of e)r=new fe(t,[r],r.length);return r}class X extends b{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}const ne=[],we=g.Facet.define(),$e=g.Facet.define(),Ge=g.Facet.define(),et=g.Facet.define(),ht=g.Facet.define(),gt=g.Facet.define(),St=g.StateEffect.define({map:(r,e)=>r.map(e)}),bt=g.StateEffect.define({map:(r,e)=>r.map(e)});class Gt{constructor(e,t="nearest",i="nearest",n=5,o=5){this.range=e,this.y=t,this.x=i,this.yMargin=n,this.xMargin=o}map(e){return e.empty?this:new Gt(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin)}}const Zt=g.StateEffect.define({map:(r,e)=>r.map(e)});function Ht(r,e,t){let i=r.facet(et);i.length?i[0](e):window.onerror?window.onerror(String(e),t,void 0,void 0,e):t?console.error(t+":",e):console.error(e)}const ni=g.Facet.define({combine:r=>r.length?r[0]:!0});class si{constructor(e,t){this.field=e,this.get=t}}class Ut{from(e){return new si(this,e)}static define(){return new Ut}}Ut.decorations=Ut.define(),Ut.atomicRanges=Ut.define(),Ut.scrollMargins=Ut.define();let ri=0;const ei=g.Facet.define();class Se{constructor(e,t,i){this.id=e,this.create=t,this.fields=i,this.extension=ei.of(this)}static define(e,t){let{eventHandlers:i,provide:n,decorations:o}=t||{},h=[];if(n)for(let w of Array.isArray(n)?n:[n])h.push(w);return i&&h.push(Z.from(w=>({plugin:w,handlers:i}))),o&&h.push(Ut.decorations.from(o)),new Se(ri++,e,h)}static fromClass(e,t){return Se.define(i=>new e(i),t)}}const Z=Ut.define();class te{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}takeField(e,t){if(this.spec)for(let{field:i,get:n}of this.spec.fields)i==e&&t.push(n(this.value))}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(i){if(Ht(t.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(n){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Ht(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(i){Ht(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ce=g.Facet.define(),Oe=g.Facet.define(),Ye=g.Facet.define(),qe=g.Facet.define();class rt{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new rt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(t.length==0)return e;let i=[];for(let n=0,o=0,h=0,w=0;;n++){let W=n==e.length?null:e[n],oe=h-w,be=W?W.fromB:1e9;for(;o<t.length&&t[o]<be;){let Pe=t[o],it=t[o+1],tt=Math.max(w,Pe),st=Math.min(be,it);if(tt<=st&&new rt(tt+oe,st+oe,tt,st).addToSet(i),it>be)break;o+=2}if(!W)return i;new rt(W.fromA,W.toA,W.fromB,W.toB).addToSet(i),h=W.toA,w=W.toB}}}class at{constructor(e,t,i=ne){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=g.ChangeSet.empty(this.startState.doc.length);for(let h of i)this.changes=this.changes.compose(h.changes);let n=[];this.changes.iterChangedRanges((h,w,W,oe)=>n.push(new rt(h,w,W,oe))),this.changedRanges=n;let o=e.hasFocus;o!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=o,this.flags|=1)}get viewportChanged(){return(this.flags&4)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&10)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}m.Direction=void 0,function(r){r[r.LTR=0]="LTR",r[r.RTL=1]="RTL"}(m.Direction||(m.Direction={}));const pt=m.Direction.LTR,Et=m.Direction.RTL;function Pt(r){let e=[];for(let t=0;t<r.length;t++)e.push(1<<+r[t]);return e}const oi=Pt("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),$t=Pt("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ti=Object.create(null),Xt=[];for(let r of["()","[]","{}"]){let e=r.charCodeAt(0),t=r.charCodeAt(1);ti[e]=t,ti[t]=-e}function Je(r){return r<=247?oi[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?$t[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||r==8204?256:1}const Re=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class He{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?Et:pt}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let o=-1;for(let h=0;h<e.length;h++){let w=e[h];if(w.from<=t&&w.to>=t){if(w.level==i)return h;(o<0||(n!=0?n<0?w.from<t:w.to>t:e[o].level>w.level))&&(o=h)}}if(o<0)throw new RangeError("Index out of range");return o}}const ze=[];function y(r,e){let t=r.length,i=e==pt?1:2,n=e==pt?2:1;if(!r||i==1&&!Re.test(r))return ee(t);for(let h=0,w=i,W=i;h<t;h++){let oe=Je(r.charCodeAt(h));oe==512?oe=w:oe==8&&W==4&&(oe=16),ze[h]=oe==4?2:oe,oe&7&&(W=oe),w=oe}for(let h=0,w=i,W=i;h<t;h++){let oe=ze[h];if(oe==128)h<t-1&&w==ze[h+1]&&w&24?oe=ze[h]=w:ze[h]=256;else if(oe==64){let be=h+1;for(;be<t&&ze[be]==64;)be++;let Pe=h&&w==8||be<t&&ze[be]==8?W==1?1:8:256;for(let it=h;it<be;it++)ze[it]=Pe;h=be-1}else oe==8&&W==1&&(ze[h]=1);w=oe,oe&7&&(W=oe)}for(let h=0,w=0,W=0,oe,be,Pe;h<t;h++)if(be=ti[oe=r.charCodeAt(h)])if(be<0){for(let it=w-3;it>=0;it-=3)if(Xt[it+1]==-be){let tt=Xt[it+2],st=tt&2?i:tt&4?tt&1?n:i:0;st&&(ze[h]=ze[Xt[it]]=st),w=it;break}}else{if(Xt.length==189)break;Xt[w++]=h,Xt[w++]=oe,Xt[w++]=W}else if((Pe=ze[h])==2||Pe==1){let it=Pe==i;W=it?0:1;for(let tt=w-3;tt>=0;tt-=3){let st=Xt[tt+2];if(st&2)break;if(it)Xt[tt+2]|=2;else{if(st&4)break;Xt[tt+2]|=4}}}for(let h=0;h<t;h++)if(ze[h]==256){let w=h+1;for(;w<t&&ze[w]==256;)w++;let W=(h?ze[h-1]:i)==1,oe=(w<t?ze[w]:i)==1,be=W==oe?W?1:2:i;for(let Pe=h;Pe<w;Pe++)ze[Pe]=be;h=w-1}let o=[];if(i==1)for(let h=0;h<t;){let w=h,W=ze[h++]!=1;for(;h<t&&W==(ze[h]!=1);)h++;if(W)for(let oe=h;oe>w;){let be=oe,Pe=ze[--oe]!=2;for(;oe>w&&Pe==(ze[oe-1]!=2);)oe--;o.push(new He(oe,be,Pe?2:1))}else o.push(new He(w,h,0))}else for(let h=0;h<t;){let w=h,W=ze[h++]==2;for(;h<t&&W==(ze[h]==2);)h++;o.push(new He(w,h,W?1:2))}return o}function ee(r){return[new He(0,r,0)]}let ke="";function Le(r,e,t,i,n){var o;let h=i.head-r.from,w=-1;if(h==0){if(!n||!r.length)return null;e[0].level!=t&&(h=e[0].side(!1,t),w=0)}else if(h==r.length){if(n)return null;let it=e[e.length-1];it.level!=t&&(h=it.side(!0,t),w=e.length-1)}w<0&&(w=He.find(e,h,(o=i.bidiLevel)!==null&&o!==void 0?o:-1,i.assoc));let W=e[w];h==W.side(n,t)&&(W=e[w+=n?1:-1],h=W.side(!n,t));let oe=n==(W.dir==t),be=se.findClusterBreak(r.text,h,oe);if(ke=r.text.slice(Math.min(h,be),Math.max(h,be)),be!=W.side(n,t))return g.EditorSelection.cursor(be+r.from,oe?-1:1,W.level);let Pe=w==(n?e.length-1:0)?null:e[w+(n?1:-1)];return!Pe&&W.level!=t?g.EditorSelection.cursor(n?r.to:r.from,n?-1:1,t):Pe&&Pe.level<W.level?g.EditorSelection.cursor(Pe.side(!n,t)+r.from,n?1:-1,Pe.level):g.EditorSelection.cursor(be+r.from,n?-1:1,W.level)}const Ze="\uFFFF";class Ie{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(g.EditorState.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ze}readRange(e,t){if(!e)return this;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let o=n.nextSibling;if(o==t)break;let h=u.get(n),w=u.get(o);(h&&w?h.breakAfter:(h?h.breakAfter:Xe(n))||Xe(o)&&(n.nodeName!="BR"||n.cmIgnore))&&this.lineBreak(),n=o}return this.findPointBefore(i,t),this}readTextNode(e){let t=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t.length));for(let i=0,n=this.lineSeparator?null:/\r\n?|\n/g;;){let o=-1,h=1,w;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,i),h=this.lineSeparator.length):(w=n.exec(t))&&(o=w.index,h=w[0].length),this.append(t.slice(i,o<0?t.length:o)),o<0)break;if(this.lineBreak(),h>1)for(let W of this.points)W.node==e&&W.pos>this.text.length&&(W.pos-=h-1);i=o+h}}readNode(e){if(e.cmIgnore)return;let t=u.get(e),i=t&&t.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let n=i.iter();!n.next().done;)n.lineBreak?this.lineBreak():this.append(n.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointInside(e,t){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+Math.min(t,i.offset))}}function Xe(r){return r.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(r.nodeName)}class lt{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class ct extends u{constructor(e){super(),this.view=e,this.compositionDeco=E.none,this.decorations=[],this.pluginDecorationLength=0,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new _e],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new rt(0,0,0,e.state.doc.length)],0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){let t=e.changedRanges;this.minWidth>0&&t.length&&(t.every(({fromA:h,toA:w})=>w<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.view.inputState.composing<0?this.compositionDeco=E.none:(e.transactions.length||this.dirty)&&(this.compositionDeco=Vt(this.view,e.changes)),(P.ie||P.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let i=this.decorations,n=this.updateDeco(),o=Bt(i,n,e.changes);return t=rt.extendWithRanges(t,o),this.dirty==0&&t.length==0?!1:(this.updateInner(t,e.startState.doc.length),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t);let{observer:i}=this.view;i.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let o=P.chrome||P.ios?{node:i.selectionRange.focusNode,written:!1}:void 0;this.sync(o),this.dirty=0,o&&(o.written||i.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""});let n=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof a&&o.widget instanceof yt&&n.push(o.dom);i.updateGaps(n)}updateChildren(e,t){let i=this.childCursor(t);for(let n=e.length-1;;n--){let o=n>=0?e[n]:null;if(!o)break;let{fromA:h,toA:w,fromB:W,toB:oe}=o,{content:be,breakAtStart:Pe,openStart:it,openEnd:tt}=k.build(this.view.state.doc,W,oe,this.decorations,this.pluginDecorationLength),{i:st,off:mt}=i.findPos(w,1),{i:At,off:Ct}=i.findPos(h,-1);_(this,At,Ct,st,mt,be,Pe,it,tt)}}updateSelection(e=!1,t=!1){if(e&&this.view.observer.readSelectionRange(),!(t||this.mayControlSelection())||P.ios&&this.view.inputState.rapidCompositionStart)return;let i=this.forceSelection;this.forceSelection=!1;let n=this.view.state.selection.main,o=this.domAtPos(n.anchor),h=n.empty?o:this.domAtPos(n.head);if(P.gecko&&n.empty&&ft(o)){let W=document.createTextNode("");this.view.observer.ignore(()=>o.node.insertBefore(W,o.node.childNodes[o.offset]||null)),o=h=new p(W,0),i=!0}let w=this.view.observer.selectionRange;(i||!w.focusNode||!ae(o.node,o.offset,w.anchorNode,w.anchorOffset)||!ae(h.node,h.offset,w.focusNode,w.focusOffset))&&(this.view.observer.ignore(()=>{P.android&&P.chrome&&this.dom.contains(w.focusNode)&&kt(w.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let W=ue(this.root);if(n.empty){if(P.gecko){let oe=Lt(o.node,o.offset);if(oe&&oe!=3){let be=Mt(o.node,o.offset,oe==1?1:-1);be&&(o=new p(be,oe==1?0:be.nodeValue.length))}}W.collapse(o.node,o.offset),n.bidiLevel!=null&&w.cursorBidiLevel!=null&&(w.cursorBidiLevel=n.bidiLevel)}else if(W.extend)W.collapse(o.node,o.offset),W.extend(h.node,h.offset);else{let oe=document.createRange();n.anchor>n.head&&([o,h]=[h,o]),oe.setEnd(h.node,h.offset),oe.setStart(o.node,o.offset),W.removeAllRanges(),W.addRange(oe)}}),this.view.observer.setSelectionRange(o,h)),this.impreciseAnchor=o.precise?null:new p(w.anchorNode,w.anchorOffset),this.impreciseHead=h.precise?null:new p(w.focusNode,w.focusOffset)}enforceCursorAssoc(){if(this.compositionDeco.size)return;let e=this.view.state.selection.main,t=ue(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=_e.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let o=this.coordsAt(e.head,-1),h=this.coordsAt(e.head,1);if(!o||!h||o.bottom>h.top)return;let w=this.domAtPos(e.head+e.assoc);t.collapse(w.node,w.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(ni)?this.root.activeElement==this.dom:$(this.dom,this.view.observer.selectionRange)}nearest(e){for(let t=e;t;){let i=u.get(t);if(i&&i.rootView==this)return i;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let n=this.children[t];if(i<n.length||n instanceof _e)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let o=this.children[n],h=i-o.breakAfter-o.length;if(e>h||e==h&&o.type!=m.BlockType.WidgetBefore&&o.type!=m.BlockType.WidgetAfter&&(!n||t==2||this.children[n-1].breakAfter||this.children[n-1].type==m.BlockType.WidgetBefore&&t>-2))return o.coordsAt(e-h,t);i=h}}measureVisibleLineHeights(){let e=[],{from:t,to:i}=this.view.viewState.viewport,n=this.view.contentDOM.clientWidth,o=n>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,h=-1;for(let w=0,W=0;W<this.children.length;W++){let oe=this.children[W],be=w+oe.length;if(be>i)break;if(w>=t){let Pe=oe.dom.getBoundingClientRect();if(e.push(Pe.height),o){let it=oe.dom.lastChild,tt=it?ce(it):[];if(tt.length){let st=tt[tt.length-1],mt=this.view.textDirection==m.Direction.LTR?st.right-Pe.left:Pe.right-st.left;mt>h&&(h=mt,this.minWidth=n,this.minWidthFrom=w,this.minWidthTo=be)}}}w=be+oe.breakAfter}return e}measureTextSize(){for(let n of this.children)if(n instanceof _e){let o=n.measureTextSize();if(o)return o}let e=document.createElement("div"),t,i;return e.className="cm-line",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let n=ce(e.firstChild)[0];t=e.getBoundingClientRect().height,i=n?n.width/27:7,e.remove()}),{lineHeight:t,charWidth:i}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new B(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let i=0,n=0;;n++){let o=n==t.viewports.length?null:t.viewports[n],h=o?o.from-1:this.length;if(h>i){let w=t.lineBlockAt(h).bottom-t.lineBlockAt(i).top;e.push(E.replace({widget:new yt(w),block:!0,inclusive:!0,isBlockGap:!0}).range(i,h))}if(!o)break;i=o.to+1}return E.set(e)}updateDeco(){let e=this.view.pluginField(Ut.decorations);return this.pluginDecorationLength=e.length,this.decorations=[...e,...this.view.state.facet(Ye),this.compositionDeco,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(e){let{range:t}=e,i=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),n;if(!i)return;!t.empty&&(n=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(i={left:Math.min(i.left,n.left),top:Math.min(i.top,n.top),right:Math.max(i.right,n.right),bottom:Math.max(i.bottom,n.bottom)});let o=0,h=0,w=0,W=0;for(let be of this.view.pluginField(Ut.scrollMargins))if(be){let{left:Pe,right:it,top:tt,bottom:st}=be;Pe!=null&&(o=Math.max(o,Pe)),it!=null&&(h=Math.max(h,it)),tt!=null&&(w=Math.max(w,tt)),st!=null&&(W=Math.max(W,st))}let oe={left:i.left-o,top:i.top-w,right:i.right+h,bottom:i.bottom+W};Be(this.view.scrollDOM,oe,t.head<t.anchor?-1:1,e.x,e.y,e.xMargin,e.yMargin,this.view.textDirection==m.Direction.LTR)}}function ft(r){return r.node.nodeType==1&&r.node.firstChild&&(r.offset==0||r.node.childNodes[r.offset-1].contentEditable=="false")&&(r.offset==r.node.childNodes.length||r.node.childNodes[r.offset].contentEditable=="false")}class yt extends b{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get estimatedHeight(){return this.height}}function xt(r){let e=r.observer.selectionRange,t=e.focusNode&&Mt(e.focusNode,e.focusOffset,0);if(!t)return null;let i=r.docView.nearest(t);if(!i)return null;if(i instanceof _e){let n=t;for(;n.parentNode!=i.dom;)n=n.parentNode;let o=n.previousSibling;for(;o&&!u.get(o);)o=o.previousSibling;let h=o?u.get(o).posAtEnd:i.posAtStart;return{from:h,to:h,node:n,text:t}}else{for(;;){let{parent:o}=i;if(!o)return null;if(o instanceof _e)break;i=o}let n=i.posAtStart;return{from:n,to:n+i.length,node:i.dom,text:t}}}function Vt(r,e){let t=xt(r);if(!t)return E.none;let{from:i,to:n,node:o,text:h}=t,w=e.mapPos(i,1),W=Math.max(w,e.mapPos(n,-1)),{state:oe}=r,be=o.nodeType==3?o.nodeValue:new Ie([],oe).readRange(o.firstChild,null).text;if(W-w<be.length)if(oe.doc.sliceString(w,Math.min(oe.doc.length,w+be.length),Ze)==be)W=w+be.length;else if(oe.doc.sliceString(Math.max(0,W-be.length),W,Ze)==be)w=W-be.length;else return E.none;else if(oe.doc.sliceString(w,W,Ze)!=be)return E.none;let Pe=u.get(o);return Pe instanceof de?Pe=Pe.widget.topView:Pe&&(Pe.parent=null),E.set(E.replace({widget:new vt(o,h,Pe)}).range(w,W))}class vt extends b{constructor(e,t,i){super(),this.top=e,this.text=t,this.topView=i}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return de}}function Mt(r,e,t){for(;;){if(r.nodeType==3)return r;if(r.nodeType==1&&e>0&&t<=0)r=r.childNodes[e-1],e=Fe(r);else if(r.nodeType==1&&e<r.childNodes.length&&t>=0)r=r.childNodes[e],e=0;else return null}}function Lt(r,e){return r.nodeType!=1?0:(e&&r.childNodes[e-1].contentEditable=="false"?1:0)|(e<r.childNodes.length&&r.childNodes[e].contentEditable=="false"?2:0)}class wt{constructor(){this.changes=[]}compareRange(e,t){Ke(e,t,this.changes)}comparePoint(e,t){Ke(e,t,this.changes)}}function Bt(r,e,t){let i=new wt;return G.RangeSet.compare(r,e,t,i),i.changes}function kt(r,e){for(let t=r;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function jt(r,e,t=1){let i=r.charCategorizer(e),n=r.doc.lineAt(e),o=e-n.from;if(n.length==0)return g.EditorSelection.cursor(e);o==0?t=1:o==n.length&&(t=-1);let h=o,w=o;t<0?h=se.findClusterBreak(n.text,o,!1):w=se.findClusterBreak(n.text,o);let W=i(n.text.slice(h,w));for(;h>0;){let oe=se.findClusterBreak(n.text,h,!1);if(i(n.text.slice(oe,h))!=W)break;h=oe}for(;w<n.length;){let oe=se.findClusterBreak(n.text,w);if(i(n.text.slice(w,oe))!=W)break;w=oe}return g.EditorSelection.range(h+n.from,w+n.from)}function Ot(r,e){return e.left>r?e.left-r:Math.max(0,r-e.right)}function Rt(r,e){return e.top>r?e.top-r:Math.max(0,r-e.bottom)}function dt(r,e){return r.top<e.bottom-1&&r.bottom>e.top+1}function qt(r,e){return e<r.top?{top:e,left:r.left,right:r.right,bottom:r.bottom}:r}function Tt(r,e){return e>r.bottom?{top:r.top,left:r.left,right:r.right,bottom:e}:r}function Dt(r,e,t){let i,n,o,h,w,W,oe,be;for(let tt=r.firstChild;tt;tt=tt.nextSibling){let st=ce(tt);for(let mt=0;mt<st.length;mt++){let At=st[mt];n&&dt(n,At)&&(At=qt(Tt(At,n.bottom),n.top));let Ct=Ot(e,At),Yt=Rt(t,At);if(Ct==0&&Yt==0)return tt.nodeType==3?ui(tt,e,t):Dt(tt,e,t);(!i||h>Yt||h==Yt&&o>Ct)&&(i=tt,n=At,o=Ct,h=Yt),Ct==0?t>At.bottom&&(!oe||oe.bottom<At.bottom)?(w=tt,oe=At):t<At.top&&(!be||be.top>At.top)&&(W=tt,be=At):oe&&dt(oe,At)?oe=Tt(oe,At.bottom):be&&dt(be,At)&&(be=qt(be,At.top))}}if(oe&&oe.bottom>=t?(i=w,n=oe):be&&be.top<=t&&(i=W,n=be),!i)return{node:r,offset:0};let Pe=Math.max(n.left,Math.min(n.right,e));if(i.nodeType==3)return ui(i,Pe,t);if(!o&&i.contentEditable=="true")return Dt(i,Pe,t);let it=Array.prototype.indexOf.call(r.childNodes,i)+(e>=(n.left+n.right)/2?1:0);return{node:r,offset:it}}function ui(r,e,t){let i=r.nodeValue.length,n=-1,o=1e9,h=0;for(let w=0;w<i;w++){let W=Ae(r,w,w+1).getClientRects();for(let oe=0;oe<W.length;oe++){let be=W[oe];if(be.top==be.bottom)continue;h||(h=e-be.left);let Pe=(be.top>t?be.top-t:t-be.bottom)-1;if(be.left-1<=e&&be.right+1>=e&&Pe<o){let it=e>=(be.left+be.right)/2,tt=it;if((P.chrome||P.gecko)&&Ae(r,w).getBoundingClientRect().left==be.right&&(tt=!it),Pe<=0)return{node:r,offset:w+(tt?1:0)};n=w+(tt?1:0),o=Pe}}}return{node:r,offset:n>-1?n:h>0?r.nodeValue.length:0}}function hi(r,{x:e,y:t},i,n=-1){var o;let h=r.contentDOM.getBoundingClientRect(),w=h.top+r.viewState.paddingTop,W,{docHeight:oe}=r.viewState,be=t-w;if(be<0)return 0;if(be>oe)return r.state.doc.length;for(let Ct=r.defaultLineHeight/2,Yt=!1;W=r.elementAtHeight(be),W.type!=m.BlockType.Text;)for(;be=n>0?W.bottom+Ct:W.top-Ct,!(be>=0&&be<=oe);){if(Yt)return i?null:0;Yt=!0,n=-n}t=w+be;let Pe=W.from;if(Pe<r.viewport.from)return r.viewport.from==0?0:i?null:ci(r,h,W,e,t);if(Pe>r.viewport.to)return r.viewport.to==r.state.doc.length?r.state.doc.length:i?null:ci(r,h,W,e,t);let it=r.dom.ownerDocument,tt=r.root.elementFromPoint?r.root:it,st=tt.elementFromPoint(e,t);st&&!r.contentDOM.contains(st)&&(st=null),st||(e=Math.max(h.left+1,Math.min(h.right-1,e)),st=tt.elementFromPoint(e,t),st&&!r.contentDOM.contains(st)&&(st=null));let mt,At=-1;if(st&&((o=r.docView.nearest(st))===null||o===void 0?void 0:o.isEditable)!=!1){if(it.caretPositionFromPoint){let Ct=it.caretPositionFromPoint(e,t);Ct&&({offsetNode:mt,offset:At}=Ct)}else if(it.caretRangeFromPoint){let Ct=it.caretRangeFromPoint(e,t);Ct&&({startContainer:mt,startOffset:At}=Ct,P.safari&&Si(mt,At,e)&&(mt=void 0))}}if(!mt||!r.docView.dom.contains(mt)){let Ct=_e.find(r.docView,Pe);if(!Ct)return be>W.top+W.height/2?W.to:W.from;({node:mt,offset:At}=Dt(Ct.dom,e,t))}return r.docView.posFromDOM(mt,At)}function ci(r,e,t,i,n){let o=Math.round((i-e.left)*r.defaultCharacterWidth);if(r.lineWrapping&&t.height>r.defaultLineHeight*1.5){let w=Math.floor((n-t.top)/r.defaultLineHeight);o+=w*r.viewState.heightOracle.lineLength}let h=r.state.sliceDoc(t.from,t.to);return t.from+se.findColumn(h,o,r.state.tabSize)}function Si(r,e,t){let i;if(r.nodeType!=3||e!=(i=r.nodeValue.length))return!1;for(let n=r.nextSibling;n;n=n.nextSibling)if(n.nodeType!=1||n.nodeName!="BR")return!1;return Ae(r,i-1,i).getBoundingClientRect().left>t}function Kt(r,e,t,i){let n=r.state.doc.lineAt(e.head),o=!i||!r.lineWrapping?null:r.coordsAtPos(e.assoc<0&&e.head>n.from?e.head-1:e.head);if(o){let W=r.dom.getBoundingClientRect(),oe=r.posAtCoords({x:t==(r.textDirection==m.Direction.LTR)?W.right-1:W.left+1,y:(o.top+o.bottom)/2});if(oe!=null)return g.EditorSelection.cursor(oe,t?-1:1)}let h=_e.find(r.docView,e.head),w=h?t?h.posAtEnd:h.posAtStart:t?n.to:n.from;return g.EditorSelection.cursor(w,t?-1:1)}function wi(r,e,t,i){let n=r.state.doc.lineAt(e.head),o=r.bidiSpans(n);for(let h=e,w=null;;){let W=Le(n,o,r.textDirection,h,t),oe=ke;if(!W){if(n.number==(t?r.state.doc.lines:1))return h;oe=`
`,n=r.state.doc.line(n.number+(t?1:-1)),o=r.bidiSpans(n),W=g.EditorSelection.cursor(t?n.from:n.to)}if(w){if(!w(oe))return h}else{if(!i)return W;w=i(oe)}h=W}}function Di(r,e,t){let i=r.state.charCategorizer(e),n=i(t);return o=>{let h=i(o);return n==g.CharCategory.Space&&(n=h),n==h}}function Zi(r,e,t,i){let n=e.head,o=t?1:-1;if(n==(t?r.state.doc.length:0))return g.EditorSelection.cursor(n,e.assoc);let h=e.goalColumn,w,W=r.contentDOM.getBoundingClientRect(),oe=r.coordsAtPos(n),be=r.documentTop;if(oe)h==null&&(h=oe.left-W.left),w=o<0?oe.top:oe.bottom;else{let tt=r.viewState.lineBlockAt(n-be);h==null&&(h=Math.min(W.right-W.left,r.defaultCharacterWidth*(n-tt.from))),w=(o<0?tt.top:tt.bottom)+be}let Pe=W.left+h,it=i!=null?i:r.defaultLineHeight>>1;for(let tt=0;;tt+=10){let st=w+(it+tt)*o,mt=hi(r,{x:Pe,y:st},!1,o);if(st<W.top||st>W.bottom||(o<0?mt<n:mt>n))return g.EditorSelection.cursor(mt,e.assoc,void 0,h)}}function Ci(r,e,t){let i=r.pluginField(Ut.atomicRanges);for(;;){let n=!1;for(let o of i)o.between(t.from-1,t.from+1,(h,w,W)=>{t.from>h&&t.from<w&&(t=e.from>t.from?g.EditorSelection.cursor(h,1):g.EditorSelection.cursor(w,-1),n=!0)});if(!n)return t}}class Pi{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.rapidCompositionStart=!1,this.mouseSelection=null;for(let t in It){let i=It[t];e.contentDOM.addEventListener(t,n=>{!fi(e,n)||this.ignoreDuringComposition(n)||t=="keydown"&&this.keydown(e,n)||(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))}),this.registeredEvents.push(t)}this.notifiedFocused=e.hasFocus,this.ensureHandlers(e),P.safari&&e.contentDOM.addEventListener("input",()=>null)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e){let t=this.customHandlers=e.pluginField(Z);for(let i of t)for(let n in i.handlers)this.registeredEvents.indexOf(n)<0&&n!="scroll"&&(this.registeredEvents.push(n),e.contentDOM.addEventListener(n,o=>{fi(e,o)&&this.runCustomHandlers(n,e,o)&&o.preventDefault()}))}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let o=n.handlers[e];if(o)try{if(o.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(h){Ht(t.state,h)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(o){Ht(e.state,o)}}}keydown(e,t){if(this.lastKeyCode=t.keyCode,this.lastKeyTime=Date.now(),t.keyCode==9&&Date.now()<this.lastEscPress+2e3)return!0;if(P.android&&P.chrome&&!t.synthetic&&(t.keyCode==13||t.keyCode==8))return e.observer.delayAndroidKey(t.key,t.keyCode),!0;let i;return P.ios&&(i=Oi.find(n=>n.keyCode==t.keyCode))&&!(t.ctrlKey||t.altKey||t.metaKey)&&!t.synthetic?(this.pendingIOSKey=i,setTimeout(()=>this.flushIOSKey(e),250),!0):!1}flushIOSKey(e){let t=this.pendingIOSKey;return t?(this.pendingIOSKey=void 0,j(e.contentDOM,t.key,t.keyCode)):!1}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:P.safari&&Date.now()-this.compositionEndedAt<500?(this.compositionEndedAt=0,!0):!1:!1}mustFlushObserver(e){return e.type=="keydown"&&e.keyCode!=229||e.type=="compositionend"&&!P.ios}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.mouseSelection&&this.mouseSelection.update(e),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}const Oi=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],Li=[16,17,18,20,91,92,224,225];class Ui{constructor(e,t,i,n){this.view=e,this.style=i,this.mustSelect=n,this.lastEvent=t;let o=e.contentDOM.ownerDocument;o.addEventListener("mousemove",this.move=this.move.bind(this)),o.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(g.EditorState.allowMultipleSelections)&&Ki(e,t),this.dragMove=Bi(e,t),this.dragging=Gi(e,t)&&Yi(t)==1?null:!1,this.dragging===!1&&(t.preventDefault(),this.select(t))}move(e){if(e.buttons==0)return this.destroy();this.dragging===!1&&this.select(this.lastEvent=e)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);(this.mustSelect||!t.eq(this.view.state.selection)||t.main.assoc!=this.view.state.selection.main.assoc)&&this.view.dispatch({selection:t,userEvent:"select.pointer",scrollIntoView:!0}),this.mustSelect=!1}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function Ki(r,e){let t=r.state.facet(we);return t.length?t[0](e):P.mac?e.metaKey:e.ctrlKey}function Bi(r,e){let t=r.state.facet($e);return t.length?t[0](e):P.mac?!e.altKey:!e.ctrlKey}function Gi(r,e){let{main:t}=r.state.selection;if(t.empty)return!1;let i=ue(r.root);if(i.rangeCount==0)return!0;let n=i.getRangeAt(0).getClientRects();for(let o=0;o<n.length;o++){let h=n[o];if(h.left<=e.clientX&&h.right>=e.clientX&&h.top<=e.clientY&&h.bottom>=e.clientY)return!0}return!1}function fi(r,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,i;t!=r.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(i=u.get(t))&&i.ignoreEvent(e))return!1;return!0}const It=Object.create(null),li=P.ie&&P.ie_version<15||P.ios&&P.webkit_version<604;function Jn(r){let e=r.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{r.focus(),t.remove(),on(r,t.value)},50)}function on(r,e){let{state:t}=r,i,n=1,o=t.toText(e),h=o.lines==t.selection.ranges.length;if(Ji!=null&&t.selection.ranges.every(W=>W.empty)&&Ji==o.toString()){let W=-1;i=t.changeByRange(oe=>{let be=t.doc.lineAt(oe.from);if(be.from==W)return{range:oe};W=be.from;let Pe=t.toText((h?o.line(n++).text:e)+t.lineBreak);return{changes:{from:be.from,insert:Pe},range:g.EditorSelection.cursor(oe.from+Pe.length)}})}else h?i=t.changeByRange(W=>{let oe=o.line(n++);return{changes:{from:W.from,to:W.to,insert:oe.text},range:g.EditorSelection.cursor(W.from+oe.length)}}):i=t.replaceSelection(o);r.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}It.keydown=(r,e)=>{r.inputState.setSelectionOrigin("select"),e.keyCode==27?r.inputState.lastEscPress=Date.now():Li.indexOf(e.keyCode)<0&&(r.inputState.lastEscPress=0)};let ln=0;It.touchstart=(r,e)=>{ln=Date.now(),r.inputState.setSelectionOrigin("select.pointer")},It.touchmove=r=>{r.inputState.setSelectionOrigin("select.pointer")},It.mousedown=(r,e)=>{if(r.observer.flush(),ln>Date.now()-2e3&&Yi(e)==1)return;let t=null;for(let i of r.state.facet(Ge))if(t=i(r,e),t)break;if(!t&&e.button==0&&(t=Qn(r,e)),t){let i=r.root.activeElement!=r.contentDOM;i&&r.observer.ignore(()=>R(r.contentDOM)),r.inputState.startMouseSelection(new Ui(r,e,t,i))}};function an(r,e,t,i){if(i==1)return g.EditorSelection.cursor(e,t);if(i==2)return jt(r.state,e,t);{let n=_e.find(r.docView,e),o=r.state.doc.lineAt(n?n.posAtEnd:e),h=n?n.posAtStart:o.from,w=n?n.posAtEnd:o.to;return w<r.state.doc.length&&w==o.to&&w++,g.EditorSelection.range(h,w)}}let hn=(r,e)=>r>=e.top&&r<=e.bottom,cn=(r,e,t)=>hn(e,t)&&r>=t.left&&r<=t.right;function $n(r,e,t,i){let n=_e.find(r.docView,e);if(!n)return 1;let o=e-n.posAtStart;if(o==0)return 1;if(o==n.length)return-1;let h=n.coordsAt(o,-1);if(h&&cn(t,i,h))return-1;let w=n.coordsAt(o,1);return w&&cn(t,i,w)?1:h&&hn(i,h)?-1:1}function un(r,e){let t=r.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:$n(r,t,e.clientX,e.clientY)}}const Xn=P.ie&&P.ie_version<=11;let fn=null,dn=0,pn=0;function Yi(r){if(!Xn)return r.detail;let e=fn,t=pn;return fn=r,pn=Date.now(),dn=!e||t>Date.now()-400&&Math.abs(e.clientX-r.clientX)<2&&Math.abs(e.clientY-r.clientY)<2?(dn+1)%3:1}function Qn(r,e){let t=un(r,e),i=Yi(e),n=r.state.selection,o=t,h=e;return{update(w){w.docChanged&&(t&&(t.pos=w.changes.mapPos(t.pos)),n=n.map(w.changes),h=null)},get(w,W,oe){let be;if(h&&w.clientX==h.clientX&&w.clientY==h.clientY?be=o:(be=o=un(r,w),h=w),!be||!t)return n;let Pe=an(r,be.pos,be.bias,i);if(t.pos!=be.pos&&!W){let it=an(r,t.pos,t.bias,i),tt=Math.min(it.from,Pe.from),st=Math.max(it.to,Pe.to);Pe=tt<Pe.from?g.EditorSelection.range(tt,st):g.EditorSelection.range(st,tt)}return W?n.replaceRange(n.main.extend(Pe.from,Pe.to)):oe?n.addRange(Pe):g.EditorSelection.create([Pe])}}}It.dragstart=(r,e)=>{let{selection:{main:t}}=r.state,{mouseSelection:i}=r.inputState;i&&(i.dragging=t),e.dataTransfer&&(e.dataTransfer.setData("Text",r.state.sliceDoc(t.from,t.to)),e.dataTransfer.effectAllowed="copyMove")};function mn(r,e,t,i){if(!t)return;let n=r.posAtCoords({x:e.clientX,y:e.clientY},!1);e.preventDefault();let{mouseSelection:o}=r.inputState,h=i&&o&&o.dragging&&o.dragMove?{from:o.dragging.from,to:o.dragging.to}:null,w={from:n,insert:t},W=r.state.changes(h?[h,w]:w);r.focus(),r.dispatch({changes:W,selection:{anchor:W.mapPos(n,-1),head:W.mapPos(n,1)},userEvent:h?"move.drop":"input.drop"})}It.drop=(r,e)=>{if(!e.dataTransfer)return;if(r.state.readOnly)return e.preventDefault();let t=e.dataTransfer.files;if(t&&t.length){e.preventDefault();let i=Array(t.length),n=0,o=()=>{++n==t.length&&mn(r,e,i.filter(h=>h!=null).join(r.state.lineBreak),!1)};for(let h=0;h<t.length;h++){let w=new FileReader;w.onerror=o,w.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(w.result)||(i[h]=w.result),o()},w.readAsText(t[h])}}else mn(r,e,e.dataTransfer.getData("Text"),!0)},It.paste=(r,e)=>{if(r.state.readOnly)return e.preventDefault();r.observer.flush();let t=li?null:e.clipboardData;t?(on(r,t.getData("text/plain")),e.preventDefault()):Jn(r)};function qn(r,e){let t=r.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),r.focus()},50)}function _n(r){let e=[],t=[],i=!1;for(let n of r.selection.ranges)n.empty||(e.push(r.sliceDoc(n.from,n.to)),t.push(n));if(!e.length){let n=-1;for(let{from:o}of r.selection.ranges){let h=r.doc.lineAt(o);h.number>n&&(e.push(h.text),t.push({from:h.from,to:Math.min(r.doc.length,h.to+1)})),n=h.number}i=!0}return{text:e.join(r.lineBreak),ranges:t,linewise:i}}let Ji=null;It.copy=It.cut=(r,e)=>{let{text:t,ranges:i,linewise:n}=_n(r.state);if(!t&&!n)return;Ji=n?t:null;let o=li?null:e.clipboardData;o?(e.preventDefault(),o.clearData(),o.setData("text/plain",t)):qn(r,t),e.type=="cut"&&!r.state.readOnly&&r.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"})},It.focus=It.blur=r=>{setTimeout(()=>{r.hasFocus!=r.inputState.notifiedFocused&&r.update([])},10)};function gn(r,e){if(r.docView.compositionDeco.size){r.inputState.rapidCompositionStart=e;try{r.update([])}finally{r.inputState.rapidCompositionStart=!1}}}It.compositionstart=It.compositionupdate=r=>{r.inputState.compositionFirstChange==null&&(r.inputState.compositionFirstChange=!0),r.inputState.composing<0&&(r.inputState.composing=0,r.docView.compositionDeco.size&&(r.observer.flush(),gn(r,!0)))},It.compositionend=r=>{r.inputState.composing=-1,r.inputState.compositionEndedAt=Date.now(),r.inputState.compositionFirstChange=null,setTimeout(()=>{r.inputState.composing<0&&gn(r,!1)},50)},It.contextmenu=r=>{r.inputState.lastContextMenu=Date.now()},It.beforeinput=(r,e)=>{var t;let i;if(P.chrome&&P.android&&(i=Oi.find(n=>n.inputType==e.inputType))&&(r.observer.delayAndroidKey(i.key,i.keyCode),i.key=="Backspace"||i.key=="Delete")){let n=((t=window.visualViewport)===null||t===void 0?void 0:t.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>n+10&&r.hasFocus&&(r.contentDOM.blur(),r.focus())},100)}};const vn=["pre-wrap","normal","pre-line","break-spaces"];class yn{constructor(){this.doc=se.Text.empty,this.lineWrapping=!1,this.direction=m.Direction.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForStyle(e,t){return vn.indexOf(e)>-1!=this.lineWrapping||this.direction!=t}mustRefreshForHeights(e){let t=!1;for(let i=0;i<e.length;i++){let n=e[i];n<0?i++:this.heightSamples[Math.floor(n*10)]||(t=!0,this.heightSamples[Math.floor(n*10)]=!0)}return t}refresh(e,t,i,n,o,h){let w=vn.indexOf(e)>-1,W=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=w||this.direction!=t;if(this.lineWrapping=w,this.direction=t,this.lineHeight=i,this.charWidth=n,this.lineLength=o,W){this.heightSamples={};for(let oe=0;oe<h.length;oe++){let be=h[oe];be<0?oe++:this.heightSamples[Math.floor(be*10)]=!0}}return W}}class bn{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ai{constructor(e,t,i,n,o){this.from=e,this.length=t,this.top=i,this.height=n,this.type=o}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new ai(this.from,this.length+e.length,this.top,this.height+e.height,t)}moveY(e){return e?new ai(this.from,this.length,this.top+e,this.height,Array.isArray(this.type)?this.type.map(t=>t.moveY(e)):this.type):this}}var Nt;(function(r){r[r.ByPos=0]="ByPos",r[r.ByHeight=1]="ByHeight",r[r.ByPosNoHeight=2]="ByPosNoHeight"})(Nt||(Nt={}));const Ri=.001;class _t{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>Ri&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return _t.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let o=this;for(let h=n.length-1;h>=0;h--){let{fromA:w,toA:W,fromB:oe,toB:be}=n[h],Pe=o.lineAt(w,Nt.ByPosNoHeight,t,0,0),it=Pe.to>=W?Pe:o.lineAt(W,Nt.ByPosNoHeight,t,0,0);for(be+=it.to-W,W=it.to;h>0&&Pe.from<=n[h-1].toA;)w=n[h-1].fromA,oe=n[h-1].fromB,h--,w<Pe.from&&(Pe=o.lineAt(w,Nt.ByPosNoHeight,t,0,0));oe+=Pe.from-w,w=Pe.from;let tt=$i.build(i,e,oe,be);o=o.replace(w,W,tt)}return o.updateHeight(i,0)}static empty(){return new ii(0,0)}static of(e){if(e.length==1)return e[0];let t=0,i=e.length,n=0,o=0;for(;;)if(t==i)if(n>o*2){let w=e[t-1];w.break?e.splice(--t,1,w.left,null,w.right):e.splice(--t,1,w.left,w.right),i+=1+w.break,n-=w.size}else if(o>n*2){let w=e[i];w.break?e.splice(i,1,w.left,null,w.right):e.splice(i,1,w.left,w.right),i+=2+w.break,o-=w.size}else break;else if(n<o){let w=e[t++];w&&(n+=w.size)}else{let w=e[--i];w&&(o+=w.size)}let h=0;return e[t-1]==null?(h=1,t--):e[t]==null&&(h=1,i++),new er(_t.of(e.slice(0,t)),h,_t.of(e.slice(i)))}}_t.prototype.size=1;class xn extends _t{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new ai(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,o){return this.blockAt(0,i,n,o)}forEachLine(e,t,i,n,o,h){h(this.blockAt(0,i,n,o))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class ii extends xn{constructor(e,t){super(e,t,m.BlockType.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return i.length==1&&(n instanceof ii||n instanceof Qt&&n.flags&4)&&Math.abs(this.length-n.length)<10?(n instanceof Qt?n=new ii(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):_t.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Qt extends _t{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:o,lastLine:h,lineHeight:w}=this.lines(t,n),W=Math.max(0,Math.min(h-o,Math.floor((e-i)/w))),{from:oe,length:be}=t.line(o+W);return new ai(oe,be,i+w*W,w,m.BlockType.Text)}lineAt(e,t,i,n,o){if(t==Nt.ByHeight)return this.blockAt(e,i,n,o);if(t==Nt.ByPosNoHeight){let{from:Pe,to:it}=i.lineAt(e);return new ai(Pe,it-Pe,0,0,m.BlockType.Text)}let{firstLine:h,lineHeight:w}=this.lines(i,o),{from:W,length:oe,number:be}=i.lineAt(e);return new ai(W,oe,n+w*(be-h),w,m.BlockType.Text)}forEachLine(e,t,i,n,o,h){let{firstLine:w,lineHeight:W}=this.lines(i,o);for(let oe=Math.max(e,o),be=Math.min(o+this.length,t);oe<=be;){let Pe=i.lineAt(oe);oe==e&&(n+=W*(Pe.number-w)),h(new ai(Pe.from,Pe.length,n,W,m.BlockType.Text)),n+=W,oe=Pe.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let o=i[i.length-1];o instanceof Qt?i[i.length-1]=new Qt(o.length+n):i.push(null,new Qt(n-1))}if(e>0){let o=i[0];o instanceof Qt?i[0]=new Qt(e+o.length):i.unshift(new Qt(e-1),null)}return _t.of(i)}decomposeLeft(e,t){t.push(new Qt(e-1),null)}decomposeRight(e,t){t.push(null,new Qt(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let o=t+this.length;if(n&&n.from<=t+this.length&&n.more){let h=[],w=Math.max(t,n.from),W=-1,oe=e.heightChanged;for(n.from>t&&h.push(new Qt(n.from-t-1).updateHeight(e,t));w<=o&&n.more;){let Pe=e.doc.lineAt(w).length;h.length&&h.push(null);let it=n.heights[n.index++];W==-1?W=it:Math.abs(it-W)>=Ri&&(W=-2);let tt=new ii(Pe,it);tt.outdated=!1,h.push(tt),w+=Pe+1}w<=o&&h.push(null,new Qt(o-w).updateHeight(e,w));let be=_t.of(h);return e.heightChanged=oe||W<0||Math.abs(be.height-this.height)>=Ri||Math.abs(W-this.lines(e.doc,t).lineHeight)>=Ri,be}else(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class er extends _t{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,t,i,n){let o=i+this.left.height;return e<o?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,o,n+this.left.length+this.break)}lineAt(e,t,i,n,o){let h=n+this.left.height,w=o+this.left.length+this.break,W=t==Nt.ByHeight?e<h:e<w,oe=W?this.left.lineAt(e,t,i,n,o):this.right.lineAt(e,t,i,h,w);if(this.break||(W?oe.to<w:oe.from>w))return oe;let be=t==Nt.ByPosNoHeight?Nt.ByPosNoHeight:Nt.ByPos;return W?oe.join(this.right.lineAt(w,be,i,h,w)):this.left.lineAt(w,be,i,n,o).join(oe)}forEachLine(e,t,i,n,o,h){let w=n+this.left.height,W=o+this.left.length+this.break;if(this.break)e<W&&this.left.forEachLine(e,t,i,n,o,h),t>=W&&this.right.forEachLine(e,t,i,w,W,h);else{let oe=this.lineAt(W,Nt.ByPos,i,n,o);e<oe.from&&this.left.forEachLine(e,oe.from-1,i,n,o,h),oe.to>=e&&oe.from<=t&&h(oe),t>oe.to&&this.right.forEachLine(oe.to+1,t,i,w,W,h)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let o=[];e>0&&this.decomposeLeft(e,o);let h=o.length;for(let w of i)o.push(w);if(e>0&&Sn(o,h-1),t<this.length){let w=o.length;this.decomposeRight(t,o),Sn(o,w)}return _t.of(o)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?_t.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:o,right:h}=this,w=t+o.length+this.break,W=null;return n&&n.from<=t+o.length&&n.more?W=o=o.updateHeight(e,t,i,n):o.updateHeight(e,t,i),n&&n.from<=w+h.length&&n.more?W=h=h.updateHeight(e,w,i,n):h.updateHeight(e,w,i),W?this.balanced(o,h):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Sn(r,e){let t,i;r[e]==null&&(t=r[e-1])instanceof Qt&&(i=r[e+1])instanceof Qt&&r.splice(e-1,3,new Qt(t.length+1+i.length))}const tr=5;class $i{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let i=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof ii?n.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new ii(i-this.pos,-1)),this.writtenTo=i,t>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?i.widget.estimatedHeight:0;n<0&&(n=this.oracle.lineHeight);let o=t-e;i.block?this.addBlock(new xn(o,n,i.type)):(o||n>=tr)&&this.addLineDeco(n,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new ii(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Qt(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof ii)return e;let t=new ii(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type==m.BlockType.WidgetAfter&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=m.BlockType.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof ii)&&!this.isCovered?this.nodes.push(new ii(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let n of this.nodes)n instanceof ii&&n.updateHeight(this.oracle,i),i+=n?n.length:1;return this.nodes}static build(e,t,i,n){let o=new $i(i,e);return G.RangeSet.spans(t,i,n,o,0),o.finish(i)}}function ir(r,e,t){let i=new nr;return G.RangeSet.compare(r,e,t,i,0),i.changes}class nr{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&Ke(e,t,this.changes,5)}}function rr(r,e){let t=r.getBoundingClientRect(),i=Math.max(0,t.left),n=Math.min(innerWidth,t.right),o=Math.max(0,t.top),h=Math.min(innerHeight,t.bottom),w=r.ownerDocument.body;for(let W=r.parentNode;W&&W!=w;)if(W.nodeType==1){let oe=W,be=window.getComputedStyle(oe);if((oe.scrollHeight>oe.clientHeight||oe.scrollWidth>oe.clientWidth)&&be.overflow!="visible"){let Pe=oe.getBoundingClientRect();i=Math.max(i,Pe.left),n=Math.min(n,Pe.right),o=Math.max(o,Pe.top),h=Math.min(h,Pe.bottom)}W=be.position=="absolute"||be.position=="fixed"?oe.offsetParent:oe.parentNode}else if(W.nodeType==11)W=W.host;else break;return{left:i-t.left,right:Math.max(i,n)-t.left,top:o-(t.top+e),bottom:Math.max(o,h)-(t.top+e)}}function sr(r,e){let t=r.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Xi{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],o=t[i];if(n.from!=o.from||n.to!=o.to||n.size!=o.size)return!1}return!0}draw(e){return E.replace({widget:new or(this.size,e)}).range(this.from,this.to)}}class or extends b{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class wn{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.heightOracle=new yn,this.scaler=An,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=_t.empty().applyChanges(e.facet(Ye),se.Text.empty,this.heightOracle.setDoc(e.doc),[new rt(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=E.set(this.lineGaps.map(t=>t.draw(!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let i=0;i<=1;i++){let n=i?t.head:t.anchor;if(!e.some(({from:o,to:h})=>n>=o&&n<=h)){let{from:o,to:h}=this.lineBlockAt(n);e.push(new Ii(o,h))}}this.viewports=e.sort((i,n)=>i.from-n.from),this.scaler=this.heightMap.height<=7e6?An:new hr(this.heightOracle.doc,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,e=>{this.viewportLines.push(this.scaler.scale==1?e:Ai(e,this.scaler))})}update(e,t=null){let i=this.state;this.state=e.state;let n=this.state.facet(Ye),o=e.changedRanges,h=rt.extendWithRanges(o,ir(e.startState.facet(Ye),n,e?e.changes:g.ChangeSet.empty(this.state.doc.length))),w=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(n,i.doc,this.heightOracle.setDoc(this.state.doc),h),this.heightMap.height!=w&&(e.flags|=2);let W=h.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<W.from||t.range.head>W.to)||!this.viewportIsAppropriate(W))&&(W=this.getViewport(0,t));let oe=!e.changes.empty||e.flags&2||W.from!=this.viewport.from||W.to!=this.viewport.to;this.viewport=W,this.updateForViewport(),oe&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,i=window.getComputedStyle(t),n=this.heightOracle,o=i.whiteSpace,h=i.direction=="rtl"?m.Direction.RTL:m.Direction.LTR,w=this.heightOracle.mustRefreshForStyle(o,h),W=w||this.mustMeasureContent||this.contentDOMHeight!=t.clientHeight,oe=0,be=0;if(this.editorWidth!=e.scrollDOM.clientWidth&&(n.lineWrapping&&(W=!0),this.editorWidth=e.scrollDOM.clientWidth,oe|=8),W){this.mustMeasureContent=!1,this.contentDOMHeight=t.clientHeight;let Ct=parseInt(i.paddingTop)||0,Yt=parseInt(i.paddingBottom)||0;(this.paddingTop!=Ct||this.paddingBottom!=Yt)&&(oe|=8,this.paddingTop=Ct,this.paddingBottom=Yt)}let Pe=(this.printing?sr:rr)(t,this.paddingTop),it=Pe.top-this.pixelViewport.top,tt=Pe.bottom-this.pixelViewport.bottom;this.pixelViewport=Pe;let st=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(st!=this.inView&&(this.inView=st,st&&(W=!0)),!this.inView)return 0;let mt=t.clientWidth;if((this.contentDOMWidth!=mt||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=mt,this.editorHeight=e.scrollDOM.clientHeight,oe|=8),W){let Ct=e.docView.measureVisibleLineHeights();if(n.mustRefreshForHeights(Ct)&&(w=!0),w||n.lineWrapping&&Math.abs(mt-this.contentDOMWidth)>n.charWidth){let{lineHeight:Yt,charWidth:Ft}=e.docView.measureTextSize();w=n.refresh(o,h,Yt,Ft,mt/Ft,Ct),w&&(e.docView.minWidth=0,oe|=8)}it>0&&tt>0?be=Math.max(it,tt):it<0&&tt<0&&(be=Math.min(it,tt)),n.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(n,0,w,new bn(this.viewport.from,Ct)),n.heightChanged&&(oe|=2)}let At=!this.viewportIsAppropriate(this.viewport,be)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return At&&(this.viewport=this.getViewport(be,this.scrollTarget)),this.updateForViewport(),(oe&2||At)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(w?[]:this.lineGaps)),oe|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),oe}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,o=this.state.doc,{visibleTop:h,visibleBottom:w}=this,W=new Ii(n.lineAt(h-i*1e3,Nt.ByHeight,o,0,0).from,n.lineAt(w+(1-i)*1e3,Nt.ByHeight,o,0,0).to);if(t){let{head:oe}=t.range;if(oe<W.from||oe>W.to){let be=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),Pe=n.lineAt(oe,Nt.ByPos,o,0,0),it;t.y=="center"?it=(Pe.top+Pe.bottom)/2-be/2:t.y=="start"||t.y=="nearest"&&oe<W.from?it=Pe.top:it=Pe.bottom-be,W=new Ii(n.lineAt(it-1e3/2,Nt.ByHeight,o,0,0).from,n.lineAt(it+be+1e3/2,Nt.ByHeight,o,0,0).to)}}return W}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new Ii(this.heightMap.lineAt(i,Nt.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,Nt.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){if(!this.inView)return!0;let{top:n}=this.heightMap.lineAt(e,Nt.ByPos,this.state.doc,0,0),{bottom:o}=this.heightMap.lineAt(t,Nt.ByPos,this.state.doc,0,0),{visibleTop:h,visibleBottom:w}=this;return(e==0||n<=h-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||o>=w+Math.max(10,Math.min(i,250)))&&n>h-2*1e3&&o<w+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new Xi(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];if(this.heightOracle.direction!=m.Direction.LTR)return t;for(let i of this.viewportLines){if(i.length<4e3)continue;let n=lr(i.from,i.to,this.state);if(n.total<4e3)continue;let o,h;if(this.heightOracle.lineWrapping){let oe=2e3/this.heightOracle.lineLength*this.heightOracle.lineHeight;o=Ni(n,(this.visibleTop-i.top-oe)/i.height),h=Ni(n,(this.visibleBottom-i.top+oe)/i.height)}else{let oe=n.total*this.heightOracle.charWidth,be=2e3*this.heightOracle.charWidth;o=Ni(n,(this.pixelViewport.left-be)/oe),h=Ni(n,(this.pixelViewport.right+be)/oe)}let w=[];o>i.from&&w.push({from:i.from,to:o}),h<i.to&&w.push({from:h,to:i.to});let W=this.state.selection.main;W.from>=i.from&&W.from<=i.to&&kn(w,W.from-10,W.from+10),!W.empty&&W.to>=i.from&&W.to<=i.to&&kn(w,W.to-10,W.to+10);for(let{from:oe,to:be}of w)be-oe>1e3&&t.push(ar(e,Pe=>Pe.from>=i.from&&Pe.to<=i.to&&Math.abs(Pe.from-oe)<1e3&&Math.abs(Pe.to-be)<1e3)||new Xi(oe,be,this.gapSize(i,oe,be,n)))}return t}gapSize(e,t,i,n){let o=Cn(n,i)-Cn(n,t);return this.heightOracle.lineWrapping?e.height*o:n.total*this.heightOracle.charWidth*o}updateLineGaps(e){Xi.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=E.set(e.map(t=>t.draw(this.heightOracle.lineWrapping))))}computeVisibleRanges(){let e=this.state.facet(Ye);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];G.RangeSet.spans(e,this.viewport.from,this.viewport.to,{span(n,o){t.push({from:n,to:o})},point(){}},20);let i=t.length!=this.visibleRanges.length||this.visibleRanges.some((n,o)=>n.from!=t[o].from||n.to!=t[o].to);return this.visibleRanges=t,i?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ai(this.heightMap.lineAt(e,Nt.ByPos,this.state.doc,0,0),this.scaler)}lineBlockAtHeight(e){return Ai(this.heightMap.lineAt(this.scaler.fromDOM(e),Nt.ByHeight,this.state.doc,0,0),this.scaler)}elementAtHeight(e){return Ai(this.heightMap.blockAt(this.scaler.fromDOM(e),this.state.doc,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ii{constructor(e,t){this.from=e,this.to=t}}function lr(r,e,t){let i=[],n=r,o=0;return G.RangeSet.spans(t.facet(Ye),r,e,{span(){},point(h,w){h>n&&(i.push({from:n,to:h}),o+=h-n),n=w}},20),n<e&&(i.push({from:n,to:e}),o+=e-n),{total:o,ranges:i}}function Ni({total:r,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let i=Math.floor(r*t);for(let n=0;;n++){let{from:o,to:h}=e[n],w=h-o;if(i<=w)return o+i;i-=w}}function Cn(r,e){let t=0;for(let{from:i,to:n}of r.ranges){if(e<=n){t+=e-i;break}t+=n-i}return t/r.total}function kn(r,e,t){for(let i=0;i<r.length;i++){let n=r[i];if(n.from<t&&n.to>e){let o=[];n.from<e&&o.push({from:n.from,to:e}),n.to>t&&o.push({from:t,to:n.to}),r.splice(i,1,...o),i+=o.length-1}}}function ar(r,e){for(let t of r)if(e(t))return t}const An={toDOM(r){return r},fromDOM(r){return r},scale:1};class hr{constructor(e,t,i){let n=0,o=0,h=0;this.viewports=i.map(({from:w,to:W})=>{let oe=t.lineAt(w,Nt.ByPos,e,0,0).top,be=t.lineAt(W,Nt.ByPos,e,0,0).bottom;return n+=be-oe,{from:w,to:W,top:oe,bottom:be,domTop:0,domBottom:0}}),this.scale=(7e6-n)/(t.height-n);for(let w of this.viewports)w.domTop=h+(w.top-o)*this.scale,h=w.domBottom=w.domTop+(w.bottom-w.top),o=w.bottom}toDOM(e){for(let t=0,i=0,n=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.top)return n+(e-i)*this.scale;if(e<=o.bottom)return o.domTop+(e-o.top);i=o.bottom,n=o.domBottom}}fromDOM(e){for(let t=0,i=0,n=0;;t++){let o=t<this.viewports.length?this.viewports[t]:null;if(!o||e<o.domTop)return i+(e-n)/this.scale;if(e<=o.domBottom)return o.top+(e-o.domTop);i=o.bottom,n=o.domBottom}}}function Ai(r,e){if(e.scale==1)return r;let t=e.toDOM(r.top),i=e.toDOM(r.bottom);return new ai(r.from,r.length,t,i-t,Array.isArray(r.type)?r.type.map(n=>Ai(n,e)):r.type)}const Fi=g.Facet.define({combine:r=>r.join(" ")}),Qi=g.Facet.define({combine:r=>r.indexOf(!0)>-1}),qi=H.StyleModule.newName(),En=H.StyleModule.newName(),Tn=H.StyleModule.newName(),Mn={"&light":"."+En,"&dark":"."+Tn};function _i(r,e,t){return new H.StyleModule(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,n=>{if(n=="&")return r;if(!t||!t[n])throw new RangeError(`Unsupported selector: ${n}`);return t[n]}):r+" "+i}})}const cr=_i("."+qi,{"&.cm-editor":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere"},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 4px"},".cm-selectionLayer":{zIndex:-1,contain:"size style"},".cm-selectionBackground":{position:"absolute"},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{zIndex:100,contain:"size style",pointerEvents:"none"},"&.cm-focused .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},".cm-cursor, .cm-dropCursor":{position:"absolute",borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},"&.cm-focused .cm-cursor":{display:"block"},"&light .cm-activeLine":{backgroundColor:"#f3f9ff"},"&dark .cm-activeLine":{backgroundColor:"#223039"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Mn),ur={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},en=P.ie&&P.ie_version<=11;class fr{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.selectionRange=new q,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.scrollTargets=[],this.intersection=null,this.resize=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let o of n)this.queue.push(o);(P.ie&&P.ie_version<=11||P.ios&&e.composing)&&n.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),en&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),window.addEventListener("resize",this.onResize=this.onResize.bind(this)),typeof ResizeObserver=="function"&&(this.resize=new ResizeObserver(()=>{this.view.docView.lastUpdate<Date.now()-75&&this.onResize()}),this.resize.observe(e.scrollDOM)),window.addEventListener("beforeprint",this.onPrint=this.onPrint.bind(this)),this.start(),window.addEventListener("scroll",this.onScroll=this.onScroll.bind(this)),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange(),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}onScroll(e){this.intersecting&&this.flush(!1),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,i)=>t!=e[i]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:t}=this,i=this.selectionRange;if(t.state.facet(ni)?t.root.activeElement!=this.dom:!$(t.dom,i))return;let n=i.anchorNode&&t.docView.nearest(i.anchorNode);n&&n.ignoreEvent(e)||((P.ie&&P.ie_version<=11||P.android&&P.chrome)&&!t.state.selection.main.empty&&i.focusNode&&ae(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)?this.flushSoon():this.flush(!1))}readSelectionRange(){let{root:e}=this.view,t=ue(e),i=P.safari&&e.nodeType==11&&Q()==this.view.contentDOM&&dr(this.view)||t;return this.selectionRange.eq(i)?!1:(this.selectionRange.setRange(i),this.selectionChanged=!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(i.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=t)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ur),en&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),en&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){this.delayedAndroidKey||requestAnimationFrame(()=>{let i=this.delayedAndroidKey;this.delayedAndroidKey=null;let n=this.view.state;j(this.view.contentDOM,i.key,i.keyCode)?this.processRecords():this.flush(),this.view.state==n&&this.view.update([])}),(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t})}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout(()=>{this.delayedFlush=-1,this.flush()},20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}processRecords(){let e=this.queue;for(let o of this.observer.takeRecords())e.push(o);e.length&&(this.queue=[]);let t=-1,i=-1,n=!1;for(let o of e){let h=this.readMutation(o);h&&(h.typeOver&&(n=!0),t==-1?{from:t,to:i}=h:(t=Math.min(h.from,t),i=Math.max(h.to,i)))}return{from:t,to:i,typeOver:n}}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return;e&&this.readSelectionRange();let{from:t,to:i,typeOver:n}=this.processRecords(),o=this.selectionChanged&&$(this.dom,this.selectionRange);if(t<0&&!o)return;this.selectionChanged=!1;let h=this.view.state;this.onChange(t,i,n),this.view.state==h&&this.view.update([])}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.dirty|=4),e.type=="childList"){let i=Dn(t,e.previousSibling||e.target.previousSibling,-1),n=Dn(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}destroy(){var e,t,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(i=this.resize)===null||i===void 0||i.disconnect();for(let n of this.scrollTargets)n.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),window.removeEventListener("resize",this.onResize),window.removeEventListener("beforeprint",this.onPrint),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout)}}function Dn(r,e,t){for(;e;){let i=u.get(e);if(i&&i.parent==r)return i;let n=e.parentNode;e=n!=r.dom?n:t>0?e.nextSibling:e.previousSibling}return null}function dr(r){let e=null;function t(W){W.preventDefault(),W.stopImmediatePropagation(),e=W.getTargetRanges()[0]}if(r.contentDOM.addEventListener("beforeinput",t,!0),document.execCommand("indent"),r.contentDOM.removeEventListener("beforeinput",t,!0),!e)return null;let i=e.startContainer,n=e.startOffset,o=e.endContainer,h=e.endOffset,w=r.docView.domAtPos(r.state.selection.main.anchor);return ae(w.node,w.offset,o,h)&&([i,n,o,h]=[o,h,i,n]),{anchorNode:i,anchorOffset:n,focusNode:o,focusOffset:h}}function pr(r,e,t,i){let n,o,h=r.state.selection.main;if(e>-1){let w=r.docView.domBoundsAround(e,t,0);if(!w||r.state.readOnly)return;let{from:W,to:oe}=w,be=r.docView.impreciseHead||r.docView.impreciseAnchor?[]:gr(r),Pe=new Ie(be,r.state);Pe.readRange(w.startDOM,w.endDOM);let it=h.from,tt=null;(r.inputState.lastKeyCode===8&&r.inputState.lastKeyTime>Date.now()-100||P.android&&Pe.text.length<oe-W)&&(it=h.to,tt="end");let st=mr(r.state.doc.sliceString(W,oe,Ze),Pe.text,it-W,tt);st&&(P.chrome&&r.inputState.lastKeyCode==13&&st.toB==st.from+2&&Pe.text.slice(st.from,st.toB)==Ze+Ze&&st.toB--,n={from:W+st.from,to:W+st.toA,insert:g.Text.of(Pe.text.slice(st.from,st.toB).split(Ze))}),o=vr(be,W)}else if(r.hasFocus||!r.state.facet(ni)){let w=r.observer.selectionRange,{impreciseHead:W,impreciseAnchor:oe}=r.docView,be=W&&W.node==w.focusNode&&W.offset==w.focusOffset||!pe(r.contentDOM,w.focusNode)?r.state.selection.main.head:r.docView.posFromDOM(w.focusNode,w.focusOffset),Pe=oe&&oe.node==w.anchorNode&&oe.offset==w.anchorOffset||!pe(r.contentDOM,w.anchorNode)?r.state.selection.main.anchor:r.docView.posFromDOM(w.anchorNode,w.anchorOffset);(be!=h.head||Pe!=h.anchor)&&(o=g.EditorSelection.single(Pe,be))}if(!(!n&&!o)){if(!n&&i&&!h.empty&&o&&o.main.empty?n={from:h.from,to:h.to,insert:r.state.doc.slice(h.from,h.to)}:n&&n.from>=h.from&&n.to<=h.to&&(n.from!=h.from||n.to!=h.to)&&h.to-h.from-(n.to-n.from)<=4&&(n={from:h.from,to:h.to,insert:r.state.doc.slice(h.from,n.from).append(n.insert).append(r.state.doc.slice(n.to,h.to))}),n){let w=r.state;if(P.ios&&r.inputState.flushIOSKey(r)||P.android&&(n.from==h.from&&n.to==h.to&&n.insert.length==1&&n.insert.lines==2&&j(r.contentDOM,"Enter",13)||n.from==h.from-1&&n.to==h.to&&n.insert.length==0&&j(r.contentDOM,"Backspace",8)||n.from==h.from&&n.to==h.to+1&&n.insert.length==0&&j(r.contentDOM,"Delete",46)))return;let W=n.insert.toString();if(r.state.facet(gt).some(Pe=>Pe(r,n.from,n.to,W)))return;r.inputState.composing>=0&&r.inputState.composing++;let oe;if(n.from>=h.from&&n.to<=h.to&&n.to-n.from>=(h.to-h.from)/3&&(!o||o.main.empty&&o.main.from==n.from+n.insert.length)&&r.inputState.composing<0){let Pe=h.from<n.from?w.sliceDoc(h.from,n.from):"",it=h.to>n.to?w.sliceDoc(n.to,h.to):"";oe=w.replaceSelection(r.state.toText(Pe+n.insert.sliceString(0,void 0,r.state.lineBreak)+it))}else{let Pe=w.changes(n),it=o&&!w.selection.main.eq(o.main)&&o.main.to<=Pe.newLength?o.main:void 0;if(w.selection.ranges.length>1&&r.inputState.composing>=0&&n.to<=h.to&&n.to>=h.to-10){let tt=r.state.sliceDoc(n.from,n.to),st=xt(r)||r.state.doc.lineAt(h.head),mt=h.to-n.to,At=h.to-h.from;oe=w.changeByRange(Ct=>{if(Ct.from==h.from&&Ct.to==h.to)return{changes:Pe,range:it||Ct.map(Pe)};let Yt=Ct.to-mt,Ft=Yt-tt.length;if(Ct.to-Ct.from!=At||r.state.sliceDoc(Ft,Yt)!=tt||st&&Ct.to>=st.from&&Ct.from<=st.to)return{range:Ct};let zt=w.changes({from:Ft,to:Yt,insert:n.insert}),Jt=Ct.to-h.to;return{changes:zt,range:it?g.EditorSelection.range(Math.max(0,it.anchor+Jt),Math.max(0,it.head+Jt)):Ct.map(zt)}})}else oe={changes:Pe,selection:it&&w.selection.replaceRange(it)}}let be="input.type";r.composing&&(be+=".compose",r.inputState.compositionFirstChange&&(be+=".start",r.inputState.compositionFirstChange=!1)),r.dispatch(oe,{scrollIntoView:!0,userEvent:be})}else if(o&&!o.main.eq(h)){let w=!1,W="select";r.inputState.lastSelectionTime>Date.now()-50&&(r.inputState.lastSelectionOrigin=="select"&&(w=!0),W=r.inputState.lastSelectionOrigin),r.dispatch({selection:o,scrollIntoView:w,userEvent:W})}}}function mr(r,e,t,i){let n=Math.min(r.length,e.length),o=0;for(;o<n&&r.charCodeAt(o)==e.charCodeAt(o);)o++;if(o==n&&r.length==e.length)return null;let h=r.length,w=e.length;for(;h>0&&w>0&&r.charCodeAt(h-1)==e.charCodeAt(w-1);)h--,w--;if(i=="end"){let W=Math.max(0,o-Math.min(h,w));t-=h+W-o}if(h<o&&r.length<e.length){let W=t<=o&&t>=h?o-t:0;o-=W,w=o+(w-h),h=o}else if(w<o){let W=t<=o&&t>=w?o-t:0;o-=W,h=o+(h-w),w=o}return{from:o,toA:h,toB:w}}function gr(r){let e=[];if(r.root.activeElement!=r.contentDOM)return e;let{anchorNode:t,anchorOffset:i,focusNode:n,focusOffset:o}=r.observer.selectionRange;return t&&(e.push(new lt(t,i)),(n!=t||o!=i)&&e.push(new lt(n,o))),e}function vr(r,e){if(r.length==0)return null;let t=r[0].pos,i=r.length==2?r[1].pos:t;return t>-1&&i>-1?g.EditorSelection.single(t+e,i+e):null}class Wt{constructor(e={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.style.cssText="position: absolute; top: -10000px",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(t=>this.update([t])),this.dispatch=this.dispatch.bind(this),this.root=e.root||c(e.parent)||document,this.viewState=new wn(e.state||g.EditorState.create()),this.plugins=this.state.facet(ei).map(t=>new te(t));for(let t of this.plugins)t.update(this);this.observer=new fr(this,(t,i,n)=>{pr(this,t,i,n)},t=>{this.inputState.runScrollHandlers(this,t),this.observer.intersecting&&this.measure()}),this.inputState=new Pi(this),this.docView=new ct(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}dispatch(...e){this._dispatch(e.length==1&&e[0]instanceof g.Transaction?e[0]:this.state.update(...e))}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,i,n=this.state;for(let h of e){if(h.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=h.state}if(this.destroyed){this.viewState.state=n;return}if(n.facet(g.EditorState.phrases)!=this.state.facet(g.EditorState.phrases))return this.setState(n);i=new at(this,n,e);let o=this.viewState.scrollTarget;try{this.updateState=2;for(let h of e){if(o&&(o=o.map(h.changes)),h.scrollIntoView){let{main:w}=h.state.selection;o=new Gt(w.empty?w:g.EditorSelection.cursor(w.head,w.head>w.anchor?-1:1))}for(let w of h.effects)w.is(St)?o=new Gt(w.value):w.is(bt)?o=new Gt(w.value,"center"):w.is(Zt)&&(o=w.value)}this.viewState.update(i,o),this.bidiCache=ji.update(this.bidiCache,i.changes),i.empty||(this.updatePlugins(i),this.inputState.update(i)),t=this.docView.update(i),this.state.facet(qe)!=this.styleModules&&this.mountStyles(),this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(i.startState.facet(Fi)!=i.state.facet(Fi)&&(this.viewState.mustMeasureContent=!0),(t||o||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!i.empty)for(let h of this.state.facet(ht))h(i)}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new wn(e),this.plugins=e.facet(ei).map(i=>new te(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView=new ct(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ei),i=e.state.facet(ei);if(t!=i){let n=[];for(let o of i){let h=t.indexOf(o);if(h<0)n.push(new te(o));else{let w=this.plugins[h];w.mustUpdate=e,n.push(w)}}for(let o of this.plugins)o.mustUpdate!=e&&o.destroy(this);this.plugins=n,this.pluginMap.clear(),this.inputState.ensureHandlers(this)}else for(let n of this.plugins)n.mustUpdate=e;for(let n=0;n<this.plugins.length;n++)this.plugins[n].update(this)}measure(e=!0){if(this.destroyed)return;this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=0,e&&this.observer.flush();let t=null;try{for(let i=0;;i++){this.updateState=1;let n=this.viewport,o=this.viewState.measure(this);if(!o&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(i>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let h=[];o&4||([this.measureRequests,h]=[h,this.measureRequests]);let w=h.map(Pe=>{try{return Pe.read(this)}catch(it){return Ht(this.state,it),Pn}}),W=new at(this,this.state),oe=!1,be=!1;W.flags|=o,t?t.flags|=o:t=W,this.updateState=2,W.empty||(this.updatePlugins(W),this.inputState.update(W),this.updateAttrs(),oe=this.docView.update(W));for(let Pe=0;Pe<h.length;Pe++)if(w[Pe]!=Pn)try{let it=h[Pe];it.write&&it.write(w[Pe],this)}catch(it){Ht(this.state,it)}if(this.viewState.scrollTarget&&(this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,be=!0),oe&&this.docView.updateSelection(!0),this.viewport.from==n.from&&this.viewport.to==n.to&&!be&&this.measureRequests.length==0)break}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let i of this.state.facet(ht))i(t)}get themeClasses(){return qi+" "+(this.state.facet(Qi)?Tn:En)+" "+this.state.facet(Fi)}updateAttrs(){let e=On(this,Ce,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(ni)?"true":"false",class:"cm-content",style:`${P.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),On(this,Oe,t),this.observer.ignore(()=>{d(this.contentDOM,this.contentAttrs,t),d(this.dom,this.editorAttrs,e)}),this.editorAttrs=e,this.contentAttrs=t}showAnnouncements(e){let t=!0;for(let i of e)for(let n of i.effects)if(n.is(Wt.announce)){t&&(this.announceDOM.textContent=""),t=!1;let o=this.announceDOM.appendChild(document.createElement("div"));o.textContent=n.value}}mountStyles(){this.styleModules=this.state.facet(qe),H.StyleModule.mount(this.root,this.styleModules.concat(cr).reverse())}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame(()=>this.measure())),e){if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}pluginField(e){let t=[];for(let i of this.plugins)i.update(this).takeField(e,t);return t}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find(i=>i.spec==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}blockAtHeight(e,t){let i=tn(t,this);return this.elementAtHeight(e-i).moveY(i)}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}visualLineAtHeight(e,t){let i=tn(t,this);return this.lineBlockAtHeight(e-i).moveY(i)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}viewportLines(e,t){let i=tn(t,this);for(let n of this.viewportLineBlocks)e(n.moveY(i))}get viewportLineBlocks(){return this.viewState.viewportLines}visualLineAt(e,t=0){return this.lineBlockAt(e).moveY(t+this.viewState.paddingTop)}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,i){return Ci(this,e,wi(this,e,t,i))}moveByGroup(e,t){return Ci(this,e,wi(this,e,t,i=>Di(this,e.head,i)))}moveToLineBoundary(e,t,i=!0){return Kt(this,e,t,i)}moveVertically(e,t,i){return Ci(this,e,Zi(this,e,t,i))}scrollPosIntoView(e){this.dispatch({effects:St.of(g.EditorSelection.cursor(e))})}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),hi(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),o=this.bidiSpans(n),h=o[He.find(o,e-n.from,-1,t)];return ve(i,h.dir==m.Direction.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>yr)return ee(e.length);let t=this.textDirection;for(let n of this.bidiCache)if(n.from==e.from&&n.dir==t)return n.order;let i=y(e.text,this.textDirection);return this.bidiCache.push(new ji(e.from,e.to,t,i)),i}get hasFocus(){var e;return(document.hasFocus()||P.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{R(this.contentDOM),this.docView.updateSelection()})}destroy(){for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Zt.of(new Gt(typeof e=="number"?g.EditorSelection.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}static domEventHandlers(e){return Se.define(()=>({}),{eventHandlers:e})}static theme(e,t){let i=H.StyleModule.newName(),n=[Fi.of(i),qe.of(_i(`.${i}`,e))];return t&&t.dark&&n.push(Qi.of(!0)),n}static baseTheme(e){return g.Prec.lowest(qe.of(_i("."+qi,e,Mn)))}}Wt.scrollTo=St,Wt.centerOn=bt,Wt.styleModule=qe,Wt.inputHandler=gt,Wt.exceptionSink=et,Wt.updateListener=ht,Wt.editable=ni,Wt.mouseSelectionStyle=Ge,Wt.dragMovesSelection=$e,Wt.clickAddsSelectionRange=we,Wt.decorations=Ye,Wt.darkTheme=Qi,Wt.contentAttributes=Oe,Wt.editorAttributes=Ce,Wt.lineWrapping=Wt.contentAttributes.of({class:"cm-lineWrapping"}),Wt.announce=g.StateEffect.define();const yr=4096;function tn(r,e){return(r==null?e.contentDOM.getBoundingClientRect().top:r)+e.viewState.paddingTop}const Pn={};class ji{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:m.Direction.LTR;for(let o=Math.max(0,e.length-10);o<e.length;o++){let h=e[o];h.dir==n&&!t.touchesRange(h.from,h.to)&&i.push(new ji(t.mapPos(h.from,1),t.mapPos(h.to,-1),h.dir,h.order))}return i}}function On(r,e,t){for(let i=r.state.facet(e),n=i.length-1;n>=0;n--){let o=i[n],h=typeof o=="function"?o(r):o;h&&C(h,t)}return t}const br=P.mac?"mac":P.windows?"win":P.linux?"linux":"key";function xr(r,e){const t=r.split(/-(?!$)/);let i=t[t.length-1];i=="Space"&&(i=" ");let n,o,h,w;for(let W=0;W<t.length-1;++W){const oe=t[W];if(/^(cmd|meta|m)$/i.test(oe))w=!0;else if(/^a(lt)?$/i.test(oe))n=!0;else if(/^(c|ctrl|control)$/i.test(oe))o=!0;else if(/^s(hift)?$/i.test(oe))h=!0;else if(/^mod$/i.test(oe))e=="mac"?w=!0:o=!0;else throw new Error("Unrecognized modifier name: "+oe)}return n&&(i="Alt-"+i),o&&(i="Ctrl-"+i),w&&(i="Meta-"+i),h&&(i="Shift-"+i),i}function nn(r,e,t){return e.altKey&&(r="Alt-"+r),e.ctrlKey&&(r="Ctrl-"+r),e.metaKey&&(r="Meta-"+r),t!==!1&&e.shiftKey&&(r="Shift-"+r),r}const Sr=Wt.domEventHandlers({keydown(r,e){return In(Rn(e.state),r,e,"editor")}}),Ln=g.Facet.define({enables:Sr}),Bn=new WeakMap;function Rn(r){let e=r.facet(Ln),t=Bn.get(e);return t||Bn.set(e,t=kr(e.reduce((i,n)=>i.concat(n),[]))),t}function wr(r,e,t){return In(Rn(r.state),e,r,t)}let di=null;const Cr=4e3;function kr(r,e=br){let t=Object.create(null),i=Object.create(null),n=(h,w)=>{let W=i[h];if(W==null)i[h]=w;else if(W!=w)throw new Error("Key binding "+h+" is used both as a regular binding and as a multi-stroke prefix")},o=(h,w,W,oe)=>{let be=t[h]||(t[h]=Object.create(null)),Pe=w.split(/ (?!$)/).map(st=>xr(st,e));for(let st=1;st<Pe.length;st++){let mt=Pe.slice(0,st).join(" ");n(mt,!0),be[mt]||(be[mt]={preventDefault:!0,commands:[At=>{let Ct=di={view:At,prefix:mt,scope:h};return setTimeout(()=>{di==Ct&&(di=null)},Cr),!0}]})}let it=Pe.join(" ");n(it,!1);let tt=be[it]||(be[it]={preventDefault:!1,commands:[]});tt.commands.push(W),oe&&(tt.preventDefault=!0)};for(let h of r){let w=h[e]||h.key;if(w)for(let W of h.scope?h.scope.split(" "):["editor"])o(W,w,h.run,h.preventDefault),h.shift&&o(W,"Shift-"+w,h.shift,h.preventDefault)}return t}function In(r,e,t,i){let n=F.keyName(e),o=n.length==1&&n!=" ",h="",w=!1;di&&di.view==t&&di.scope==i&&(h=di.prefix+" ",(w=Li.indexOf(e.keyCode)<0)&&(di=null));let W=Pe=>{if(Pe){for(let it of Pe.commands)if(it(t))return!0;Pe.preventDefault&&(w=!0)}return!1},oe=r[i],be;if(oe){if(W(oe[h+nn(n,e,!o)]))return!0;if(o&&(e.shiftKey||e.altKey||e.metaKey)&&(be=F.base[e.keyCode])&&be!=n){if(W(oe[h+nn(be,e,!0)]))return!0}else if(o&&e.shiftKey&&W(oe[h+nn(n,e,!0)]))return!0}return w}const Nn=!P.ios,Ei=g.Facet.define({combine(r){return g.combineConfig(r,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function Ar(r={}){return[Ei.of(r),Er,Tr]}class Fn{constructor(e,t,i,n,o){this.left=e,this.top=t,this.width=i,this.height=n,this.className=o}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const Er=Se.fromClass(class{constructor(r){this.view=r,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=r.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className="cm-selectionLayer",this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=r.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className="cm-cursorLayer",this.cursorLayer.setAttribute("aria-hidden","true"),r.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ei).cursorBlinkRate+"ms"}update(r){let e=r.startState.facet(Ei)!=r.state.facet(Ei);(e||r.selectionSet||r.geometryChanged||r.viewportChanged)&&this.view.requestMeasure(this.measureReq),r.transactions.some(t=>t.scrollIntoView)&&(this.cursorLayer.style.animationName=this.cursorLayer.style.animationName=="cm-blink"?"cm-blink2":"cm-blink"),e&&this.setBlinkRate()}readPos(){let{state:r}=this.view,e=r.facet(Ei),t=r.selection.ranges.map(n=>n.empty?[]:Mr(this.view,n)).reduce((n,o)=>n.concat(o)),i=[];for(let n of r.selection.ranges){let o=n==r.selection.main;if(n.empty?!o||Nn:e.drawRangeCursor){let h=Dr(this.view,n,o);h&&i.push(h)}}return{rangePieces:t,cursors:i}}drawSel({rangePieces:r,cursors:e}){if(r.length!=this.rangePieces.length||r.some((t,i)=>!t.eq(this.rangePieces[i]))){this.selectionLayer.textContent="";for(let t of r)this.selectionLayer.appendChild(t.draw());this.rangePieces=r}if(e.length!=this.cursors.length||e.some((t,i)=>!t.eq(this.cursors[i]))){let t=this.cursorLayer.children;if(t.length!==e.length){this.cursorLayer.textContent="";for(const i of e)this.cursorLayer.appendChild(i.draw())}else e.forEach((i,n)=>i.adjust(t[n]));this.cursors=e}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),jn={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Nn&&(jn[".cm-line"].caretColor="transparent !important");const Tr=g.Prec.highest(Wt.theme(jn));function Vn(r){let e=r.scrollDOM.getBoundingClientRect();return{left:(r.textDirection==m.Direction.LTR?e.left:e.right-r.scrollDOM.clientWidth)-r.scrollDOM.scrollLeft,top:e.top-r.scrollDOM.scrollTop}}function Hn(r,e,t){let i=g.EditorSelection.cursor(e);return{from:Math.max(t.from,r.moveToLineBoundary(i,!1,!0).from),to:Math.min(t.to,r.moveToLineBoundary(i,!0,!0).from),type:m.BlockType.Text}}function Wn(r,e){let t=r.lineBlockAt(e);if(Array.isArray(t.type)){for(let i of t.type)if(i.to>e||i.to==e&&(i.to==t.to||i.type==m.BlockType.Text))return i}return t}function Mr(r,e){if(e.to<=r.viewport.from||e.from>=r.viewport.to)return[];let t=Math.max(e.from,r.viewport.from),i=Math.min(e.to,r.viewport.to),n=r.textDirection==m.Direction.LTR,o=r.contentDOM,h=o.getBoundingClientRect(),w=Vn(r),W=window.getComputedStyle(o.firstChild),oe=h.left+parseInt(W.paddingLeft)+Math.min(0,parseInt(W.textIndent)),be=h.right-parseInt(W.paddingRight),Pe=Wn(r,t),it=Wn(r,i),tt=Pe.type==m.BlockType.Text?Pe:null,st=it.type==m.BlockType.Text?it:null;if(r.lineWrapping&&(tt&&(tt=Hn(r,t,tt)),st&&(st=Hn(r,i,st))),tt&&st&&tt.from==st.from)return At(Ct(e.from,e.to,tt));{let Ft=tt?Ct(e.from,null,tt):Yt(Pe,!1),zt=st?Ct(null,e.to,st):Yt(it,!0),Jt=[];return(tt||Pe).to<(st||it).from-1?Jt.push(mt(oe,Ft.bottom,be,zt.top)):Ft.bottom<zt.top&&r.elementAtHeight((Ft.bottom+zt.top)/2).type==m.BlockType.Text&&(Ft.bottom=zt.top=(Ft.bottom+zt.top)/2),At(Ft).concat(Jt).concat(At(zt))}function mt(Ft,zt,Jt,pi){return new Fn(Ft-w.left,zt-w.top-.01,Jt-Ft,pi-zt+.01,"cm-selectionBackground")}function At({top:Ft,bottom:zt,horizontal:Jt}){let pi=[];for(let mi=0;mi<Jt.length;mi+=2)pi.push(mt(Jt[mi],Ft,Jt[mi+1],zt));return pi}function Ct(Ft,zt,Jt){let pi=1e9,mi=-1e9,Hi=[];function Yn(bi,gi,ki,xi,Mi){let vi=r.coordsAtPos(bi,bi==Jt.to?-2:2),yi=r.coordsAtPos(ki,ki==Jt.from?2:-2);pi=Math.min(vi.top,yi.top,pi),mi=Math.max(vi.bottom,yi.bottom,mi),Mi==m.Direction.LTR?Hi.push(n&&gi?oe:vi.left,n&&xi?be:yi.right):Hi.push(!n&&xi?oe:yi.left,!n&&gi?be:vi.right)}let Wi=Ft!=null?Ft:Jt.from,zi=zt!=null?zt:Jt.to;for(let bi of r.visibleRanges)if(bi.to>Wi&&bi.from<zi)for(let gi=Math.max(bi.from,Wi),ki=Math.min(bi.to,zi);;){let xi=r.state.doc.lineAt(gi);for(let Mi of r.bidiSpans(xi)){let vi=Mi.from+xi.from,yi=Mi.to+xi.from;if(vi>=ki)break;yi>gi&&Yn(Math.max(vi,gi),Ft==null&&vi<=Wi,Math.min(yi,ki),zt==null&&yi>=zi,Mi.dir)}if(gi=xi.to+1,gi>=ki)break}return Hi.length==0&&Yn(Wi,Ft==null,zi,zt==null,r.textDirection),{top:pi,bottom:mi,horizontal:Hi}}function Yt(Ft,zt){let Jt=h.top+(zt?Ft.top:Ft.bottom);return{top:Jt,bottom:Jt,horizontal:[]}}}function Dr(r,e,t){let i=r.coordsAtPos(e.head,e.assoc||1);if(!i)return null;let n=Vn(r);return new Fn(i.left-n.left,i.top-n.top,-1,i.bottom-i.top,t?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary")}const zn=g.StateEffect.define({map(r,e){return r==null?null:e.mapPos(r)}}),Ti=g.StateField.define({create(){return null},update(r,e){return r!=null&&(r=e.changes.mapPos(r)),e.effects.reduce((t,i)=>i.is(zn)?i.value:t,r)}}),Pr=Se.fromClass(class{constructor(r){this.view=r,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(r){var e;let t=r.state.field(Ti);t==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(r.startState.field(Ti)!=t||r.docChanged||r.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let r=this.view.state.field(Ti),e=r!=null&&this.view.coordsAtPos(r);if(!e)return null;let t=this.view.scrollDOM.getBoundingClientRect();return{left:e.left-t.left+this.view.scrollDOM.scrollLeft,top:e.top-t.top+this.view.scrollDOM.scrollTop,height:e.bottom-e.top}}drawCursor(r){this.cursor&&(r?(this.cursor.style.left=r.left+"px",this.cursor.style.top=r.top+"px",this.cursor.style.height=r.height+"px"):this.cursor.style.left="-100000px")}destroy(){this.cursor&&this.cursor.remove()}setDropPos(r){this.view.state.field(Ti)!=r&&this.view.dispatch({effects:zn.of(r)})}},{eventHandlers:{dragover(r){this.setDropPos(this.view.posAtCoords({x:r.clientX,y:r.clientY}))},dragleave(r){(r.target==this.view.contentDOM||!this.view.contentDOM.contains(r.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function Or(){return[Ti,Pr]}function Zn(r,e,t,i,n){e.lastIndex=0;for(let o=r.iterRange(t,i),h=t,w;!o.next().done;h+=o.value.length)if(!o.lineBreak)for(;w=e.exec(o.value);)n(h+w.index,h+w.index+w[0].length,w)}function Lr(r,e){let t=r.visibleRanges;if(t.length==1&&t[0].from==r.viewport.from&&t[0].to==r.viewport.to)return t;let i=[];for(let{from:n,to:o}of t)n=Math.max(r.state.doc.lineAt(n).from,n-e),o=Math.min(r.state.doc.lineAt(o).to,o+e),i.length&&i[i.length-1].to>=n?i[i.length-1].to=o:i.push({from:n,to:o});return i}class Un{constructor(e){let{regexp:t,decoration:i,boundary:n,maxLength:o=1e3}=e;if(!t.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");this.regexp=t,this.getDeco=typeof i=="function"?i:()=>i,this.boundary=n,this.maxLength=o}createDeco(e){let t=new G.RangeSetBuilder;for(let{from:i,to:n}of Lr(e,this.maxLength))Zn(e.state.doc,this.regexp,i,n,(o,h,w)=>t.add(o,h,this.getDeco(w,e,o)));return t.finish()}updateDeco(e,t){let i=1e9,n=-1;return e.docChanged&&e.changes.iterChanges((o,h,w,W)=>{W>e.view.viewport.from&&w<e.view.viewport.to&&(i=Math.min(w,i),n=Math.max(W,n))}),e.viewportChanged||n-i>1e3?this.createDeco(e.view):n>-1?this.updateRange(e.view,t.map(e.changes),i,n):t}updateRange(e,t,i,n){for(let o of e.visibleRanges){let h=Math.max(o.from,i),w=Math.min(o.to,n);if(w>h){let W=e.state.doc.lineAt(h),oe=W.to<w?e.state.doc.lineAt(w):W,be=Math.max(o.from,W.from),Pe=Math.min(o.to,oe.to);if(this.boundary){for(;h>W.from;h--)if(this.boundary.test(W.text[h-1-W.from])){be=h;break}for(;w<oe.to;w++)if(this.boundary.test(oe.text[w-oe.from])){Pe=w;break}}let it=[],tt;if(W==oe)for(this.regexp.lastIndex=be-W.from;(tt=this.regexp.exec(W.text))&&tt.index<Pe-W.from;){let st=tt.index+W.from;it.push(this.getDeco(tt,e,st).range(st,st+tt[0].length))}else Zn(e.state.doc,this.regexp,be,Pe,(st,mt,At)=>it.push(this.getDeco(At,e,st).range(st,mt)));t=t.update({filterFrom:be,filterTo:Pe,filter:(st,mt)=>st<be||mt>Pe,add:it})}}return t}}const rn=/x/.unicode!=null?"gu":"g",Br=new RegExp(`[\0-\b
-\x7F-\x9F\xAD\u061C\u200B\u200E\u200F\u2028\u2029\u202D\u202E\uFEFF\uFFF9-\uFFFC]`,rn),Rr={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let sn=null;function Ir(){var r;if(sn==null&&typeof document!="undefined"&&document.body){let e=document.body.style;sn=((r=e.tabSize)!==null&&r!==void 0?r:e.MozTabSize)!=null}return sn||!1}const Vi=g.Facet.define({combine(r){let e=g.combineConfig(r,{render:null,specialChars:Br,addSpecialChars:null});return(e.replaceTabs=!Ir())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,rn)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,rn)),e}});function Nr(r={}){return[Vi.of(r),Fr()]}let Kn=null;function Fr(){return Kn||(Kn=Se.fromClass(class{constructor(r){this.view=r,this.decorations=E.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(r.state.facet(Vi)),this.decorations=this.decorator.createDeco(r)}makeDecorator(r){return new Un({regexp:r.specialChars,decoration:(e,t,i)=>{let{doc:n}=t.state,o=se.codePointAt(e[0],0);if(o==9){let h=n.lineAt(i),w=t.state.tabSize,W=se.countColumn(h.text,w,i-h.from);return E.replace({widget:new Wr((w-W%w)*this.view.defaultCharacterWidth)})}return this.decorationCache[o]||(this.decorationCache[o]=E.replace({widget:new Hr(r,o)}))},boundary:r.replaceTabs?void 0:/[^]/})}update(r){let e=r.state.facet(Vi);r.startState.facet(Vi)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(r.view)):this.decorations=this.decorator.updateDeco(r,this.decorations)}},{decorations:r=>r.decorations}))}const jr="\u2022";function Vr(r){return r>=32?jr:r==10?"\u2424":String.fromCharCode(9216+r)}class Hr extends b{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(e){let t=Vr(this.code),i=e.state.phrase("Control character")+" "+(Rr[this.code]||"0x"+this.code.toString(16)),n=this.options.render&&this.options.render(this.code,i,t);if(n)return n;let o=document.createElement("span");return o.textContent=t,o.title=i,o.setAttribute("aria-label",i),o.className="cm-specialChar",o}ignoreEvent(){return!1}}class Wr extends b{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const Gn=Se.fromClass(class{constructor(){this.height=1e3,this.attrs={style:"padding-bottom: 1000px"}}update(r){let e=r.view.viewState.editorHeight-r.view.defaultLineHeight;e!=this.height&&(this.height=e,this.attrs={style:`padding-bottom: ${e}px`})}});function zr(){return[Gn,Oe.of(r=>{var e;return((e=r.plugin(Gn))===null||e===void 0?void 0:e.attrs)||null})]}function Zr(){return Kr}const Ur=E.line({class:"cm-activeLine"}),Kr=Se.fromClass(class{constructor(r){this.decorations=this.getDeco(r)}update(r){(r.docChanged||r.selectionSet)&&(this.decorations=this.getDeco(r.view))}getDeco(r){let e=-1,t=[];for(let i of r.state.selection.ranges){if(!i.empty)return E.none;let n=r.lineBlockAt(i.head);n.from>e&&(t.push(Ur.range(n.from)),e=n.from)}return E.set(t)}},{decorations:r=>r.decorations});class Gr extends b{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className="cm-placeholder",e.style.pointerEvents="none",e.appendChild(typeof this.content=="string"?document.createTextNode(this.content):this.content),typeof this.content=="string"?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function Yr(r){return Se.fromClass(class{constructor(e){this.view=e,this.placeholder=E.set([E.widget({widget:new Gr(r),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?E.none:this.placeholder}},{decorations:e=>e.decorations})}const Jr={HeightMap:_t,HeightOracle:yn,MeasuredHeights:bn,QueryType:Nt,ChangedRange:rt,computeOrder:y,moveVisually:Le};Object.defineProperty(m,"Range",{enumerable:!0,get:function(){return G.Range}}),m.BidiSpan=He,m.BlockInfo=ai,m.Decoration=E,m.EditorView=Wt,m.MatchDecorator=Un,m.PluginField=Ut,m.PluginFieldProvider=si,m.ViewPlugin=Se,m.ViewUpdate=at,m.WidgetType=b,m.__test=Jr,m.drawSelection=Ar,m.dropCursor=Or,m.highlightActiveLine=Zr,m.highlightSpecialChars=Nr,m.keymap=Ln,m.logException=Ht,m.placeholder=Yr,m.runScopeHandlers=wr,m.scrollPastEnd=zr},87897:function(We,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});const T=1024;let g=0;class H{constructor(v,M){this.from=v,this.to=M}}class G{constructor(v={}){this.id=g++,this.perNode=!!v.perNode,this.deserialize=v.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(v){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof v!="function"&&(v=ue.match(v)),M=>{let P=v(M);return P===void 0?null:[this,P]}}}G.closedBy=new G({deserialize:me=>me.split(" ")}),G.openedBy=new G({deserialize:me=>me.split(" ")}),G.group=new G({deserialize:me=>me.split(" ")}),G.contextHash=new G({perNode:!0}),G.lookAhead=new G({perNode:!0}),G.mounted=new G({perNode:!0});class se{constructor(v,M,P){this.tree=v,this.overlay=M,this.parser=P}}const F=Object.create(null);class ue{constructor(v,M,P,I=0){this.name=v,this.props=M,this.id=P,this.flags=I}static define(v){let M=v.props&&v.props.length?Object.create(null):F,P=(v.top?1:0)|(v.skipped?2:0)|(v.error?4:0)|(v.name==null?8:0),I=new ue(v.name||"",M,v.id,P);if(v.props){for(let ie of v.props)if(Array.isArray(ie)||(ie=ie(I)),ie){if(ie[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");M[ie[0].id]=ie[1]}}return I}prop(v){return this.props[v.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(v){if(typeof v=="string"){if(this.name==v)return!0;let M=this.prop(G.group);return M?M.indexOf(v)>-1:!1}return this.id==v}static match(v){let M=Object.create(null);for(let P in v)for(let I of P.split(" "))M[I]=v[P];return P=>{for(let I=P.prop(G.group),ie=-1;ie<(I?I.length:0);ie++){let fe=M[ie<0?P.name:I[ie]];if(fe)return fe}}}}ue.none=new ue("",Object.create(null),0,8);class pe{constructor(v){this.types=v;for(let M=0;M<v.length;M++)if(v[M].id!=M)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...v){let M=[];for(let P of this.types){let I=null;for(let ie of v){let fe=ie(P);fe&&(I||(I=Object.assign({},P.props)),I[fe[0].id]=fe[1])}M.push(I?new ue(P.name,I,P.id,P.flags):P)}return new pe(M)}}const Q=new WeakMap,$=new WeakMap;class ce{constructor(v,M,P,I,ie){if(this.type=v,this.children=M,this.positions=P,this.length=I,this.props=null,ie&&ie.length){this.props=Object.create(null);for(let[fe,Ve]of ie)this.props[typeof fe=="number"?fe:fe.id]=Ve}}toString(){let v=this.prop(G.mounted);if(v&&!v.overlay)return v.tree.toString();let M="";for(let P of this.children){let I=P.toString();I&&(M&&(M+=","),M+=I)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(M.length?"("+M+")":""):M}cursor(v,M=0){let P=v!=null&&Q.get(this)||this.topNode,I=new D(P);return v!=null&&(I.moveTo(v,M),Q.set(this,I._tree)),I}fullCursor(){return new D(this.topNode,1)}get topNode(){return new ve(this,0,0,null)}resolve(v,M=0){let P=xe(Q.get(this)||this.topNode,v,M,!1);return Q.set(this,P),P}resolveInner(v,M=0){let P=xe($.get(this)||this.topNode,v,M,!0);return $.set(this,P),P}iterate(v){let{enter:M,leave:P,from:I=0,to:ie=this.length}=v;for(let fe=this.cursor(),Ve=()=>fe.node;;){let he=!1;if(fe.from<=ie&&fe.to>=I&&(fe.type.isAnonymous||M(fe.type,fe.from,fe.to,Ve)!==!1)){if(fe.firstChild())continue;fe.type.isAnonymous||(he=!0)}for(;he&&P&&P(fe.type,fe.from,fe.to,Ve),he=fe.type.isAnonymous,!fe.nextSibling();){if(!fe.parent())return;he=!0}}}prop(v){return v.perNode?this.props?this.props[v.id]:void 0:this.type.prop(v)}get propValues(){let v=[];if(this.props)for(let M in this.props)v.push([+M,this.props[M]]);return v}balance(v={}){return this.children.length<=8?this:c(ue.none,this.children,this.positions,0,this.children.length,0,this.length,(M,P,I)=>new ce(this.type,M,P,I,this.propValues),v.makeTree||((M,P,I)=>new ce(ue.none,M,P,I)))}static build(v){return re(v)}}ce.empty=new ce(ue.none,[],[],0);class ae{constructor(v,M){this.buffer=v,this.index=M}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new ae(this.buffer,this.index)}}class J{constructor(v,M,P){this.buffer=v,this.length=M,this.set=P}get type(){return ue.none}toString(){let v=[];for(let M=0;M<this.buffer.length;)v.push(this.childString(M)),M=this.buffer[M+3];return v.join(",")}childString(v){let M=this.buffer[v],P=this.buffer[v+3],I=this.set.types[M],ie=I.name;if(/\W/.test(ie)&&!I.isError&&(ie=JSON.stringify(ie)),v+=4,P==v)return ie;let fe=[];for(;v<P;)fe.push(this.childString(v)),v=this.buffer[v+3];return ie+"("+fe.join(",")+")"}findChild(v,M,P,I,ie){let{buffer:fe}=this,Ve=-1;for(let he=v;he!=M&&!(Y(ie,I,fe[he+1],fe[he+2])&&(Ve=he,P>0));he=fe[he+3]);return Ve}slice(v,M,P,I){let ie=this.buffer,fe=new Uint16Array(M-v);for(let Ve=v,he=0;Ve<M;)fe[he++]=ie[Ve++],fe[he++]=ie[Ve++]-P,fe[he++]=ie[Ve++]-P,fe[he++]=ie[Ve++]-v;return new J(fe,I-P,this.set)}}function Y(me,v,M,P){switch(me){case-2:return M<v;case-1:return P>=v&&M<v;case 0:return M<v&&P>v;case 1:return M<=v&&P>v;case 2:return P>v;case 4:return!0}}function Fe(me,v){let M=me.childBefore(v);for(;M;){let P=M.lastChild;if(!P||P.to!=M.to)break;P.type.isError&&P.from==P.to?(me=M,M=P.prevSibling):M=P}return me}function xe(me,v,M,P){for(var I;me.from==me.to||(M<1?me.from>=v:me.from>v)||(M>-1?me.to<=v:me.to<v);){let ie=!P&&me instanceof ve&&me.index<0?null:me.parent;if(!ie)return me;me=ie}if(P)for(let ie=me,fe=ie.parent;fe;ie=fe,fe=ie.parent)ie instanceof ve&&ie.index<0&&((I=fe.enter(v,M,!0))===null||I===void 0?void 0:I.from)!=ie.from&&(me=fe);for(;;){let ie=me.enter(v,M,P);if(!ie)return me;me=ie}}class ve{constructor(v,M,P,I){this.node=v,this._from=M,this.index=P,this._parent=I}get type(){return this.node.type}get name(){return this.node.type.name}get from(){return this._from}get to(){return this._from+this.node.length}nextChild(v,M,P,I,ie=0){for(let fe=this;;){for(let{children:Ve,positions:he}=fe.node,de=M>0?Ve.length:-1;v!=de;v+=M){let Ee=Ve[v],K=he[v]+fe._from;if(Y(I,P,K,K+Ee.length)){if(Ee instanceof J){if(ie&2)continue;let A=Ee.findChild(0,Ee.buffer.length,M,P-K,I);if(A>-1)return new q(new Be(fe,Ee,v,K),null,A)}else if(ie&1||!Ee.type.isAnonymous||R(Ee)){let A;if(!(ie&1)&&Ee.props&&(A=Ee.prop(G.mounted))&&!A.overlay)return new ve(A.tree,K,v,fe);let z=new ve(Ee,K,v,fe);return ie&1||!z.type.isAnonymous?z:z.nextChild(M<0?Ee.children.length-1:0,M,P,I)}}}if(ie&1||!fe.type.isAnonymous||(fe.index>=0?v=fe.index+M:v=M<0?-1:fe._parent.node.children.length,fe=fe._parent,!fe))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,0,4)}childAfter(v){return this.nextChild(0,1,v,2)}childBefore(v){return this.nextChild(this.node.children.length-1,-1,v,-2)}enter(v,M,P=!0,I=!0){let ie;if(P&&(ie=this.node.prop(G.mounted))&&ie.overlay){let fe=v-this.from;for(let{from:Ve,to:he}of ie.overlay)if((M>0?Ve<=fe:Ve<fe)&&(M<0?he>=fe:he>fe))return new ve(ie.tree,ie.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,v,M,I?0:2)}nextSignificantParent(){let v=this;for(;v.type.isAnonymous&&v._parent;)v=v._parent;return v}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get cursor(){return new D(this)}get tree(){return this.node}toTree(){return this.node}resolve(v,M=0){return xe(this,v,M,!1)}resolveInner(v,M=0){return xe(this,v,M,!0)}enterUnfinishedNodesBefore(v){return Fe(this,v)}getChild(v,M=null,P=null){let I=Me(this,v,M,P);return I.length?I[0]:null}getChildren(v,M=null,P=null){return Me(this,v,M,P)}toString(){return this.node.toString()}}function Me(me,v,M,P){let I=me.cursor,ie=[];if(!I.firstChild())return ie;if(M!=null){for(;!I.type.is(M);)if(!I.nextSibling())return ie}for(;;){if(P!=null&&I.type.is(P))return ie;if(I.type.is(v)&&ie.push(I.node),!I.nextSibling())return P==null?ie:[]}}class Be{constructor(v,M,P,I){this.parent=v,this.buffer=M,this.index=P,this.start=I}}class q{constructor(v,M,P){this.context=v,this._parent=M,this.index=P,this.type=v.buffer.set.types[v.buffer.buffer[P]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(v,M,P){let{buffer:I}=this.context,ie=I.findChild(this.index+4,I.buffer[this.index+3],v,M-this.context.start,P);return ie<0?null:new q(this.context,this,ie)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(v){return this.child(1,v,2)}childBefore(v){return this.child(-1,v,-2)}enter(v,M,P,I=!0){if(!I)return null;let{buffer:ie}=this.context,fe=ie.findChild(this.index+4,ie.buffer[this.index+3],M>0?1:-1,v-this.context.start,M);return fe<0?null:new q(this.context,this,fe)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(v){return this._parent?null:this.context.parent.nextChild(this.context.index+v,v,0,4)}get nextSibling(){let{buffer:v}=this.context,M=v.buffer[this.index+3];return M<(this._parent?v.buffer[this._parent.index+3]:v.buffer.length)?new q(this.context,this._parent,M):this.externalSibling(1)}get prevSibling(){let{buffer:v}=this.context,M=this._parent?this._parent.index+4:0;return this.index==M?this.externalSibling(-1):new q(this.context,this._parent,v.findChild(M,this.index,-1,0,4))}get cursor(){return new D(this)}get tree(){return null}toTree(){let v=[],M=[],{buffer:P}=this.context,I=this.index+4,ie=P.buffer[this.index+3];if(ie>I){let fe=P.buffer[this.index+1],Ve=P.buffer[this.index+2];v.push(P.slice(I,ie,fe,Ve)),M.push(0)}return new ce(this.type,v,M,this.to-this.from)}resolve(v,M=0){return xe(this,v,M,!1)}resolveInner(v,M=0){return xe(this,v,M,!0)}enterUnfinishedNodesBefore(v){return Fe(this,v)}toString(){return this.context.buffer.childString(this.index)}getChild(v,M=null,P=null){let I=Me(this,v,M,P);return I.length?I[0]:null}getChildren(v,M=null,P=null){return Me(this,v,M,P)}}class D{constructor(v,M=0){if(this.mode=M,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,v instanceof ve)this.yieldNode(v);else{this._tree=v.context.parent,this.buffer=v.context;for(let P=v._parent;P;P=P._parent)this.stack.unshift(P.index);this.bufferNode=v,this.yieldBuf(v.index)}}get name(){return this.type.name}yieldNode(v){return v?(this._tree=v,this.type=v.type,this.from=v.from,this.to=v.to,!0):!1}yieldBuf(v,M){this.index=v;let{start:P,buffer:I}=this.buffer;return this.type=M||I.set.types[I.buffer[v]],this.from=P+I.buffer[v+1],this.to=P+I.buffer[v+2],!0}yield(v){return v?v instanceof ve?(this.buffer=null,this.yieldNode(v)):(this.buffer=v.context,this.yieldBuf(v.index,v.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(v,M,P){if(!this.buffer)return this.yield(this._tree.nextChild(v<0?this._tree.node.children.length-1:0,v,M,P,this.mode));let{buffer:I}=this.buffer,ie=I.findChild(this.index+4,I.buffer[this.index+3],v,M-this.buffer.start,P);return ie<0?!1:(this.stack.push(this.index),this.yieldBuf(ie))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(v){return this.enterChild(1,v,2)}childBefore(v){return this.enterChild(-1,v,-2)}enter(v,M,P=!0,I=!0){return this.buffer?I?this.enterChild(1,v,M):!1:this.yield(this._tree.enter(v,M,P&&!(this.mode&1),I))}parent(){if(!this.buffer)return this.yieldNode(this.mode&1?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let v=this.mode&1?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(v)}sibling(v){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+v,v,0,4,this.mode)):!1;let{buffer:M}=this.buffer,P=this.stack.length-1;if(v<0){let I=P<0?0:this.stack[P]+4;if(this.index!=I)return this.yieldBuf(M.findChild(I,this.index,-1,0,4))}else{let I=M.buffer[this.index+3];if(I<(P<0?M.buffer.length:M.buffer[this.stack[P]+3]))return this.yieldBuf(I)}return P<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+v,v,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(v){let M,P,{buffer:I}=this;if(I){if(v>0){if(this.index<I.buffer.buffer.length)return!1}else for(let ie=0;ie<this.index;ie++)if(I.buffer.buffer[ie+3]<this.index)return!1;({index:M,parent:P}=I)}else({index:M,_parent:P}=this._tree);for(;P;{index:M,_parent:P}=P)if(M>-1)for(let ie=M+v,fe=v<0?-1:P.node.children.length;ie!=fe;ie+=v){let Ve=P.node.children[ie];if(this.mode&1||Ve instanceof J||!Ve.type.isAnonymous||R(Ve))return!1}return!0}move(v,M){if(M&&this.enterChild(v,0,4))return!0;for(;;){if(this.sibling(v))return!0;if(this.atLastNode(v)||!this.parent())return!1}}next(v=!0){return this.move(1,v)}prev(v=!0){return this.move(-1,v)}moveTo(v,M=0){for(;(this.from==this.to||(M<1?this.from>=v:this.from>v)||(M>-1?this.to<=v:this.to<v))&&this.parent(););for(;this.enterChild(1,v,M););return this}get node(){if(!this.buffer)return this._tree;let v=this.bufferNode,M=null,P=0;if(v&&v.context==this.buffer)e:for(let I=this.index,ie=this.stack.length;ie>=0;){for(let fe=v;fe;fe=fe._parent)if(fe.index==I){if(I==this.index)return fe;M=fe,P=ie+1;break e}I=this.stack[--ie]}for(let I=P;I<this.stack.length;I++)M=new q(this.buffer,M,this.stack[I]);return this.bufferNode=new q(this.buffer,M,this.index)}get tree(){return this.buffer?null:this._tree.node}}function R(me){return me.children.some(v=>v instanceof J||!v.type.isAnonymous||R(v))}function re(me){var v;let{buffer:M,nodeSet:P,maxBufferLength:I=T,reused:ie=[],minRepeatType:fe=P.types.length}=me,Ve=Array.isArray(M)?new ae(M,M.length):M,he=P.types,de=0,Ee=0;function K(b,E,L,V,ge){let{id:Ne,start:Ue,end:Ke,size:_e}=Ve,a=Ee;for(;_e<0;)if(Ve.next(),_e==-1){let we=ie[Ne];L.push(we),V.push(Ue-b);return}else if(_e==-3){de=Ne;return}else if(_e==-4){Ee=Ne;return}else throw new RangeError(`Unrecognized record size: ${_e}`);let k=he[Ne],N,X,ne=Ue-b;if(Ke-Ue<=I&&(X=De(Ve.pos-E,ge))){let we=new Uint16Array(X.size-X.skip),$e=Ve.pos-X.size,Ge=we.length;for(;Ve.pos>$e;)Ge=s(X.start,we,Ge);N=new J(we,Ke-X.start,P),ne=X.start-b}else{let we=Ve.pos-_e;Ve.next();let $e=[],Ge=[],et=Ne>=fe?Ne:-1,ht=0,gt=Ke;for(;Ve.pos>we;)et>=0&&Ve.id==et&&Ve.size>=0?(Ve.end<=gt-I&&(z($e,Ge,Ue,ht,Ve.end,gt,et,a),ht=$e.length,gt=Ve.end),Ve.next()):K(Ue,we,$e,Ge,et);if(et>=0&&ht>0&&ht<$e.length&&z($e,Ge,Ue,ht,Ue,gt,et,a),$e.reverse(),Ge.reverse(),et>-1&&ht>0){let St=A(k);N=c(k,$e,Ge,0,$e.length,0,Ke-Ue,St,St)}else N=ye(k,$e,Ge,Ke-Ue,a-Ke)}L.push(N),V.push(ne)}function A(b){return(E,L,V)=>{let ge=0,Ne=E.length-1,Ue,Ke;if(Ne>=0&&(Ue=E[Ne])instanceof ce){if(!Ne&&Ue.type==b&&Ue.length==V)return Ue;(Ke=Ue.prop(G.lookAhead))&&(ge=L[Ne]+Ue.length+Ke)}return ye(b,E,L,V,ge)}}function z(b,E,L,V,ge,Ne,Ue,Ke){let _e=[],a=[];for(;b.length>V;)_e.push(b.pop()),a.push(E.pop()+L-ge);b.push(ye(P.types[Ue],_e,a,Ne-ge,Ke-Ne)),E.push(ge-L)}function ye(b,E,L,V,ge=0,Ne){if(de){let Ue=[G.contextHash,de];Ne=Ne?[Ue].concat(Ne):[Ue]}if(ge>25){let Ue=[G.lookAhead,ge];Ne=Ne?[Ue].concat(Ne):[Ue]}return new ce(b,E,L,V,Ne)}function De(b,E){let L=Ve.fork(),V=0,ge=0,Ne=0,Ue=L.end-I,Ke={size:0,start:0,skip:0};e:for(let _e=L.pos-b;L.pos>_e;){let a=L.size;if(L.id==E&&a>=0){Ke.size=V,Ke.start=ge,Ke.skip=Ne,Ne+=4,V+=4,L.next();continue}let k=L.pos-a;if(a<0||k<_e||L.start<Ue)break;let N=L.id>=fe?4:0,X=L.start;for(L.next();L.pos>k;){if(L.size<0)if(L.size==-3)N+=4;else break e;else L.id>=fe&&(N+=4);L.next()}ge=X,V+=a,Ne+=N}return(E<0||V==b)&&(Ke.size=V,Ke.start=ge,Ke.skip=Ne),Ke.size>4?Ke:void 0}function s(b,E,L){let{id:V,start:ge,end:Ne,size:Ue}=Ve;if(Ve.next(),Ue>=0&&V<fe){let Ke=L;if(Ue>4){let _e=Ve.pos-(Ue-4);for(;Ve.pos>_e;)L=s(b,E,L)}E[--L]=Ke,E[--L]=Ne-b,E[--L]=ge-b,E[--L]=V}else Ue==-3?de=V:Ue==-4&&(Ee=V);return L}let C=[],l=[];for(;Ve.pos>0;)K(me.start||0,me.bufferStart||0,C,l,-1);let d=(v=me.length)!==null&&v!==void 0?v:C.length?l[0]+C[0].length:0;return new ce(he[me.topID],C.reverse(),l.reverse(),d)}const Ae=new WeakMap;function j(me,v){if(!me.isAnonymous||v instanceof J||v.type!=me)return 1;let M=Ae.get(v);if(M==null){M=1;for(let P of v.children){if(P.type!=me||!(P instanceof ce)){M=1;break}M+=j(me,P)}Ae.set(v,M)}return M}function c(me,v,M,P,I,ie,fe,Ve,he){let de=0;for(let ye=P;ye<I;ye++)de+=j(me,v[ye]);let Ee=Math.ceil(de*1.5/8),K=[],A=[];function z(ye,De,s,C,l){for(let d=s;d<C;){let b=d,E=De[d],L=j(me,ye[d]);for(d++;d<C;d++){let V=j(me,ye[d]);if(L+V>=Ee)break;L+=V}if(d==b+1){if(L>Ee){let V=ye[b];z(V.children,V.positions,0,V.children.length,De[b]+l);continue}K.push(ye[b])}else{let V=De[d-1]+ye[d-1].length-E;K.push(c(me,ye,De,b,d,E,V,null,he))}A.push(E+l-ie)}}return z(v,M,P,I,0),(Ve||he)(K,A,fe)}class f{constructor(v,M,P,I,ie=!1,fe=!1){this.from=v,this.to=M,this.tree=P,this.offset=I,this.open=(ie?1:0)|(fe?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(v,M=[],P=!1){let I=[new f(0,v.length,v,0,!1,P)];for(let ie of M)ie.to>v.length&&I.push(ie);return I}static applyChanges(v,M,P=128){if(!M.length)return v;let I=[],ie=1,fe=v.length?v[0]:null;for(let Ve=0,he=0,de=0;;Ve++){let Ee=Ve<M.length?M[Ve]:null,K=Ee?Ee.fromA:1e9;if(K-he>=P)for(;fe&&fe.from<K;){let A=fe;if(he>=A.from||K<=A.to||de){let z=Math.max(A.from,he)-de,ye=Math.min(A.to,K)-de;A=z>=ye?null:new f(z,ye,A.tree,A.offset+de,Ve>0,!!Ee)}if(A&&I.push(A),fe.to>K)break;fe=ie<v.length?v[ie++]:null}if(!Ee)break;he=Ee.toA,de=Ee.toA-Ee.toB}return I}}class p{startParse(v,M,P){return typeof v=="string"&&(v=new x(v)),P=P?P.length?P.map(I=>new H(I.from,I.to)):[new H(0,0)]:[new H(0,v.length)],this.createParse(v,M||[],P)}parse(v,M,P){let I=this.startParse(v,M,P);for(;;){let ie=I.advance();if(ie)return ie}}}class x{constructor(v){this.string=v}get length(){return this.string.length}chunk(v){return this.string.slice(v)}get lineChunks(){return!1}read(v,M){return this.string.slice(v,M)}}function u(me){return(v,M,P,I)=>new O(v,me,M,P,I)}class S{constructor(v,M,P,I,ie){this.parser=v,this.parse=M,this.overlay=P,this.target=I,this.ranges=ie}}class B{constructor(v,M,P,I,ie,fe,Ve){this.parser=v,this.predicate=M,this.mounts=P,this.index=I,this.start=ie,this.target=fe,this.prev=Ve,this.depth=0,this.ranges=[]}}const _=new G({perNode:!0});class O{constructor(v,M,P,I,ie){this.nest=M,this.input=P,this.fragments=I,this.ranges=ie,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=v}advance(){if(this.baseParse){let P=this.baseParse.advance();if(!P)return null;if(this.baseParse=null,this.baseTree=P,this.startInner(),this.stoppedAt!=null)for(let I of this.inner)I.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let P=this.baseTree;return this.stoppedAt!=null&&(P=new ce(P.type,P.children,P.positions,P.length,P.propValues.concat([[_,this.stoppedAt]]))),P}let v=this.inner[this.innerDone],M=v.parse.advance();if(M){this.innerDone++;let P=Object.assign(Object.create(null),v.target.props);P[G.mounted.id]=new se(M,v.overlay,v.parser),v.target.props=P}return null}get parsedPos(){if(this.baseParse)return 0;let v=this.input.length;for(let M=this.innerDone;M<this.inner.length;M++)this.inner[M].ranges[0].from<v&&(v=Math.min(v,this.inner[M].parse.parsedPos));return v}stopAt(v){if(this.stoppedAt=v,this.baseParse)this.baseParse.stopAt(v);else for(let M=this.innerDone;M<this.inner.length;M++)this.inner[M].parse.stopAt(v)}startInner(){let v=new Qe(this.fragments),M=null,P=null,I=new D(new ve(this.baseTree,this.ranges[0].from,0,null),1);e:for(let ie,fe;this.stoppedAt==null||I.from<this.stoppedAt;){let Ve=!0,he;if(v.hasNode(I)){if(M){let de=M.mounts.find(Ee=>Ee.frag.from<=I.from&&Ee.frag.to>=I.to&&Ee.mount.overlay);if(de)for(let Ee of de.mount.overlay){let K=Ee.from+de.pos,A=Ee.to+de.pos;K>=I.from&&A<=I.to&&!M.ranges.some(z=>z.from<A&&z.to>K)&&M.ranges.push({from:K,to:A})}}Ve=!1}else if(P&&(fe=U(P.ranges,I.from,I.to)))Ve=fe!=2;else if(!I.type.isAnonymous&&I.from<I.to&&(ie=this.nest(I,this.input))){I.tree||je(I);let de=v.findMounts(I.from,ie.parser);if(typeof ie.overlay=="function")M=new B(ie.parser,ie.overlay,de,this.inner.length,I.from,I.tree,M);else{let Ee=ot(this.ranges,ie.overlay||[new H(I.from,I.to)]);Ee.length&&this.inner.push(new S(ie.parser,ie.parser.startParse(this.input,ut(de,Ee),Ee),ie.overlay?ie.overlay.map(K=>new H(K.from-I.from,K.to-I.from)):null,I.tree,Ee)),ie.overlay?Ee.length&&(P={ranges:Ee,depth:0,prev:P}):Ve=!1}}else M&&(he=M.predicate(I))&&(he===!0&&(he=new H(I.from,I.to)),he.from<he.to&&M.ranges.push(he));if(Ve&&I.firstChild())M&&M.depth++,P&&P.depth++;else for(;!I.nextSibling();){if(!I.parent())break e;if(M&&!--M.depth){let de=ot(this.ranges,M.ranges);de.length&&this.inner.splice(M.index,0,new S(M.parser,M.parser.startParse(this.input,ut(M.mounts,de),de),M.ranges.map(Ee=>new H(Ee.from-M.start,Ee.to-M.start)),M.target,de)),M=M.prev}P&&!--P.depth&&(P=P.prev)}}}}function U(me,v,M){for(let P of me){if(P.from>=M)break;if(P.to>v)return P.from<=v&&P.to>=M?2:1}return 0}function Te(me,v,M,P,I,ie){if(v<M){let fe=me.buffer[v+1],Ve=me.buffer[M-2];P.push(me.slice(v,M,fe,Ve)),I.push(fe-ie)}}function je(me){let{node:v}=me,M=0;do me.parent(),M++;while(!me.tree);let P=0,I=me.tree,ie=0;for(;ie=I.positions[P]+me.from,!(ie<=v.from&&ie+I.children[P].length>=v.to);P++);let fe=I.children[P],Ve=fe.buffer;function he(de,Ee,K,A,z){let ye=de;for(;Ve[ye+2]+ie<=v.from;)ye=Ve[ye+3];let De=[],s=[];Te(fe,de,ye,De,s,A);let C=Ve[ye+1],l=Ve[ye+2],d=C+ie==v.from&&l+ie==v.to&&Ve[ye]==v.type.id;return De.push(d?v.toTree():he(ye+4,Ve[ye+3],fe.set.types[Ve[ye]],C,l-C)),s.push(C-A),Te(fe,Ve[ye+3],Ee,De,s,A),new ce(K,De,s,z)}I.children[P]=he(0,Ve.length,ue.none,0,fe.length);for(let de=0;de<=M;de++)me.childAfter(v.from)}class le{constructor(v,M){this.offset=M,this.done=!1,this.cursor=v.fullCursor()}moveTo(v){let{cursor:M}=this,P=v-this.offset;for(;!this.done&&M.from<P;)M.to>=v&&M.enter(P,1,!1,!1)||M.next(!1)||(this.done=!0)}hasNode(v){if(this.moveTo(v.from),!this.done&&this.cursor.from+this.offset==v.from&&this.cursor.tree)for(let M=this.cursor.tree;;){if(M==v.tree)return!0;if(M.children.length&&M.positions[0]==0&&M.children[0]instanceof ce)M=M.children[0];else break}return!1}}class Qe{constructor(v){var M;if(this.fragments=v,this.curTo=0,this.fragI=0,v.length){let P=this.curFrag=v[0];this.curTo=(M=P.tree.prop(_))!==null&&M!==void 0?M:P.to,this.inner=new le(P.tree,-P.offset)}else this.curFrag=this.inner=null}hasNode(v){for(;this.curFrag&&v.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=v.from&&this.curTo>=v.to&&this.inner.hasNode(v)}nextFrag(){var v;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let M=this.curFrag=this.fragments[this.fragI];this.curTo=(v=M.tree.prop(_))!==null&&v!==void 0?v:M.to,this.inner=new le(M.tree,-M.offset)}}findMounts(v,M){var P;let I=[];if(this.inner){this.inner.cursor.moveTo(v,1);for(let ie=this.inner.cursor.node;ie;ie=ie.parent){let fe=(P=ie.tree)===null||P===void 0?void 0:P.prop(G.mounted);if(fe&&fe.parser==M)for(let Ve=this.fragI;Ve<this.fragments.length;Ve++){let he=this.fragments[Ve];if(he.from>=ie.to)break;he.tree==this.curFrag.tree&&I.push({frag:he,pos:ie.from-he.offset,mount:fe})}}}return I}}function ot(me,v){let M=null,P=v;for(let I=1,ie=0;I<me.length;I++){let fe=me[I-1].to,Ve=me[I].from;for(;ie<P.length;ie++){let he=P[ie];if(he.from>=Ve)break;he.to<=fe||(M||(P=M=v.slice()),he.from<fe?(M[ie]=new H(he.from,fe),he.to>Ve&&M.splice(ie+1,0,new H(Ve,he.to))):he.to>Ve?M[ie--]=new H(Ve,he.to):M.splice(ie--,1))}}return P}function nt(me,v,M,P){let I=0,ie=0,fe=!1,Ve=!1,he=-1e9,de=[];for(;;){let Ee=I==me.length?1e9:fe?me[I].to:me[I].from,K=ie==v.length?1e9:Ve?v[ie].to:v[ie].from;if(fe!=Ve){let A=Math.max(he,M),z=Math.min(Ee,K,P);A<z&&de.push(new H(A,z))}if(he=Math.min(Ee,K),he==1e9)break;Ee==he&&(fe?(fe=!1,I++):fe=!0),K==he&&(Ve?(Ve=!1,ie++):Ve=!0)}return de}function ut(me,v){let M=[];for(let{pos:P,mount:I,frag:ie}of me){let fe=P+(I.overlay?I.overlay[0].from:0),Ve=fe+I.tree.length,he=Math.max(ie.from,fe),de=Math.min(ie.to,Ve);if(I.overlay){let Ee=I.overlay.map(A=>new H(A.from+P,A.to+P)),K=nt(v,Ee,he,de);for(let A=0,z=he;;A++){let ye=A==K.length,De=ye?de:K[A].from;if(De>z&&M.push(new f(z,De,I.tree,-fe,ie.from>=z,ie.to<=De)),ye)break;z=K[A].to}}else M.push(new f(he,de,I.tree,-fe,ie.from>=fe,ie.to<=Ve))}return M}m.DefaultBufferLength=T,m.MountedTree=se,m.NodeProp=G,m.NodeSet=pe,m.NodeType=ue,m.Parser=p,m.Tree=ce,m.TreeBuffer=J,m.TreeCursor=D,m.TreeFragment=f,m.parseMixed=u},68513:function(We){"use strict";function m(){var g=arguments[0];typeof g=="string"&&(g=document.createElement(g));var H=1,G=arguments[1];if(G&&typeof G=="object"&&G.nodeType==null&&!Array.isArray(G)){for(var se in G)if(Object.prototype.hasOwnProperty.call(G,se)){var F=G[se];typeof F=="string"?g.setAttribute(se,F):F!=null&&(g[se]=F)}H++}for(;H<arguments.length;H++)T(g,arguments[H]);return g}function T(g,H){if(typeof H=="string")g.appendChild(document.createTextNode(H));else if(H!=null)if(H.nodeType!=null)g.appendChild(H);else if(Array.isArray(H))for(var G=0;G<H.length;G++)T(g,H[G]);else throw new RangeError("Unsupported child node: "+H)}We.exports=m},17223:function(We,m){var T="\u037C",g=typeof Symbol=="undefined"?"__"+T:Symbol.for(T),H=typeof Symbol=="undefined"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),G=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:{},se=m.StyleModule=function(Q,$){this.rules=[];var ce=$||{},ae=ce.finish;function J(xe){return/^@/.test(xe)?[xe]:xe.split(/,\s*/)}function Y(xe,ve,Me,Be){var q=[],D=/^@(\w+)\b/.exec(xe[0]),R=D&&D[1]=="keyframes";if(D&&ve==null)return Me.push(xe[0]+";");for(var re in ve){var Ae=ve[re];if(/&/.test(re))Y(re.split(/,\s*/).map(function(j){return xe.map(function(c){return j.replace(/&/,c)})}).reduce(function(j,c){return j.concat(c)}),Ae,Me);else if(Ae&&typeof Ae=="object"){if(!D)throw new RangeError("The value of a property ("+re+") should be a primitive value.");Y(J(re),Ae,q,R)}else Ae!=null&&q.push(re.replace(/_.*/,"").replace(/[A-Z]/g,function(j){return"-"+j.toLowerCase()})+": "+Ae+";")}(q.length||R)&&Me.push((ae&&!D&&!Be?xe.map(ae):xe).join(", ")+" {"+q.join(" ")+"}")}for(var Fe in Q)Y(J(Fe),Q[Fe],this.rules)};se.prototype.getRules=function(){return this.rules.join(`
`)},se.newName=function(){var Q=G[g]||1;return G[g]=Q+1,T+Q.toString(36)},se.mount=function(Q,$){(Q[H]||new ue(Q)).mount(Array.isArray($)?$:[$])};var F=new Map,ue=function(Q){var $=Q.ownerDocument||Q,ce=$.defaultView;if(!Q.head&&Q.adoptedStyleSheets&&ce.CSSStyleSheet){var ae=F.get($);if(ae)return Q.adoptedStyleSheets=[ae.sheet].concat(Q.adoptedStyleSheets),Q[H]=ae;this.sheet=new ce.CSSStyleSheet,Q.adoptedStyleSheets=[this.sheet].concat(Q.adoptedStyleSheets),F.set($,this)}else{this.styleTag=$.createElement("style");var J=Q.head||Q;J.insertBefore(this.styleTag,J.firstChild)}this.modules=[],Q[H]=this};ue.prototype.mount=function(Q){for(var $=this.sheet,ce=0,ae=0,J=0;J<Q.length;J++){var Y=Q[J],Fe=this.modules.indexOf(Y);if(Fe<ae&&Fe>-1&&(this.modules.splice(Fe,1),ae--,Fe=-1),Fe==-1){if(this.modules.splice(ae++,0,Y),$)for(var xe=0;xe<Y.rules.length;xe++)$.insertRule(Y.rules[xe],ce++)}else{for(;ae<Fe;)ce+=this.modules[ae++].rules.length;ce+=Y.rules.length,ae++}}if(!$){for(var ve="",Me=0;Me<this.modules.length;Me++)ve+=this.modules[Me].getRules()+`
`;this.styleTag.textContent=ve}}},26691:function(We,m){"use strict";Object.defineProperty(m,"__esModule",{value:!0});for(var T={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},g={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},H=typeof navigator!="undefined"&&/Mac/.test(navigator.platform),G=typeof navigator!="undefined"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),se=0;se<10;se++)T[48+se]=T[96+se]=String(se);for(var se=1;se<=24;se++)T[se+111]="F"+se;for(var se=65;se<=90;se++)T[se]=String.fromCharCode(se+32),g[se]=String.fromCharCode(se);for(var F in T)g.hasOwnProperty(F)||(g[F]=T[F]);function ue(pe){var Q=H&&pe.metaKey&&pe.shiftKey&&!pe.ctrlKey&&!pe.altKey||G&&pe.shiftKey&&pe.key&&pe.key.length==1||pe.key=="Unidentified",$=!Q&&pe.key||(pe.shiftKey?g:T)[pe.keyCode]||pe.key||"Unidentified";return $=="Esc"&&($="Escape"),$=="Del"&&($="Delete"),$=="Left"&&($="ArrowLeft"),$=="Up"&&($="ArrowUp"),$=="Right"&&($="ArrowRight"),$=="Down"&&($="ArrowDown"),$}m.base=T,m.keyName=ue,m.shift=g}}]);
