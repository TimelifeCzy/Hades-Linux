"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{21383:function(L,j,r){r.r(j);var x=r(97857),u=r.n(x),C=r(5574),o=r.n(C),y=r(12121),d=r(38345),c=r(72538),B=r(48555),m=r(26713),D=r(20550),g=r(83186),T=r(63922),P=r(49748),h=r(67294),O=r(30381),I=r.n(O),M=r(80854),s=r(85893),R=[{title:"\u4E3B\u673A\u540D\u79F0",dataIndex:"hostname",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5E73\u53F0",dataIndex:"platform",ellipsis:!0,search:!1,width:"8%",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},renderText:function(l){return l===null?null:l.indexOf("Windows")!=-1?"Windows":l.replace(/^\S/,function(i){return i.toUpperCase()})}},{title:"\u6807\u7B7E",dataIndex:"tags",search:!1,render:function(l,i,f,e){var t;return(0,s.jsx)(m.Z,{size:[0,8],children:(0,s.jsx)(m.Z,{size:[0,8],children:(t=i.tags)===null||t===void 0?void 0:t.map(function(_,a){return(0,s.jsx)(D.Z,{color:"green",children:_},_)})})})},width:"10%"},{title:"\u72B6\u6001",dataIndex:"status",ellipsis:!0,width:"8%",valueEnum:{true:{text:"\u5728\u7EBF",status:"Success"},false:{text:"\u79BB\u7EBF",status:"Error"}},filters:!0,onFilter:!0,search:!1},{title:"\u5BA2\u6237\u7AEF\u6027\u80FD",search:!1,render:function(l,i,f,e){return(0,s.jsxs)(m.Z,{size:[20,24],children:[(0,s.jsxs)(m.Z,{size:[0,4],wrap:!0,children:[(0,s.jsx)(D.Z,{color:"default",children:"CPU"}),parseFloat(i.cpu).toFixed(2)+"%"]}),(0,s.jsx)("p",{}),(0,s.jsxs)(m.Z,{size:[0,4],wrap:!0,children:[(0,s.jsx)(D.Z,{color:"default",children:"MEM"}),parseFloat(i.mem).toFixed(1)+"MB"]})]})},width:"20%"},{title:"\u5730\u5740",dataIndex:"addr",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"create_at",sorter:!0,search:!1,hideInSearch:!0,renderText:function(l){var i=new Date(l*1e3);return I()(i).fromNow()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"10%",render:function(l,i,f,e){return[(0,s.jsx)("a",{href:"host/"+i.agent_id,rel:"noopener noreferrer",children:"\u8BE6\u60C5"},"view")]}}],b=function(){var l=(0,h.useState)(!1),i=o()(l,2),f=i[0],e=i[1],t=(0,h.useState)(0),_=o()(t,2),a=_[0],n=_[1],w=(0,h.useState)(0),U=o()(w,2),W=U[0],K=U[1],S=(0,M.useRequest)(P.Ek),v=S.data;(0,h.useEffect)(function(){n((v==null?void 0:v.total)||0),K((v==null?void 0:v.online)||0)},[v]);var Z=(0,h.useRef)();return(0,s.jsxs)(y._z,{children:[(0,s.jsx)("div",{children:(0,s.jsx)(B.Z,{onResize:function(p){e(p.width<596)},children:(0,s.jsxs)(d.Z.Group,{direction:f?"column":"row",children:[(0,s.jsx)(d.Z,{layout:"center",children:(0,s.jsx)(g.Z,{title:"\u5728\u7EBF\u4E3B\u673A",value:W,precision:0,prefix:(0,s.jsx)(T.Z,{color:"green"})})}),(0,s.jsx)(d.Z.Divider,{type:f?"horizontal":"vertical"}),(0,s.jsx)(d.Z,{layout:"center",children:(0,s.jsx)(g.Z,{title:"\u79BB\u7EBF\u4E3B\u673A",value:a-W,precision:0,prefix:(0,s.jsx)(T.Z,{color:"gray"})})})]})},"resize-observer")}),(0,s.jsx)("p",{}),(0,s.jsx)(c.Z,{columns:R,actionRef:Z,cardBordered:!0,request:P.Zs,editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange:function(p){console.log("value: ",p)}},rowKey:"agent_id",search:{defaultCollapsed:!1,labelWidth:"auto"},options:!1,form:{syncToUrl:function(p,H){return H==="get"?u()(u()({},p),{},{created_at:[p.startTime,p.endTime]}):p}},pagination:{pageSize:10,onChange:function(p){return console.log(p)}},dateFormatter:"string",headerTitle:"\u4E3B\u673A\u5217\u8868"})]})};j.default=b},49748:function(L,j,r){r.d(j,{Ek:function(){return B},LH:function(){return E},Nh:function(){return i},UV:function(){return I},ZN:function(){return R},Zs:function(){return D},nc:function(){return h},pi:function(){return T},sk:function(){return s}});var x=r(15009),u=r.n(x),C=r(97857),o=r.n(C),y=r(99289),d=r.n(y),c=r(80854);function B(e){return m.apply(this,arguments)}function m(){return m=d()(u()().mark(function e(t){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/grpc/conn/count",o()({method:"GET"},t||{})));case 1:case"end":return a.stop()}},e)})),m.apply(this,arguments)}function D(e,t){return g.apply(this,arguments)}function g(){return g=d()(u()().mark(function e(t,_){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/v1/grpc/conn/basic",o()({method:"GET",params:o()({},t)},_||{})));case 1:case"end":return n.stop()}},e)})),g.apply(this,arguments)}function T(e,t){return P.apply(this,arguments)}function P(){return P=d()(u()().mark(function e(t,_){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/v1/grpc/conn/stat",o()({method:"GET",params:o()({},t)},_||{})));case 1:case"end":return n.stop()}},e)})),P.apply(this,arguments)}function h(e,t){return O.apply(this,arguments)}function O(){return O=d()(u()().mark(function e(t,_){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/v1/plugin/send",o()({method:"POST",data:JSON.stringify({name:t.name,pversion:t.pversion,agent_id:t.agent_id,action:t.action}),headers:{"Content-Type":"application/json"}},_||{})));case 1:case"end":return n.stop()}},e)})),O.apply(this,arguments)}function I(e){return M.apply(this,arguments)}function M(){return M=d()(u()().mark(function e(t){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/plugin/list",o()({method:"GET"},t||{})));case 1:case"end":return a.stop()}},e)})),M.apply(this,arguments)}function s(e){return(0,c.request)("/api/v1/plugin/delete",o()({method:"GET"},e||{}))}function R(e){return b.apply(this,arguments)}function b(){return b=d()(u()().mark(function e(t){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,c.request)("/api/v1/application/dashboard",o()({method:"GET"},t||{})));case 1:case"end":return a.stop()}},e)})),b.apply(this,arguments)}function E(e,t){return l.apply(this,arguments)}function l(){return l=d()(u()().mark(function e(t,_){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)(t,o()({},_||{})));case 1:case"end":return n.stop()}},e)})),l.apply(this,arguments)}function i(e,t){return f.apply(this,arguments)}function f(){return f=d()(u()().mark(function e(t,_){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(0,c.request)("/api/v1/asset/get",o()({method:"GET",params:t},_||{})));case 1:case"end":return n.stop()}},e)})),f.apply(this,arguments)}}}]);
