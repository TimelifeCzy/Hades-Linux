"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[391],{21383:function(Z,x,s){s.r(x);var y=s(97857),u=s.n(y),R=s(5574),_=s.n(R),A=s(12121),i=s(38345),l=s(72538),I=s(48555),v=s(85402),m=s(26713),f=s(20550),T=s(83186),g=s(63922),L=s(71577),P=s(49748),h=s(67294),O=s(30381),b=s.n(O),D=s(80854),e=s(85893);b().locale("zh-cn");var W=function(t){v.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onOk:function(){(0,D.request)("/api/v1/grpc/conn/delete",{method:"GET",params:{agent_id:t}}).then(function(o){console.log(o)})}})},j=function(){v.Z.confirm({title:"\u786E\u8BA4\u5220\u9664",content:"\u8BE5\u64CD\u4F5C\u4F1A\u6E05\u7406\u8D85\u8FC7\u4E00\u5468\u672A\u4E0A\u7EBF\u7684\u4E3B\u673A\uFF0C\u786E\u5B9A\u8981\u5220\u9664\u5417\uFF1F",onOk:function(){(0,D.request)("/api/v1/grpc/conn/delete",{method:"GET"}).then(function(r){console.log(r)})}})},U=[{title:"\u4E3B\u673A\u540D\u79F0",dataIndex:"hostname",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u5E73\u53F0",dataIndex:"platform",ellipsis:!0,search:!1,width:"8%",formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]},render:function(t,r,o,a){var d,p;return r.platform===null?null:((d=r.platform)===null||d===void 0?void 0:d.indexOf("Windows"))!==-1?(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:"./windows.svg",alt:"Windows Logo",width:"16px"}),"Windows"]}):(0,e.jsxs)("div",{children:[(0,e.jsx)("img",{src:"./linux.svg",alt:"Linux Logo",width:"16px"}),(p=r.platform)===null||p===void 0?void 0:p.replace(/^\S/,function(C){return C.toUpperCase()})]})}},{title:"\u6807\u7B7E",dataIndex:"tags",search:!1,render:function(t,r,o,a){var d;return(0,e.jsx)(m.Z,{size:[0,8],children:(0,e.jsx)(m.Z,{size:[0,8],children:(d=r.tags)===null||d===void 0?void 0:d.map(function(p,C){return(0,e.jsx)(f.Z,{color:"green",children:p},p)})})})},width:"10%"},{title:"\u72B6\u6001",dataIndex:"status",ellipsis:!0,width:"8%",valueEnum:{true:{text:"\u5728\u7EBF",status:"Success"},false:{text:"\u79BB\u7EBF",status:"Error"}},filters:!0,onFilter:!0,search:!1},{title:"\u5BA2\u6237\u7AEF\u6027\u80FD",search:!1,render:function(t,r,o,a){return(0,e.jsxs)(m.Z,{size:[20,24],children:[(0,e.jsxs)(m.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)(f.Z,{color:"default",children:"CPU"}),parseFloat(r.cpu).toFixed(2)+"%"]}),(0,e.jsx)("p",{}),(0,e.jsxs)(m.Z,{size:[0,4],wrap:!0,children:[(0,e.jsx)(f.Z,{color:"default",children:"MEM"}),parseFloat(r.mem).toFixed(1)+"MB"]})]})},width:"20%"},{title:"\u5730\u5740",dataIndex:"addr",copyable:!0,ellipsis:!0,formItemProps:{rules:[{required:!0,message:"\u6B64\u9879\u4E3A\u5FC5\u586B\u9879"}]}},{title:"\u521B\u5EFA\u65F6\u95F4",key:"showTime",dataIndex:"create_at",sorter:!0,search:!1,hideInSearch:!0,renderText:function(t){var r=new Date(t*1e3);return b()(r).fromNow()}},{title:"\u64CD\u4F5C",valueType:"option",key:"option",width:"10%",render:function(t,r,o,a){return[(0,e.jsx)("a",{href:"host/"+r.agent_id,rel:"noopener noreferrer",children:"\u8BE6\u60C5"},"view"),(0,e.jsx)("a",{onClick:function(){return W(r.agent_id)},children:"\u5220\u9664"})]}}],M=function(){var t=(0,h.useState)(!1),r=_()(t,2),o=r[0],a=r[1],d=(0,h.useState)(0),p=_()(d,2),C=p[0],S=p[1],H=(0,h.useState)(0),w=_()(H,2),K=w[0],z=w[1],G=(0,D.useRequest)(P.Ek),E=G.data;(0,h.useEffect)(function(){S((E==null?void 0:E.total)||0),z((E==null?void 0:E.online)||0)},[E]);var $=(0,h.useRef)();return(0,e.jsxs)(A._z,{children:[(0,e.jsx)("div",{children:(0,e.jsx)(I.Z,{onResize:function(c){a(c.width<596)},children:(0,e.jsxs)(i.Z.Group,{direction:o?"column":"row",children:[(0,e.jsx)(i.Z,{layout:"center",children:(0,e.jsx)(T.Z,{title:"\u5728\u7EBF\u4E3B\u673A",value:K,precision:0,prefix:(0,e.jsx)(g.Z,{color:"green"})})}),(0,e.jsx)(i.Z.Divider,{type:o?"horizontal":"vertical"}),(0,e.jsx)(i.Z,{layout:"center",children:(0,e.jsx)(T.Z,{title:"\u79BB\u7EBF\u4E3B\u673A",value:C-K,precision:0,prefix:(0,e.jsx)(g.Z,{color:"gray"})})})]})},"resize-observer")}),(0,e.jsx)("p",{}),(0,e.jsx)(l.Z,{columns:U,actionRef:$,cardBordered:!0,request:P.Zs,editable:{type:"multiple"},columnsState:{persistenceKey:"pro-table-singe-demos",persistenceType:"localStorage",onChange:function(c){console.log("value: ",c)}},rowKey:"agent_id",search:{defaultCollapsed:!1,labelWidth:"auto"},options:!1,form:{syncToUrl:function(c,F){return F==="get"?u()(u()({},c),{},{created_at:[c.startTime,c.endTime]}):c}},pagination:{pageSize:10,onChange:function(c){return console.log(c)}},dateFormatter:"string",headerTitle:"\u4E3B\u673A\u5217\u8868",toolBarRender:function(){return[(0,e.jsx)(L.Z,{onClick:j,children:"\u4E3B\u673A\u6E05\u7406"},"custom"),(0,e.jsx)("span",{style:{margin:"0 8px",display:"inline-block"}},"separator")]}})]})};x.default=M},49748:function(Z,x,s){s.d(x,{Ek:function(){return I},LH:function(){return W},Nh:function(){return U},UV:function(){return h},ZN:function(){return D},Zs:function(){return m},nc:function(){return L},pi:function(){return T},sk:function(){return b}});var y=s(15009),u=s.n(y),R=s(97857),_=s.n(R),A=s(99289),i=s.n(A),l=s(80854);function I(n){return v.apply(this,arguments)}function v(){return v=i()(u()().mark(function n(t){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,l.request)("/api/v1/grpc/conn/count",_()({method:"GET"},t||{})));case 1:case"end":return o.stop()}},n)})),v.apply(this,arguments)}function m(n,t){return f.apply(this,arguments)}function f(){return f=i()(u()().mark(function n(t,r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/v1/grpc/conn/basic",_()({method:"GET",params:_()({},t)},r||{})));case 1:case"end":return a.stop()}},n)})),f.apply(this,arguments)}function T(n,t){return g.apply(this,arguments)}function g(){return g=i()(u()().mark(function n(t,r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/v1/grpc/conn/stat",_()({method:"GET",params:_()({},t)},r||{})));case 1:case"end":return a.stop()}},n)})),g.apply(this,arguments)}function L(n,t){return P.apply(this,arguments)}function P(){return P=i()(u()().mark(function n(t,r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/v1/plugin/send",_()({method:"POST",data:JSON.stringify({name:t.name,pversion:t.pversion,agent_id:t.agent_id,action:t.action}),headers:{"Content-Type":"application/json"}},r||{})));case 1:case"end":return a.stop()}},n)})),P.apply(this,arguments)}function h(n){return O.apply(this,arguments)}function O(){return O=i()(u()().mark(function n(t){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,l.request)("/api/v1/plugin/list",_()({method:"GET"},t||{})));case 1:case"end":return o.stop()}},n)})),O.apply(this,arguments)}function b(n){return(0,l.request)("/api/v1/plugin/delete",_()({method:"GET"},n||{}))}function D(n){return e.apply(this,arguments)}function e(){return e=i()(u()().mark(function n(t){return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.abrupt("return",(0,l.request)("/api/v1/application/dashboard",_()({method:"GET"},t||{})));case 1:case"end":return o.stop()}},n)})),e.apply(this,arguments)}function W(n,t){return j.apply(this,arguments)}function j(){return j=i()(u()().mark(function n(t,r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)(t,_()({},r||{})));case 1:case"end":return a.stop()}},n)})),j.apply(this,arguments)}function U(n,t){return M.apply(this,arguments)}function M(){return M=i()(u()().mark(function n(t,r){return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,l.request)("/api/v1/asset/get",_()({method:"GET",params:t},r||{})));case 1:case"end":return a.stop()}},n)})),M.apply(this,arguments)}}}]);
