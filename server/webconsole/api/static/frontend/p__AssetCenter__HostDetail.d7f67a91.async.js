"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[414],{71764:function(Tt,De,r){r.r(De),r.d(De,{default:function(){return Ct}});var Oe=r(5574),O=r.n(Oe),Ke=r(90930),t=r(35312),k=r(67294),We=r(97857),oe=r.n(We),He=r(19632),Re=r.n(He),ze=r(15009),b=r.n(ze),Ne=r(99289),G=r.n(Ne),Be=r(13769),Ge=r.n(Be),ee=r(2453),Ue=["current","pageSize"];function _e(C){return ve.apply(this,arguments)}function ve(){return ve=G()(b()().mark(function C(g){return b()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return m.abrupt("return",(0,t.request)("/api/v1/grpc/conn/stat",{method:"GET",params:{agent_id:g}}));case 1:case"end":return m.stop()}},C)})),ve.apply(this,arguments)}var q={data:[],total:0,success:!1},te=function(C){return C.PROCESSES="processes",C.SOCKETS="sockets",C.USERS="users",C.CRONS="crons",C.APPS="apps",C.KMODS="kmods",C.PLUGINS="plugins",C.CONTAINERS="containers",C.IPTABLES="iptables",C.NET_INTERFACES="net_interfaces",C}({});function re(){return he.apply(this,arguments)}function he(){return he=G()(b()().mark(function C(){var g,c,m,x,f,i,v,M,p=arguments;return b()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return g=p.length>0&&p[0]!==void 0?p[0]:{agent_id:"",type:""},c=p.length>1&&p[1]!==void 0?p[1]:{},m=p.length>2&&p[2]!==void 0?p[2]:{},x=p.length>3&&p[3]!==void 0?p[3]:{},n.prev=4,f=c.current,i=c.pageSize,v=Ge()(c,Ue),n.next=8,(0,t.request)("/api/v1/asset/get",{params:{agent_id:g.agent_id,type:g.type,page:f,size:i,keyword:v,sort:m,filter:x}});case 8:if(M=n.sent,M.code!==0){n.next=13;break}return n.abrupt("return",{data:M.data.assets,total:M.data.total||0,success:!0});case 13:return ee.ZP.error(M.message),n.abrupt("return",q);case 15:n.next=21;break;case 17:return n.prev=17,n.t0=n.catch(4),ee.ZP.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25\uFF01"),n.abrupt("return",q);case 21:case"end":return n.stop()}},C,null,[[4,17]])})),he.apply(this,arguments)}var fe=r(1912),Ve=r(51042),ne=r(43471),Je=r(28508),Qe=r(30723),Q=r(43929),Xe=r(61086),qe=r(92962),et=r(87547),tt=r(66212),at=r(41156),st=r(64994),rt=r(3774),ie=r(39880),nt=r(37476),it=r(34994),we=r(64317),N=r(38345),E=r(63142),T=r(6466),lt=r(96604),ot=r(8232),ce=r(66309),$e=r(78957),_=r(14726),Te=r(17788),ke=r(96074),pe=r(38703),dt=r(56063),ut=r(27484),A=r.n(ut),de=r(9917),ct=r(29387),pt=r.n(ct),mt=r(70178),vt=r.n(mt),e=r(85893),ht=function(){var g=(0,t.useParams)(),c=g.id,m=c===void 0?"":c,x=(0,k.useState)(!1),f=O()(x,2),i=f[0],v=f[1],M=(0,k.useState)([]),p=O()(M,2),j=p[0],n=p[1],d=(0,k.useState)({data:[],total:0}),u=O()(d,2),h=u[0],S=u[1],K=(0,k.useState)({}),a=O()(K,2),Y=a[0],o=a[1],l=ot.Z.useForm(),L=O()(l,1),D=L[0],z=function(){v(!1)},V=function(){var y=G()(b()().mark(function W(Z,$,H){var F;return b()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.prev=0,w.next=3,re({agent_id:m,type:te.PLUGINS},Z,$,H);case 3:return F=w.sent,S(F),w.abrupt("return",F);case 8:return w.prev=8,w.t0=w.catch(0),console.error("Failed to fetch data:",w.t0),w.abrupt("return",q);case 12:case"end":return w.stop()}},W,null,[[0,8]])}));return function(Z,$,H){return y.apply(this,arguments)}}(),I=function(){var y=G()(b()().mark(function W(){var Z,$;return b()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return F.prev=0,F.next=3,(0,t.request)("/api/v1/plugin/list",{params:{page:1,size:999}});case 3:if(Z=F.sent,!(Z&&Z.data.items)){F.next=8;break}return $=Z.data.items.map(function(B){return{name:B.name,pversion:B.pversion}}),n($),F.abrupt("return",$);case 8:F.next=14;break;case 10:return F.prev=10,F.t0=F.catch(0),console.error("Error fetching plugins:",F.t0),F.abrupt("return",[]);case 14:case"end":return F.stop()}},W,null,[[0,10]])}));return function(){return y.apply(this,arguments)}}(),ue=[{title:"PID",dataIndex:"pid",valueType:"digit",copyable:!0,ellipsis:!0,width:"8%",search:!1,render:function(W,Z){return Number(Z.pid).toString()}},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.name"}),dataIndex:"name",copyable:!0,ellipsis:!0,width:"8%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"version"}),dataIndex:"pversion",copyable:!0,ellipsis:!0,render:function(W,Z){return(0,e.jsx)(ce.Z,{children:Z.pversion})},search:!1,width:"6%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"status"}),dataIndex:"status",filters:!0,onFilter:!0,ellipsis:!0,valueEnum:{false:{text:(0,e.jsx)(t.FormattedMessage,{id:"offline"}),status:"Default"},true:{text:(0,e.jsx)(t.FormattedMessage,{id:"online"}),status:"Success"}},search:!1,width:"8%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.performance"}),ellipsis:!0,render:function(W,Z){var $,H;return(0,e.jsxs)($e.Z,{children:[(0,e.jsxs)("span",{children:[(0,e.jsx)(ce.Z,{bordered:!0,children:"CPU"}),(($=Z.cpu)!==null&&$!==void 0?$:0).toFixed(2),"%"]}),(0,e.jsxs)("span",{children:[(0,e.jsx)(ce.Z,{bordered:!0,children:"MEM"}),(((H=Z.rss)!==null&&H!==void 0?H:0)/1024/1024).toFixed(2)," MB"]})]})},search:!1,width:"20%"},{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.uploadspeed"})," ",(0,e.jsx)(fe.Z,{})]}),dataIndex:"tx_speed",copyable:!0,ellipsis:!0,search:!1,render:function(W,Z){var $;return(0,e.jsxs)("span",{children:[((($=Z.tx_speed)!==null&&$!==void 0?$:0)/1024).toFixed(2)," KB/s"]})},width:"8%"},{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.uploadtps"})," ",(0,e.jsx)(fe.Z,{})]}),dataIndex:"tx_tps",copyable:!0,ellipsis:!0,search:!1,render:function(W,Z){var $;return(0,e.jsx)("span",{children:(($=Z.tx_tps)!==null&&$!==void 0?$:0).toFixed(2)})},width:"8%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.createat"}),dataIndex:"start_at",copyable:!0,ellipsis:!0,search:!1,sorter:!0,render:function(W,Z){return(0,e.jsx)("span",{children:A().unix(Z.start_at).format("YYYY-MM-DD hh:mm:ss")})}},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.latesthb"}),dataIndex:"last_heartbeat_time",copyable:!0,ellipsis:!0,search:!1,render:function(W,Z){return(0,e.jsx)("span",{children:A().unix(Z.last_heartbeat_time).fromNow()})}},{title:(0,e.jsx)(t.FormattedMessage,{id:"option"}),valueType:"option",key:"option",copyable:!1,render:function(W,Z,$,H){return[(0,e.jsx)("a",{href:"",target:"_blank",rel:"noopener noreferrer",children:(0,e.jsx)(t.FormattedMessage,{id:"upgrade"})},"upgrade"),(0,e.jsx)("a",{href:"",target:"_blank",rel:"noopener noreferrer",children:(0,e.jsx)(t.FormattedMessage,{id:"unload"})},"unload")]},width:"10%"}];return(0,e.jsx)(ie.Z,{columns:ue,options:!1,pagination:{total:h.total,pageSize:10},request:V,search:{optionRender:function(W,Z,$){return[].concat(Re()($),[(0,e.jsx)(nt.Y,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.addplg"}),trigger:(0,e.jsxs)(_.ZP,{type:"primary",children:[(0,e.jsx)(Ve.Z,{}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.addplg"})]}),form:D,onFinish:function(){var H=G()(b()().mark(function F(B){var w;return b()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.prev=0,P.next=3,(0,t.request)("/api/v1/plugin/send",{method:"POST",data:{agent_id:m,name:B.name,pversion:B.pversion,action:"insert"}});case 3:if(w=P.sent,w.code!==0){P.next=7;break}return ee.ZP.success("\u63D0\u4EA4\u6210\u529F"),P.abrupt("return",!0);case 7:ee.ZP.error(w.message),P.next=13;break;case 10:P.prev=10,P.t0=P.catch(0),ee.ZP.error("\u63D0\u4EA4\u5931\u8D25\uFF01");case 13:case"end":return P.stop()}},F,null,[[0,10]])}));return function(F){return H.apply(this,arguments)}}(),children:(0,e.jsxs)(it.A.Group,{children:[(0,e.jsx)(we.Z,{width:"md",request:G()(b()().mark(function H(){var F,B,w;return b()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,I();case 2:return F=P.sent,B=F.map(function(se){return se.name}),w=Array.from(new Set(B)),P.abrupt("return",w.map(function(se){return{label:se,value:se}}));case 6:case"end":return P.stop()}},H)})),onChange:function(F,B){var w=j.filter(function(P){return P.name===B.value});console.log(w);var ae={};w.forEach(function(P){ae[P.pversion]={text:P.pversion}}),o(ae)},name:"name",label:(0,e.jsx)(t.FormattedMessage,{id:"name"}),required:!0}),(0,e.jsx)(we.Z,{width:"md",name:"pversion",valueEnum:Y,label:(0,e.jsx)(t.FormattedMessage,{id:"version"}),required:!0})]})})])}},rowKey:"pid",children:(0,e.jsx)(Te.Z,{title:(0,e.jsxs)(e.Fragment,{children:["PID ",(0,e.jsx)(t.FormattedMessage,{id:"detail"})]}),open:i,onCancel:z,width:800,footer:[]})})},ft=function(){var g=(0,k.useState)(!1),c=O()(g,2),m=c[0],x=c[1],f=(0,k.useState)(null),i=O()(f,2),v=i[0],M=i[1],p=(0,t.useParams)(),j=p.id,n=j===void 0?"":j,d=(0,k.useState)({data:[],total:0}),u=O()(d,2),h=u[0],S=u[1],K=function(){var l=G()(b()().mark(function L(D,z,V){var I;return b()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.prev=0,y.next=3,re({agent_id:n,type:te.PROCESSES},D,z,V);case 3:return I=y.sent,S(I),y.abrupt("return",I);case 8:return y.prev=8,y.t0=y.catch(0),console.error("Failed to fetch data:",y.t0),y.abrupt("return",q);case 12:case"end":return y.stop()}},L,null,[[0,8]])}));return function(D,z,V){return l.apply(this,arguments)}}(),a=(0,k.useCallback)(function(l){M(l),x(!0)},[]),Y=(0,k.useCallback)(function(){x(!1),M(null)},[]),o=[{title:"PID",dataIndex:"pid",valueType:"digit",copyable:!0,ellipsis:!0,width:"8%",search:!0,render:function(L,D){return(0,e.jsx)(_.ZP,{type:"link",onClick:function(){return a(D)},style:{height:10},children:D.pid})}},{title:"PPID",dataIndex:"ppid",valueType:"digit",copyable:!0,ellipsis:!0,width:"8%",search:!1,render:function(L,D){return Number(D.ppid).toString()}},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.processname"}),dataIndex:"name",copyable:!0,ellipsis:!0,width:"15%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.exefile"}),dataIndex:"exe",copyable:!0,ellipsis:!0,width:"30%"},{title:"UID",dataIndex:"uid",copyable:!1,ellipsis:!0,width:"8%",search:!1,valueType:"digit",render:function(L,D){return Number(D.uid).toString()}},{title:(0,e.jsx)(t.FormattedMessage,{id:"username"}),dataIndex:"username",copyable:!1,ellipsis:!0,width:"12%",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.start_time"}),dataIndex:"start_time",copyable:!1,ellipsis:!0,search:!1,render:function(L,D){return A().unix(D.start_time).format("YYYY-MM-DD HH:mm:ss")}}];return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(ie.Z,{columns:o,options:!1,search:{filterType:"light"},request:K,headerTitle:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.process.update_time"}),":",(0,e.jsxs)("span",{style:{color:"gray",fontWeight:"400",marginLeft:"10px",fontFamily:"unset"},children:[" ",h!=null&&h.data&&(h==null?void 0:h.data.length)>0?A().unix(h==null?void 0:h.data[0].update_time).format("YYYY-MM-DD HH:mm:ss"):"-"]})]}),pagination:{total:h.total,pageSize:10},toolbar:{settings:[{icon:(0,e.jsx)(ne.Z,{}),tooltip:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.pull"}),onClick:function(){return K({},{},{})}}]}}),(0,e.jsx)(Te.Z,{title:(0,e.jsxs)(e.Fragment,{children:["PID ",(0,e.jsx)(t.FormattedMessage,{id:"detail"})]}),open:m,onCancel:Y,width:800,footer:null,children:v&&(0,e.jsx)("pre",{style:{whiteSpace:"pre-wrap",wordWrap:"break-word",background:"#f5f5f5",padding:"10px",borderRadius:"4px"},children:(0,e.jsx)("code",{children:JSON.stringify(Object.fromEntries(Object.entries(v).filter(function(l){var L=O()(l,1),D=L[0];return!["_id","package_seq","data_type"].includes(D)})),null,2)})})})]})},gt=function(){var g=(0,t.useParams)(),c=g.id,m=c===void 0?"":c,x=(0,k.useState)({data:[],total:0}),f=O()(x,2),i=f[0],v=f[1],M=function(d){var u={1:"ICMP",6:"TCP",17:"UDP"};return u[d]||d},p=[{title:"PID",dataIndex:"pid",valueType:"digit",copyable:!0,width:"10%",render:function(d,u){return Number(u.pid).toString()}},{title:"INODE",dataIndex:"inode",valueType:"digit",copyable:!0,width:"10%",render:function(d,u){return Number(u.inode).toString()}},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.protocol"}),dataIndex:"type",valueEnum:{1:{text:"ICMP"},6:{text:"TCP"},17:{text:"UDP"}},renderText:M,filters:!0,search:!1,width:"10%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.processname"}),dataIndex:"comm",valueType:"text",copyable:!0},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.remoteaddr"}),key:"remote_addr",valueType:"text",render:function(d,u){return u.dip+":"+u.dport},width:"15%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.localaddr"}),key:"local_addr",render:function(d,u){return u.sip+":"+u.sport},search:!1,width:"15%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.processname"}),dataIndex:"cmdline",valueType:"text",search:!1,copyable:!0}],j=function(){var n=G()(b()().mark(function d(u,h,S){var K;return b()().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.prev=0,Y.next=3,re({agent_id:m,type:te.SOCKETS},u,h,S);case 3:return K=Y.sent,v(K),Y.abrupt("return",K);case 8:return Y.prev=8,Y.t0=Y.catch(0),console.error("Failed to fetch data:",Y.t0),Y.abrupt("return",q);case 12:case"end":return Y.stop()}},d,null,[[0,8]])}));return function(u,h,S){return n.apply(this,arguments)}}();return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ie.Z,{columns:p,options:!1,request:j,search:{filterType:"light"},headerTitle:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.process.update_time"}),":",(0,e.jsxs)("span",{style:{color:"gray",fontWeight:"400",marginLeft:"10px",fontFamily:"unset"},children:[" ",i!=null&&i.data&&(i==null?void 0:i.data.length)>0?A().unix(i==null?void 0:i.data[0].update_time).format("YYYY-MM-DD HH:mm:ss"):"-"]})]}),pagination:{total:i.total,pageSize:10},toolbar:{settings:[{icon:(0,e.jsx)(ne.Z,{}),tooltip:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.pull"}),onClick:function(){return j({},{},{})}}]}})})},xt=function(){var g=(0,t.useParams)(),c=g.id,m=c===void 0?"":c,x=(0,k.useState)({data:[],total:0}),f=O()(x,2),i=f[0],v=f[1],M=function(){var j=G()(b()().mark(function n(d,u,h){var S;return b()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,re({agent_id:m,type:te.USERS},d,u,h);case 3:return S=a.sent,v(S),a.abrupt("return",S);case 8:return a.prev=8,a.t0=a.catch(0),console.error("Failed to fetch data:",a.t0),a.abrupt("return",q);case 12:case"end":return a.stop()}},n,null,[[0,8]])}));return function(d,u,h){return j.apply(this,arguments)}}(),p=[{title:"UID",dataIndex:"uid",valueType:"digit",copyable:!0,width:"6%",sorter:!0,render:function(n,d){return Number(d.uid).toString()}},{title:"GID",dataIndex:"gid",valueType:"text",copyable:!1,width:"5%",search:!1,render:function(n,d){return Number(d.gid).toString()}},{title:(0,e.jsx)(t.FormattedMessage,{id:"username"}),dataIndex:"username",valueType:"text",copyable:!0,width:"9%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.users.group_name"}),dataIndex:"group_name",valueType:"text",copyable:!0,width:"9%",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.users.last_login_ip"}),dataIndex:"last_login_ip",valueType:"text",copyable:!0,width:"10%",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.users.last_login_time"}),dataIndex:"last_login_time",valueType:"text",copyable:!1,width:"12%",render:function(n,d){return A().unix(d.last_login_time).format("YYYY-MM-DD HH:mm:ss")},search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.users.home"}),dataIndex:"home_dir",valueType:"text",copyable:!0,width:"12%",search:!1,ellipsis:!0},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.users.shell"}),dataIndex:"shell",valueType:"text",copyable:!0,width:"12%",search:!1,ellipsis:!0},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.users.info"}),dataIndex:"info",valueType:"text",copyable:!0,search:!1,ellipsis:!0}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ie.Z,{columns:p,options:!1,request:M,search:{filterType:"light"},headerTitle:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.process.update_time"}),":",(0,e.jsxs)("span",{style:{color:"gray",fontWeight:"400",marginLeft:"10px",fontFamily:"unset"},children:[" ",i.data&&i.data.length>0?A().unix(i.data[0].update_time).format("YYYY-MM-DD HH:mm:ss"):"-"]})]}),pagination:{total:i.total,pageSize:10},toolbar:{settings:[{icon:(0,e.jsx)(ne.Z,{}),tooltip:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.pull"})}]}})})},jt=function(){var g=(0,t.useParams)(),c=g.id,m=c===void 0?"":c,x=(0,k.useState)({data:[],total:0}),f=O()(x,2),i=f[0],v=f[1],M=function(){var j=G()(b()().mark(function n(d,u,h){var S;return b()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,re({agent_id:m,type:te.CRONS},d,u,h);case 3:return S=a.sent,v(S),a.abrupt("return",S);case 8:return a.prev=8,a.t0=a.catch(0),console.error("Failed to fetch data:",a.t0),a.abrupt("return",q);case 12:case"end":return a.stop()}},n,null,[[0,8]])}));return function(d,u,h){return j.apply(this,arguments)}}(),p=[{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.crontab.file_path"}),dataIndex:"path",valueType:"text",copyable:!0,width:"15%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"username"}),dataIndex:"user",valueType:"text",copyable:!0,width:"8%"},{title:"Minute",dataIndex:"minute",valueType:"text",copyable:!1,width:"5%",search:!1},{title:"Hour",dataIndex:"hour",valueType:"text",copyable:!1,width:"5%",search:!1},{title:"DoM",dataIndex:"day_of_month",valueType:"text",copyable:!1,width:"5%",tooltip:"Day of month",search:!1},{title:"Month",dataIndex:"month",valueType:"text",copyable:!1,width:"5%",search:!1},{title:"DoW",dataIndex:"day_of_week",valueType:"text",copyable:!0,width:"5%",tooltip:"Day of Week",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.crontab.command"}),dataIndex:"command",valueType:"text",copyable:!0,ellipsis:!0}];return(0,e.jsx)(ie.Z,{columns:p,options:!1,request:M,search:{filterType:"light"},headerTitle:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.process.update_time"}),":",(0,e.jsxs)("span",{style:{color:"gray",fontWeight:"400",marginLeft:"10px",fontFamily:"unset"},children:[" ",i.data&&i.data.length>0?A().unix(i.data[0].update_time).format("YYYY-MM-DD HH:mm:ss"):"-"]})]}),pagination:{total:i.total,pageSize:10},toolbar:{settings:[{icon:(0,e.jsx)(ne.Z,{}),tooltip:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.pull"})}]}})},yt=function(){var g=(0,t.useParams)(),c=g.id,m=c===void 0?"":c,x=(0,k.useState)({data:[],total:0}),f=O()(x,2),i=f[0],v=f[1],M=function(){var j=G()(b()().mark(function n(d,u,h){var S;return b()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,re({agent_id:m,type:te.APPS},d,u,h);case 3:return S=a.sent,v(S),a.abrupt("return",S);case 8:return a.prev=8,a.t0=a.catch(0),console.error("Failed to fetch data:",a.t0),a.abrupt("return",q);case 12:case"end":return a.stop()}},n,null,[[0,8]])}));return function(d,u,h){return j.apply(this,arguments)}}(),p=[{title:"PID",dataIndex:"pid",valueType:"digit",copyable:!0,width:"10%",render:function(n,d){return Number(d.pid).toString()}},{title:(0,e.jsx)(t.FormattedMessage,{id:"type"}),dataIndex:"type",valueType:"text",copyable:!0,width:"10%",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"name"}),dataIndex:"name",valueType:"text",copyable:!0,width:"10%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"container_name"}),dataIndex:"container_name",valueType:"text",copyable:!0,width:"10%"},{title:(0,e.jsx)(t.FormattedMessage,{id:"version"}),dataIndex:"version",valueType:"text",copyable:!1,width:"10%",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.applications.listen_ports"}),dataIndex:"listen_addrs",valueType:"text",copyable:!1,width:"15%",ellipsis:!0,search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"UID"}),dataIndex:"uid",valueType:"text",copyable:!0,width:"5%",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"CMDLINE"}),dataIndex:"cmdline",valueType:"text",copyable:!0,width:"25%",ellipsis:!0,search:!1}];return(0,e.jsx)(ie.Z,{columns:p,options:!1,search:{filterType:"light"},request:M,headerTitle:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.process.update_time"}),":",(0,e.jsxs)("span",{style:{color:"gray",fontWeight:"400",marginLeft:"10px",fontFamily:"unset"},children:[" ",i.data&&i.data.length>0?A().unix(i.data[0].update_time).format("YYYY-MM-DD HH:mm:ss"):"-"]})]}),pagination:{total:i.total,pageSize:10},toolbar:{settings:[{icon:(0,e.jsx)(ne.Z,{}),tooltip:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.pull"})}]}})},Ft=function(){var g=(0,t.useParams)(),c=g.id,m=c===void 0?"":c,x=(0,k.useState)({data:[],total:0}),f=O()(x,2),i=f[0],v=f[1],M=function(){var j=G()(b()().mark(function n(d,u,h){var S;return b()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,re({agent_id:m,type:te.KMODS},d,u,h);case 3:return S=a.sent,v(S),a.abrupt("return",S);case 8:return a.prev=8,a.t0=a.catch(0),console.error("Failed to fetch data:",a.t0),a.abrupt("return",q);case 12:case"end":return a.stop()}},n,null,[[0,8]])}));return function(d,u,h){return j.apply(this,arguments)}}(),p=[{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.kmods.name"}),dataIndex:"name",valueType:"text",copyable:!0,width:"10%"},{title:"SIZE",dataIndex:"size",valueType:"text",copyable:!1,width:"5%",search:!1,sorter:!0},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.kmods.refcount"}),dataIndex:"refcount",valueType:"text",copyable:!1,width:"4%",search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.kmods.used_by"}),dataIndex:"used_by",valueType:"text",copyable:!0,width:"20%",ellipsis:!0,search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"state"}),dataIndex:"state",valueType:"text",copyable:!1,width:"5%",valueEnum:{Live:{text:"Live",status:"Success"},Loading:{text:"Loading",status:"Default"}},filters:!0,search:!1},{title:(0,e.jsx)(t.FormattedMessage,{id:"addr"}),dataIndex:"addr",valueType:"text",copyable:!0,width:"15%",ellipsis:!0,search:!1}];return(0,e.jsx)(ie.Z,{columns:p,options:!1,request:M,search:{filterType:"light"},headerTitle:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.process.update_time"}),":",(0,e.jsxs)("span",{style:{color:"gray",fontWeight:"400",marginLeft:"10px",fontFamily:"unset"},children:[" ",i.data&&i.data.length>0?A().unix(i.data[0].update_time).format("YYYY-MM-DD HH:mm:ss"):"-"]})]}),pagination:{total:i.total,pageSize:10},toolbar:{settings:[{icon:(0,e.jsx)(ne.Z,{}),tooltip:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.pull"})}]}})},bt=function(g){var c,m,x,f,i,v,M,p,j,n,d,u,h,S,K,a,Y,o,l,L,D,z,V,I,ue,y,W,Z,$,H,F,B,w,ae,P,se,ge,xe,je,ye,Fe,be,Me,Se,Ze,Pe,Ce,X=g.setActiveKey,le=g.setAppActiveKey,It=(0,k.useState)([]),Ye=O()(It,2),s=Ye[0],Dt=Ye[1],wt=(0,t.useParams)(),Ee=wt.id,$t=(0,k.useState)(!1),Ae=O()($t,2),Le=Ae[0],kt=Ae[1];return(0,k.useEffect)(function(){var R=function(){var J=G()(b()().mark(function Ie(){var me;return b()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:if(Ee){U.next=3;break}return ee.ZP.error("AgentId Error"),U.abrupt("return");case 3:return U.prev=3,U.next=6,_e(Ee);case 6:me=U.sent,me.code===0?Dt(me.data):ee.ZP.error(me.message),U.next=13;break;case 10:U.prev=10,U.t0=U.catch(3),ee.ZP.error("Error fetching data: ".concat(U.t0 instanceof Error?U.t0.message:"An unknown error occurred"));case 13:case"end":return U.stop()}},Ie,null,[[3,10]])}));return function(){return J.apply(this,arguments)}}();R()},[]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(N.Z,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.hostinfo"}),hoverable:!0,bordered:!0,children:(0,e.jsxs)(E.vY,{labelStyle:{color:"black"},column:4,children:[(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.hostname"}),copyable:!0,children:(c=s.agent_info)===null||c===void 0?void 0:c.hostname}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.ipv4lan"}),copyable:!0,children:(m=s.agent_info)===null||m===void 0?void 0:m.intranet_ipv4}),(0,e.jsx)(E.vY.Item,{title:"PID",copyable:!0,children:(x=s.agent_info)===null||x===void 0?void 0:x.pid}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.boottime"}),children:A().unix((f=s.agent_info)===null||f===void 0?void 0:f.boot_at).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.arch"}),copyable:!0,children:(i=s.agent_info)===null||i===void 0?void 0:i.arch}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.ipv6lan"}),copyable:!0,children:(v=s.agent_info)===null||v===void 0?void 0:v.intranet_ipv6}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.connaddr"}),copyable:!0,children:(M=s.agent_info)===null||M===void 0?void 0:M.addr}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.latestheartbeat"}),children:A().unix((p=s.agent_info)===null||p===void 0?void 0:p.last_heartbeat_time).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsxs)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.distro"}),copyable:!0,children:[(j=s.agent_info)===null||j===void 0?void 0:j.platform," ",(n=s.agent_info)===null||n===void 0?void 0:n.platform_family," ",(d=s.agent_info)===null||d===void 0?void 0:d.platform_version]}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.ipv4wan"}),copyable:!0,children:(u=s.agent_info)===null||u===void 0?void 0:u.extranet_ipv4}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.uploadtps"}),children:(0,e.jsxs)("span",{children:[(h=s.agent_info)===null||h===void 0?void 0:h.tx_tps.toFixed(2)," ",(0,e.jsx)(fe.Z,{style:{color:"#1677FF"}})]})}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.agentstarttime"}),children:A().unix((S=s.agent_info)===null||S===void 0?void 0:S.start_at).format("YYYY-MM-DD HH:mm:ss")}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.kernelversion"}),copyable:!0,children:(K=s.agent_info)===null||K===void 0?void 0:K.kernel_version}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.ipv6wan"}),copyable:!0,children:(a=s.agent_info)===null||a===void 0?void 0:a.extranet_ipv6}),(0,e.jsxs)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.sysinfo"}),children:[(Y=s.agent_info)===null||Y===void 0?void 0:Y.cpu_num," Core /"," ",(((o=s.agent_info)===null||o===void 0?void 0:o.total_memory)/1024/1024/1024).toFixed(1)," GB"]}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.agentversion"}),copyable:!0,children:(l=s.agent_info)===null||l===void 0?void 0:l.version}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.cpuname"}),copyable:!0,children:(L=s.agent_info)===null||L===void 0?void 0:L.cpu_name}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.labels"}),children:(0,e.jsxs)($e.Z,{children:[s.tags&&s.tags.length>0?s.tags.map(function(R,J){return(0,e.jsx)(ce.Z,{color:"#E4F3E0",style:{color:"#199B00"},closable:!0,closeIcon:(0,e.jsx)(Je.Z,{style:{color:"black"}}),onClose:function(){return""},children:R},J)}):"",(0,e.jsx)(Qe.Z,{style:{fontSize:"20px",verticalAlign:"middle",marginLeft:-8,marginBlockStart:-2}})]})}),(0,e.jsxs)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.sysload"}),children:[(D=s.agent_info)===null||D===void 0?void 0:D.load_1," / ",(z=s.agent_info)===null||z===void 0?void 0:z.load_5," / ",(V=s.agent_info)===null||V===void 0?void 0:V.load_15]}),(0,e.jsx)(E.vY.Item,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.agentstatus"}),valueEnum:{false:{text:(0,e.jsx)(t.FormattedMessage,{id:"offline"}),status:"Default"},true:{text:(0,e.jsx)(t.FormattedMessage,{id:"online"}),status:"Success"}},children:(I=s.agent_info)===null||I===void 0?void 0:I.online})]})}),(0,e.jsx)(ke.Z,{type:Le?"horizontal":"vertical"}),(0,e.jsxs)(N.Z,{ghost:!0,gutter:12,children:[(0,e.jsx)(N.Z,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.systemload"}),hoverable:!0,extra:(0,e.jsxs)(_.ZP,{type:"link",onClick:function(){return X("monitor")},children:[(0,e.jsx)(t.FormattedMessage,{id:"detail"}),(0,e.jsx)(Q.Z,{})]}),colSpan:20,style:{marginLeft:-6},bordered:!0,children:(0,e.jsxs)(T.Z.Group,{children:[(0,e.jsx)(T.Z,{statistic:{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.agentcpu"}),value:(((ue=(y=s.agent_info)===null||y===void 0?void 0:y.cpu)!==null&&ue!==void 0?ue:0)*100).toFixed(2)+"%",description:(0,e.jsxs)("span",{style:{color:"#8c8c8c"},children:[(0,e.jsx)(t.FormattedMessage,{id:"limit"})," 10%"]})},chart:(0,e.jsx)(pe.Z,{type:"circle",percent:((W=(Z=s.agent_info)===null||Z===void 0?void 0:Z.cpu)!==null&&W!==void 0?W:0)*100/.1,size:65,format:function(){return null}}),chartPlacement:"left"}),(0,e.jsx)(T.Z,{statistic:{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.agentmem"}),value:((($=s.agent_info)===null||$===void 0?void 0:$.rss)/1024/1024).toFixed(2)+"MB",description:(0,e.jsxs)("span",{style:{color:"#8c8c8c"},children:[(0,e.jsx)(t.FormattedMessage,{id:"limit"})," 250 MB"]})},chart:(0,e.jsx)(pe.Z,{type:"circle",percent:((H=s.agent_info)===null||H===void 0?void 0:H.rss)/1024/1024/250*100,size:65,format:function(J){return(J==null?void 0:J.toFixed(1))+"%"}}),chartPlacement:"left"}),(0,e.jsx)(T.Z,{statistic:{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.syscpu"}),value:((F=(B=s.agent_info)===null||B===void 0?void 0:B.sys_cpu)!==null&&F!==void 0?F:0).toFixed(2)+"%"},chart:(0,e.jsx)(pe.Z,{type:"circle",percent:(w=(ae=s.agent_info)===null||ae===void 0?void 0:ae.sys_cpu)!==null&&w!==void 0?w:0,size:65,format:function(){return null}}),chartPlacement:"left"}),(0,e.jsx)(T.Z,{statistic:{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.sysmem"}),value:(((P=(se=s.agent_info)===null||se===void 0?void 0:se.sys_mem)!==null&&P!==void 0?P:0)*(((ge=s.agent_info)===null||ge===void 0?void 0:ge.total_memory)/1024/1024/1024)/100).toFixed(2)+"GB",description:(0,e.jsxs)("span",{style:{color:"#8c8c8c"},children:[(0,e.jsx)(t.FormattedMessage,{id:"limit"})," ",(((xe=(je=s.agent_info)===null||je===void 0?void 0:je.total_memory)!==null&&xe!==void 0?xe:0)/1024/1024/1024).toFixed(1)," GB"]})},chart:(0,e.jsx)(pe.Z,{type:"circle",percent:(ye=s.agent_info)===null||ye===void 0?void 0:ye.sys_mem,size:65,format:function(J){return(J==null?void 0:J.toFixed(1))+"%"}}),chartPlacement:"left"})]})}),(0,e.jsx)(N.Z,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.securityalert"}),hoverable:!0,extra:(0,e.jsxs)(_.ZP,{type:"link",onClick:function(){return X("securityalert")},children:[(0,e.jsx)(t.FormattedMessage,{id:"detail"}),(0,e.jsx)(Q.Z,{})]}),style:{marginLeft:6},bordered:!0,children:(0,e.jsx)(T.Z.Group,{children:(0,e.jsx)(T.Z,{statistic:{title:"\u544A\u8B66\u603B\u6570",value:10,description:(0,e.jsx)(lt.Z,{title:"\u5360\u6BD4",value:"61.5%"})},chartPlacement:"left"})})})]}),(0,e.jsx)(ke.Z,{type:Le?"horizontal":"vertical"}),(0,e.jsx)(N.Z,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.appoverview"}),hoverable:!0,extra:(0,e.jsxs)(_.ZP,{type:"link",onClick:function(){return X("appdetail")},children:[(0,e.jsx)(t.FormattedMessage,{id:"detail"}),(0,e.jsx)(Q.Z,{})]}),children:(0,e.jsxs)(T.Z.Group,{gutter:16,children:[(0,e.jsx)(T.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(Xe.Z,{style:{marginRight:"8px"}}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.processes"})]}),statistic:{value:(s==null||(Fe=s.app_overview)===null||Fe===void 0?void 0:Fe.processes)||0},style:{backgroundColor:"#f0f0f0"},extra:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){le(te.PROCESSES),X("appdetail")},children:(0,e.jsx)(Q.Z,{})}),hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(qe.Z,{style:{marginRight:"8px"}}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.networks"})]}),statistic:{value:(s==null||(be=s.app_overview)===null||be===void 0?void 0:be.sockets)||0},style:{backgroundColor:"#f0f0f0"},extra:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){le("sockets"),X("appdetail")},children:(0,e.jsx)(Q.Z,{})}),hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(et.Z,{style:{marginRight:"8px"}}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.users"})]}),statistic:{value:(s==null||(Me=s.app_overview)===null||Me===void 0?void 0:Me.users)||0},style:{backgroundColor:"#f0f0f0"},extra:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){le("user"),X("appdetail")},children:(0,e.jsx)(Q.Z,{})}),hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(tt.Z,{style:{marginRight:"8px"}}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.crontabs"})]}),statistic:{value:(s==null||(Se=s.app_overview)===null||Se===void 0?void 0:Se.crons)||0},style:{backgroundColor:"#f0f0f0"},extra:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){le("crons"),X("appdetail")},children:(0,e.jsx)(Q.Z,{})}),hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(at.Z,{style:{marginRight:"8px"}}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.applications"})]}),statistic:{value:(s==null||(Ze=s.app_overview)===null||Ze===void 0?void 0:Ze.apps)||0},style:{backgroundColor:"#f0f0f0"},extra:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){le("apps"),X("appdetail")},children:(0,e.jsx)(Q.Z,{})}),hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(st.Z,{style:{marginRight:"8px"}}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.kernelmodules"})]}),statistic:{value:(s==null||(Pe=s.app_overview)===null||Pe===void 0?void 0:Pe.kmods)||0},style:{backgroundColor:"#f0f0f0"},extra:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){le("kmods"),X("appdetail")},children:(0,e.jsx)(Q.Z,{})}),hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsxs)("span",{children:[(0,e.jsx)(rt.Z,{style:{marginRight:"8px"}}),(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.containers"})]}),statistic:{value:(s==null||(Ce=s.app_overview)===null||Ce===void 0?void 0:Ce.containers)||0},style:{backgroundColor:"#f0f0f0"},extra:(0,e.jsx)(_.ZP,{type:"link",onClick:function(){le("containers"),X("appdetail")},children:(0,e.jsx)(Q.Z,{})}),hoverable:!0})]})})]})},Mt=function(g){var c=g.activeKey,m=g.setActiveKey,x=function(i){m(i)};return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(N.Z,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.hostdetail"}),tabs:{type:"card",activeKey:c,onChange:x},tooltip:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.hostdetail.tooltip"}),extra:(0,e.jsx)(_.ZP,{type:"default",icon:(0,e.jsx)(ne.Z,{}),children:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.pull"})}),hoverable:!0,children:[(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugins"}),children:(0,e.jsx)(ht,{})},"plugins"),(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.processes"}),children:(0,e.jsx)(ft,{})},"processes"),(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.networks"}),children:(0,e.jsx)(gt,{})},"sockets"),(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.users"}),children:(0,e.jsx)(xt,{})},"users"),(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.crontabs"}),children:(0,e.jsx)(jt,{})},"crons"),(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.applications"}),children:(0,e.jsx)(yt,{})},"apps"),(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.kernelmodules"}),children:(0,e.jsx)(Ft,{})},"kmods"),(0,e.jsx)(N.Z.TabPane,{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.containers"})},"containers")]})})},St=dt.default.RangePicker;A().extend(vt()),A().extend(pt()),A().tz.setDefault("Asia/Shanghai");var Zt=function(){var g=(0,k.useState)([]),c=O()(g,2),m=c[0],x=c[1],f=(0,k.useState)([A()().subtract(60,"minutes"),A()()]),i=O()(f,2),v=i[0],M=i[1],p=(0,t.useParams)(),j=p.id,n=(m||[]).map(function(o){var l,L,D,z,V,I;return{timestamp:A()(o==null?void 0:o.timestamp).toDate(),agent_cpu:((o==null||(l=o.metrics)===null||l===void 0?void 0:l.agent_cpu)||0)*100,agent_mem:((o==null||(L=o.metrics)===null||L===void 0?void 0:L.agent_mem)||0)/1024/1024,sys_cpu:(o==null||(D=o.metrics)===null||D===void 0?void 0:D.sys_cpu)||0,sys_mem:(o==null||(z=o.metrics)===null||z===void 0?void 0:z.sys_mem)||0,tx_speed:(o==null||(V=o.metrics)===null||V===void 0?void 0:V.tx_speed)||0,tx_tps:(o==null||(I=o.metrics)===null||I===void 0?void 0:I.tx_tps)||0}}),d={data:n,xField:"timestamp",yField:"agent_cpu",tooltip:{channel:"y",valueFormatter:function(l){return"".concat(l.toFixed(2),"%")}},style:{lineWidth:2},scale:{y:{domainMax:10,domainMin:0}},axis:{x:{line:!0,arrow:!1,lineLineWidth:1},y:{line:!0,arrow:!1,lineLineWidth:1,labelFormatter:function(l){return"".concat(l,"%")}}},forceFit:!0,responsive:!0,height:200},u={data:n,xField:"timestamp",yField:"agent_mem",tooltip:{channel:"y",valueFormatter:function(l){return"".concat(l.toFixed(2),"MB")}},style:{lineWidth:2},scale:{y:{domainMax:250,domainMin:0}},axis:{x:{line:!0,arrow:!1,lineLineWidth:1},y:{line:!0,arrow:!1,lineLineWidth:1,labelFormatter:function(l){return"".concat(l,"MB")}}},height:200},h={data:n,xField:"timestamp",yField:"sys_cpu",tooltip:{channel:"y",valueFormatter:function(l){return"".concat(l.toFixed(2),"%")}},style:{lineWidth:2},scale:{y:{domainMax:100,domainMin:0}},axis:{x:{line:!0,arrow:!1,lineLineWidth:1},y:{line:!0,arrow:!1,lineLineWidth:1,labelFormatter:function(l){return"".concat(l,"%")}}},height:200},S={data:n,xField:"timestamp",yField:"sys_mem",tooltip:{channel:"y",valueFormatter:function(l){return"".concat(l.toFixed(2),"%")}},style:{lineWidth:2},scale:{y:{domainMax:100,domainMin:0}},axis:{x:{line:!0,arrow:!1,lineLineWidth:1},y:{line:!0,arrow:!1,lineLineWidth:1,labelFormatter:function(l){return"".concat(l,"%")}}},height:200},K={data:n,xField:"timestamp",yField:"tx_speed",tooltip:{channel:"y",valueFormatter:function(l){return"".concat(l.toFixed(2),"KB/S")}},style:{lineWidth:2},scale:{y:{domainMin:0}},axis:{x:{line:!0,arrow:!1,lineLineWidth:1},y:{line:!0,arrow:!1,lineLineWidth:1,labelFormatter:function(l){return"".concat(l,"KB/S")}}},height:200},a={data:n,xField:"timestamp",yField:"tx_tps",tooltip:{channel:"y",valueFormatter:function(l){return"".concat(l.toFixed(2))}},style:{lineWidth:2},scale:{y:{domainMin:0}},axis:{x:{line:!0,arrow:!1,lineLineWidth:1},y:{line:!0,arrow:!1,lineLineWidth:1,labelFormatter:function(l){return"".concat(l)}}},height:200},Y=function(){var o=G()(b()().mark(function l(){var L,D,z;return b()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:if(console.log(v,j),!(!v[0]||!v[1]||!j)){I.next=3;break}return I.abrupt("return");case 3:return L=A()(v[0]).tz("Asia/Shanghai").toISOString(),D=A()(v[1]).tz("Asia/Shanghai").toISOString(),I.prev=5,I.next=8,(0,t.request)("/api/v1/metric",{params:{start:L,end:D,agent_id:j}});case 8:z=I.sent,x(z.data),I.next=15;break;case 12:I.prev=12,I.t0=I.catch(5),console.error("Error fetching data:",I.t0);case 15:case"end":return I.stop()}},l,null,[[5,12]])}));return function(){return o.apply(this,arguments)}}();return(0,k.useEffect)(function(){Y()},[v]),(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(N.Z,{extra:(0,e.jsx)(St,{onChange:function(l){return M(l)},defaultValue:[v[0],v[1]],showTime:!0}),title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.systemperformance"}),headerBordered:!0,children:[(0,e.jsxs)(T.Z.Group,{gutter:16,ghost:!0,children:[(0,e.jsx)(T.Z,{title:"Agent CPU",chart:(0,e.jsx)(de.Z,oe()({},d)),bordered:!0,hoverable:!0}),(0,e.jsx)(T.Z,{title:"System CPU",chart:(0,e.jsx)(de.Z,oe()({},h)),bordered:!0,hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.uploadspeed"}),chart:(0,e.jsx)(de.Z,oe()({},K)),bordered:!0,hoverable:!0})]}),(0,e.jsx)("br",{}),(0,e.jsxs)(T.Z.Group,{gutter:16,ghost:!0,children:[(0,e.jsx)(T.Z,{title:"Agent MEM",chart:(0,e.jsx)(de.Z,oe()({},u)),bordered:!0,hoverable:!0}),(0,e.jsx)(T.Z,{title:"System MEM",chart:(0,e.jsx)(de.Z,oe()({},S)),bordered:!0,hoverable:!0}),(0,e.jsx)(T.Z,{title:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.plugin.uploadtps"}),chart:(0,e.jsx)(de.Z,oe()({},a)),bordered:!0,hoverable:!0})]})]})})},Pt=function(){var g=(0,t.useIntl)(),c=(0,k.useState)("basic"),m=O()(c,2),x=m[0],f=m[1],i=(0,k.useState)("plugins"),v=O()(i,2),M=v[0],p=v[1],j=function(u){f(u)},n=[{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.basicinfo"}),key:"basic"},{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.securityalert"}),key:"securityalert",disabled:!0},{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.appdetail"}),key:"appdetail"},{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.monitor"}),key:"monitor"},{tab:(0,e.jsx)(t.FormattedMessage,{id:"assetcenter.hostdetail.operationlogs"}),key:"operationlogs",disabled:!0}];return(0,e.jsx)("div",{style:{background:"#F5F7FA"},children:(0,e.jsxs)(Ke._z,{header:{ghost:!0,title:void 0,style:{backgroundColor:"white",marginBlockEnd:"20px"}},onTabChange:j,tabActiveKey:x,tabList:n,breadcrumb:{routes:[{path:"/assetcenter",breadcrumbName:g.formatMessage({id:"menu.assetcenter"})},{path:"/hosts",breadcrumbName:g.formatMessage({id:"menu.assetcenter.hosts"})}]},children:[x==="basic"&&(0,e.jsx)(bt,{setActiveKey:f,setAppActiveKey:p}),x==="monitor"&&(0,e.jsx)(Zt,{}),x==="appdetail"&&(0,e.jsx)(Mt,{activeKey:M,setActiveKey:p})]})})},Ct=Pt}}]);
