"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[942],{5966:function(U,g,e){var M=e(1413),s=e(91),L=e(67294),u=e(33600),T=e(85893),l=["fieldProps","proFieldProps"],i=["fieldProps","proFieldProps"],m="text",h=function(d){var f=d.fieldProps,P=d.proFieldProps,v=(0,s.Z)(d,l);return(0,T.jsx)(u.Z,(0,M.Z)({valueType:m,fieldProps:f,filedConfig:{valueType:m},proFieldProps:P},v))},E=function(d){var f=d.fieldProps,P=d.proFieldProps,v=(0,s.Z)(d,i);return(0,T.jsx)(u.Z,(0,M.Z)({valueType:"password",fieldProps:f,proFieldProps:P,filedConfig:{valueType:m}},v))},O=h;O.Password=E,O.displayName="ProFormComponent",g.Z=O},56787:function(U,g,e){e.r(g);var M=e(19632),s=e.n(M),L=e(5574),u=e.n(L),T=e(12121),l=e(56346),i=e(47375),m=e(97269),h=e(5966),E=e(67294),O=e(30381),D=e.n(O),d=e(80737),f=e(65360),P=e(12461),v=e(71577),W=e(25035),j=e(24969),A=e(49748),_=e(85893),B=function(){var F=d.Z.useForm(),n=u()(F,1),t=n[0],o=[],a=(0,E.useState)(o),r=u()(a,2),S=r[0],G=r[1],$=(0,E.useState)(0),K=u()($,2),b=K[0],H=K[1],Y=[{title:"\u63D2\u4EF6\u540D\u79F0",dataIndex:"name"},{title:"\u7248\u672C",search:!1,dataIndex:"pversion"},{title:"\u54C8\u5E0C",search:!1,dataIndex:"sha256",width:"30%"},{title:"\u521B\u5EFA\u65F6\u95F4",search:!1,dataIndex:"create_at",renderText:function(c){var p=new Date(c*1e3);return D()(p).utc(!0).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u66F4\u6539\u65F6\u95F4",search:!1,dataIndex:"modify_at",renderText:function(c){var p=new Date(c*1e3);return D()(p).utc(!0).format("YYYY-MM-DD HH:mm:ss")}},{title:"\u64CD\u4F5C",search:!1,valueType:"option",key:"option",render:function(c,p,C,w){return[(0,_.jsx)(f.Z,{title:"\u662F\u5426\u5220\u9664\u8BE5\u63D2\u4EF6",onConfirm:function(Z){(0,A.sk)({params:{name:p.name,pversion:p.pversion}}).then(function(R){R.code===0?(P.ZP.success("\u5220\u9664\u6210\u529F"),H(b+1)):P.ZP.error("\u5220\u9664\u5931\u8D25")})},icon:(0,_.jsx)(W.Z,{style:{color:"red"}}),children:(0,_.jsx)("a",{href:"#",children:"\u5220\u9664"})})]}}];return(0,E.useEffect)(function(){var y=(0,A.UV)();y.then(function(c){var p,C=c==null||(p=c.data)===null||p===void 0?void 0:p.plugins;if(console.log("data:",c),C!==void 0)return G(C),C})},[b]),(0,_.jsx)(T._z,{children:(0,_.jsx)(l.Z,{columns:Y,options:!1,dataSource:S,search:{defaultCollapsed:!1,labelWidth:"auto",optionRender:function(c,p,C){return[(0,_.jsxs)(i.Y,{title:"\u65B0\u5EFA\u63D2\u4EF6",trigger:(0,_.jsxs)(v.Z,{type:"primary",children:[(0,_.jsx)(j.Z,{}),"\u65B0\u5EFA\u63D2\u4EF6"]}),form:t,autoFocusFirstInput:!0,modalProps:{destroyOnClose:!0},submitTimeout:2e3,onFinish:function(I){var Z=(0,A.LH)("/api/v1/plugin/insert",{method:"POST",data:JSON.stringify({sha256:I.sha256,name:I.name,pversion:I.pversion,urls:I.urls.split(",")}),headers:{"Content-Type":"application/json"}}).then(function(R){return R.code===0?(P.ZP.success("\u63D0\u4EA4\u6210\u529F"),H(b+1),!0):!1});return Z},children:[(0,_.jsx)(m.A.Group,{children:(0,_.jsx)(h.Z,{width:"md",name:"name",label:"\u63D2\u4EF6\u540D\u79F0",labelAlign:"left",placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u63D2\u4EF6\u540D\u79F0"}]})}),(0,_.jsx)(m.A.Group,{children:(0,_.jsx)(h.Z,{width:"md",name:"pversion",label:"\u63D2\u4EF6\u7248\u672C",placeholder:"\u8BF7\u8F93\u5165\u7248\u672C",rules:[{required:!0}]})}),(0,_.jsx)(m.A.Group,{children:(0,_.jsx)(h.Z,{width:"md",name:"urls",label:"\u4E0B\u8F7D\u5730\u5740",placeholder:"\u8BF7\u8F93\u5165\u7248\u672C",rules:[{required:!0,type:"string"}]})}),(0,_.jsx)(m.A.Group,{children:(0,_.jsx)(h.Z,{width:"md",name:"sha256",label:"SHA256",placeholder:"\u8BF7\u8F93\u5165sha256",rules:[{required:!0}]})})]})].concat(s()(C.reverse()))}}})})};g.default=B},49748:function(U,g,e){e.d(g,{Ek:function(){return h},LH:function(){return _},Nh:function(){return x},UV:function(){return W},Zs:function(){return O},nc:function(){return P},pi:function(){return d},sk:function(){return A}});var M=e(15009),s=e.n(M),L=e(97857),u=e.n(L),T=e(99289),l=e.n(T),i=e(80854),m=e(55648);function h(n){return E.apply(this,arguments)}function E(){return E=l()(s()().mark(function n(t){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/v1/grpc/conn/count",u()({method:"GET"},t||{})));case 1:case"end":return a.stop()}},n)})),E.apply(this,arguments)}function O(n,t){return D.apply(this,arguments)}function D(){return D=l()(s()().mark(function n(t,o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/v1/grpc/conn/basic",u()({method:"GET",params:u()({},t)},o||{})));case 1:case"end":return r.stop()}},n)})),D.apply(this,arguments)}function d(n,t){return f.apply(this,arguments)}function f(){return f=l()(s()().mark(function n(t,o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/v1/grpc/conn/stat",u()({method:"GET",params:u()({},t)},o||{})));case 1:case"end":return r.stop()}},n)})),f.apply(this,arguments)}function P(n,t){return v.apply(this,arguments)}function v(){return v=l()(s()().mark(function n(t,o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/v1/plugin/send",u()({method:"POST",data:JSON.stringify({name:t.name,pversion:t.pversion,agent_id:t.agent_id,action:m.aU}),headers:{"Content-Type":"application/json"}},o||{})));case 1:case"end":return r.stop()}},n)})),v.apply(this,arguments)}function W(n){return j.apply(this,arguments)}function j(){return j=l()(s()().mark(function n(t){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,i.request)("/api/v1/plugin/list",u()({method:"GET"},t||{})));case 1:case"end":return a.stop()}},n)})),j.apply(this,arguments)}function A(n){return(0,i.request)("/api/v1/plugin/delete",u()({method:"GET"},n||{}))}function _(n,t){return B.apply(this,arguments)}function B(){return B=l()(s()().mark(function n(t,o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)(t,u()({},o||{})));case 1:case"end":return r.stop()}},n)})),B.apply(this,arguments)}function x(n,t){return F.apply(this,arguments)}function F(){return F=l()(s()().mark(function n(t,o){return s()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",(0,i.request)("/api/v1/asset/get",u()({method:"GET",params:t},o||{})));case 1:case"end":return r.stop()}},n)})),F.apply(this,arguments)}}}]);
